<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#D4A574">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="–°–≤–µ—Ç –î—É—à–∏ - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23FDF8F3' width='100' height='100' rx='20'/><circle cx='50' cy='45' r='25' fill='%23FCD34D'/><circle cx='50' cy='45' r='18' fill='%23FBBF24'/></svg>">
    <title>–°–≤–µ—Ç –î—É—à–∏</title>
    <script>
        if ('serviceWorker' in navigator && location.protocol !== 'file:') {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('SW registered'))
                    .catch(err => console.log('SW failed', err));
            });
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap');
        
        :root {
            --golden-light: #F6C445;
            --golden-soft: #FAD978;
            --amber: #E8A838;
            --amber-warm: #D4882B;
            --peach-glow: #FDD5B1;
            --peach-soft: #FEE8D6;
            --rose-aurora: #F4A4A4;
            --twilight-blue: #4A6FA5;
            --twilight-deep: #2D4A6F;
            --night-sky: #1A2F4A;
            --violet: #6B5B8C;
            --violet-soft: #8A7AAA;
            --lavender: #B8A9C9;
            --harmony-green: #7BA885;
            --harmony-light: #A8C9AE;
            --sage: #9CAF88;
            --cream-light: #FFFBF5;
            --cream-warm: #FFF8F0;
            --sand: #F5EDE0;
            --earth-light: #E8DFD4;
            --text-primary: #2D2520;
            --text-secondary: #5C524A;
            --text-tertiary: #8A7F75;
            --text-on-dark: #FFFBF5;
            --shadow-sm: 0 1px 2px rgba(45, 37, 32, 0.05);
            --shadow-md: 0 4px 12px rgba(45, 37, 32, 0.08);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
            --bg-primary: #FFFBF5;
            --bg-card: white;
            --bg-nav: rgba(255, 251, 245, 0.95);
        }
        
        .dark-theme {
            --golden-light: #D4A84B;
            --golden-soft: #B89A40;
            --amber: #C9922F;
            --amber-warm: #A67825;
            --peach-glow: #2D2A27;
            --peach-soft: #262422;
            --cream-light: #1A1816;
            --cream-warm: #222220;
            --sand: #2A2826;
            --earth-light: #3A3835;
            --text-primary: #E5E2DC;
            --text-secondary: #A5A099;
            --text-tertiary: #706B65;
            --text-on-dark: #E5E2DC;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.4);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
            --bg-primary: #1A1816;
            --bg-card: #242220;
            --bg-nav: rgba(26, 24, 22, 0.98);
            --harmony-green: #5A8A65;
            --harmony-light: #4A7A55;
            --twilight-blue: #4A6A95;
            --twilight-deep: #2A4A6A;
            --violet: #6A5A8A;
            --violet-soft: #7A6A9A;
            --rose-aurora: #8A5A5A;
        }
        
        .dark-theme body {
            background: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .dark-theme .card {
            background: var(--bg-card) !important;
            border: 1px solid var(--earth-light) !important;
            color: var(--text-primary) !important;
        }
        
        .dark-theme .card-clickable:hover {
            background: #2D2B28 !important;
        }
        
        .dark-theme .bottom-nav {
            background: var(--bg-nav);
            border-top: 1px solid var(--earth-light);
        }
        
        .dark-theme .nav-item {
            color: var(--text-secondary);
        }
        
        .dark-theme .nav-item.active {
            color: var(--golden-light);
        }
        
        .dark-theme .btn-primary {
            background: linear-gradient(135deg, var(--amber), var(--golden-light));
            color: #1A1816;
        }
        
        .dark-theme .btn-secondary {
            background: var(--sand);
            color: var(--text-primary);
            border: 1px solid var(--earth-light);
        }
        
        .dark-theme input, .dark-theme textarea, .dark-theme select {
            background: var(--sand);
            color: var(--text-primary);
            border: 1px solid var(--earth-light);
        }
        
        .dark-theme input::placeholder, .dark-theme textarea::placeholder {
            color: var(--text-tertiary);
        }
        
        .dark-theme .journal-textarea {
            background: var(--sand);
            color: var(--text-primary);
        }
        
        .dark-theme .quote-card {
            background: linear-gradient(135deg, #2A3545, #1A2535) !important;
            border: 1px solid var(--twilight-blue);
            color: var(--text-primary) !important;
        }
        
        .dark-theme .quote-card *,
        .dark-theme .quote-text,
        .dark-theme .quote-author {
            color: #E5E2DC !important;
        }
        
        .dark-theme .recommendation-card {
            background: var(--bg-card) !important;
            border: 1px solid var(--earth-light);
            color: var(--text-primary) !important;
        }
        
        .dark-theme .recommendation-card * {
            color: var(--text-primary) !important;
        }
        
        .dark-theme .recommendation-title {
            color: var(--golden-light) !important;
        }
        
        .dark-theme .soul-chip {
            background: var(--sand);
            border: 1px solid var(--earth-light);
            color: var(--text-primary);
        }
        
        .dark-theme .soul-chip.active {
            background: var(--amber);
            color: #1A1816;
            border-color: var(--golden-light);
        }
        
        .dark-theme .alert {
            background: var(--sand);
            border: 1px solid var(--earth-light);
            color: var(--text-primary);
        }
        
        .dark-theme .alert-info {
            background: rgba(74, 106, 149, 0.2);
            border-color: var(--twilight-blue);
        }
        
        .dark-theme .progress-bar {
            background: var(--sand);
        }
        
        .dark-theme .progress-fill {
            background: linear-gradient(90deg, var(--amber), var(--golden-light));
        }
        
        .dark-theme h1, .dark-theme h2, .dark-theme h3, .dark-theme h4 {
            color: var(--text-primary);
        }
        
        .dark-theme p, .dark-theme span, .dark-theme div {
            color: inherit;
        }
        
        .dark-theme .category-chip {
            background: var(--sand);
            border: 1px solid var(--earth-light);
            color: var(--text-primary);
        }
        
        .dark-theme .category-chip.active {
            background: var(--amber);
            color: #1A1816;
        }
        
        /* –ü—Ä–∞–∫—Ç–∏–∫–∏ - –µ–¥–∏–Ω—ã–π —Ç—ë–º–Ω—ã–π —Å—Ç–∏–ª—å */
        .dark-theme .card[style*="background: #FEF"],
        .dark-theme .card[style*="background: #F0F"],
        .dark-theme .card[style*="background: #EFF"],
        .dark-theme .card[style*="background: #FCE"],
        .dark-theme .card[style*="background: #FFF"],
        .dark-theme .card[style*="background: #E0"],
        .dark-theme .card[style*="background: #D1"],
        .dark-theme .card[style*="background: linear-gradient"] {
            background: var(--bg-card) !important;
            border: 1px solid var(--earth-light) !important;
            color: var(--text-primary) !important;
        }
        
        .dark-theme .card[style*="background"] * {
            color: var(--text-primary) !important;
        }
        
        .dark-theme .card[style*="background"] .btn-primary {
            color: #1A1816 !important;
        }
        
        /* –¶–≤–µ—Ç–æ–≤—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–∞–∫—Ç–∏–∫ */
        .dark-theme .card[style*="background: #FEF3C7"],
        .dark-theme .card[style*="background: #FDE68A"] {
            background: #2D2820 !important;
            border-left: 3px solid var(--golden-light) !important;
        }
        
        .dark-theme .card[style*="background: #F0FDF4"],
        .dark-theme .card[style*="background: #D1FAE5"] {
            background: #202D22 !important;
            border-left: 3px solid var(--harmony-green) !important;
        }
        
        .dark-theme .card[style*="background: #FEF2F2"],
        .dark-theme .card[style*="background: #FECACA"],
        .dark-theme .card[style*="background: #FEE2E2"] {
            background: #2D2020 !important;
            border-left: 3px solid var(--rose-aurora) !important;
        }
        
        .dark-theme .card[style*="background: #EFF6FF"],
        .dark-theme .card[style*="background: #DBEAFE"] {
            background: #202530 !important;
            border-left: 3px solid var(--twilight-blue) !important;
        }
        
        .dark-theme .card[style*="background: #F3E8FF"],
        .dark-theme .card[style*="background: #E9D5FF"],
        .dark-theme .card[style*="background: #EDE9FE"] {
            background: #252030 !important;
            border-left: 3px solid var(--violet) !important;
        }
        
        .dark-theme .card[style*="background: #FFEDD5"],
        .dark-theme .card[style*="background: #FED7AA"] {
            background: #2D2520 !important;
            border-left: 3px solid #B8860B !important;
        }
        
        /* –í—Å–µ inline —Å—Ç–∏–ª–∏ —Å –±–µ–ª—ã–º —Ñ–æ–Ω–æ–º */
        .dark-theme [style*="background: white"],
        .dark-theme [style*="background: #FFF"],
        .dark-theme [style*="background:#FFF"] {
            background: var(--bg-card) !important;
            color: var(--text-primary) !important;
        }
        
        /* –¢–µ–≥–∏/—á–∏–ø—ã */
        .dark-theme [style*="border-radius: 15px"],
        .dark-theme [style*="border-radius: 10px"] {
            background: var(--sand) !important;
            color: var(--text-primary) !important;
            border: 1px solid var(--earth-light) !important;
        }
        
        /* –°—Å—ã–ª–∫–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ */
        .dark-theme a {
            color: var(--golden-light);
        }
        
        /* –ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –º–µ–ª–∫–∏–π —Ç–µ–∫—Å—Ç */
        .dark-theme [style*="color: var(--text-secondary)"],
        .dark-theme [style*="color: var(--text-tertiary)"] {
            color: var(--text-secondary) !important;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö */
        .dark-theme .btn-small {
            background: var(--sand);
            color: var(--text-primary);
            border: 1px solid var(--earth-light);
        }
        
        .dark-theme .btn-small.btn-primary {
            background: var(--amber);
            color: #1A1816;
            border: none;
        }
        
        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–∏—Ç–∞—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π */
        .dark-theme .quote-card,
        .dark-theme [class*="quote"] {
            background: linear-gradient(135deg, #2A3040, #1A2535) !important;
            color: #E5E2DC !important;
        }
        
        /* –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å –¥–ª—è —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã */
        .dark-theme .card {
            background: var(--bg-card) !important;
            color: var(--text-primary) !important;
            border: 1px solid var(--earth-light) !important;
        }
        
        .dark-theme .card h1,
        .dark-theme .card h2,
        .dark-theme .card h3,
        .dark-theme .card h4,
        .dark-theme .card p,
        .dark-theme .card span,
        .dark-theme .card div,
        .dark-theme .card strong,
        .dark-theme .card label {
            color: var(--text-primary) !important;
        }
        
        .dark-theme .card .btn-primary {
            color: #1A1816 !important;
        }
        
        /* –ü—Ä–∞–∫—Ç–∏–∫–∏ - —Ü–≤–µ—Ç–æ–≤–æ–π –∞–∫—Ü–µ–Ω—Ç —Å–ª–µ–≤–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .dark-theme .card-clickable[style] {
            border-left: 3px solid var(--golden-light) !important;
        }
        
        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ—Ö inline background –≤ —Ç—ë–º–Ω–æ–π —Ç–µ–º–µ */
        .dark-theme [style*="background:"],
        .dark-theme [style*="background :"],
        .dark-theme div[style*="background"],
        .dark-theme [style*="background: #F"],
        .dark-theme [style*="background: #E"],
        .dark-theme [style*="background: #D"],
        .dark-theme [style*="background: linear"],
        .dark-theme [style*="background: rgb"] {
            background: var(--bg-card) !important;
            color: var(--text-primary) !important;
        }
        
        .dark-theme [style*="background"] h1,
        .dark-theme [style*="background"] h2,
        .dark-theme [style*="background"] h3,
        .dark-theme [style*="background"] p,
        .dark-theme [style*="background"] span,
        .dark-theme [style*="background"] strong,
        .dark-theme [style*="background"] div {
            color: var(--text-primary) !important;
        }
        
        /* –ù–æ–º–µ—Ä —à–∞–≥–∞ –≤ –ø—Ä–∞–∫—Ç–∏–∫–µ */
        .dark-theme .step-number,
        .dark-theme [style*="background: var(--golden)"],
        .dark-theme [style*="background: var(--amber)"] {
            background: var(--amber) !important;
            color: #1A1816 !important;
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∞ —à–∞–≥–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ —Ç—ë–º–Ω–æ–π —Ç–µ–º–µ */
        .dark-theme .step-card {
            background: rgba(42, 40, 38, 0.9) !important;
            color: var(--text-primary) !important;
        }
        
        .dark-theme .step-num {
            background: linear-gradient(135deg, var(--amber), var(--golden-light)) !important;
            color: #1A1816 !important;
        }
        
        .dark-theme .step-text {
            color: var(--text-primary) !important;
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –ª—é–±—ã–º inline background –≤ —Ç—ë–º–Ω–æ–π —Ç–µ–º–µ */
        .dark-theme .card[style] {
            background: var(--bg-card) !important;
            border: 1px solid var(--earth-light) !important;
        }
        
        /* –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –∞–ª–µ—Ä—Ç—ã */
        .dark-theme .recommendation-card {
            background: var(--bg-card) !important;
            color: var(--text-primary) !important;
            border: 1px solid var(--earth-light) !important;
        }
        
        .dark-theme .recommendation-card *,
        .dark-theme .recommendation-title {
            color: var(--text-primary) !important;
        }
        
        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏ */
        .dark-theme input[type="text"],
        .dark-theme input:not([type]) {
            background: var(--sand) !important;
            color: var(--text-primary) !important;
            border: 1px solid var(--earth-light) !important;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html { font-size: 16px; }
        body {
            font-family: 'Nunito', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--cream-light);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
            overscroll-behavior: none;
        }
        h1, h2, h3, h4 { font-weight: 600; line-height: 1.3; }
        h1 { font-size: 1.5rem; }
        h2 { font-size: 1.25rem; }
        h3 { font-size: 1.1rem; }
        
        .app { 
            min-height: 100vh; 
            padding-bottom: calc(70px + var(--safe-bottom)); 
        }
        
        .main { 
            padding: 1rem; 
            padding-top: max(1rem, env(safe-area-inset-top)); 
        }
        
        /* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--cream-warm);
            border-top: 1px solid var(--earth-light);
            display: flex;
            justify-content: space-around;
            padding: 0.5rem 0;
            padding-bottom: calc(0.5rem + var(--safe-bottom));
            z-index: 100;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.4rem 0.75rem;
            border-radius: 12px;
            color: var(--text-tertiary);
            font-size: 0.65rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .nav-item.active {
            color: var(--amber);
            background: rgba(232, 168, 56, 0.1);
        }
        .nav-icon { font-size: 1.3rem; margin-bottom: 2px; }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: var(--cream-warm);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            box-shadow: var(--shadow-sm);
        }
        .card-clickable { cursor: pointer; }
        .card-clickable:active { transform: scale(0.98); opacity: 0.9; }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 12px 20px;
            border-radius: 12px;
            font-family: inherit;
            font-weight: 600;
            font-size: 0.9rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--amber), var(--golden-light));
            color: var(--text-on-dark);
            box-shadow: var(--shadow-md);
        }
        .btn-primary:active { transform: scale(0.96); }
        .btn-secondary {
            background: var(--cream-warm);
            color: var(--text-primary);
            border: 1px solid var(--earth-light);
        }
        .btn-small { padding: 8px 14px; font-size: 0.8rem; }
        .btn-full { width: 100%; }
        
        /* –°–æ—Å—Ç–æ—è–Ω–∏—è –¥—É—à–∏ */
        .soul-states { 
            display: flex; 
            gap: 0.4rem; 
            overflow-x: auto; 
            padding: 0.5rem 0; 
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .soul-states::-webkit-scrollbar { display: none; }
        .soul-chip {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 10px;
            border-radius: 12px;
            background: var(--cream-warm);
            min-width: 60px;
            flex-shrink: 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        .soul-chip.active {
            background: linear-gradient(135deg, var(--amber), var(--golden-light));
            color: var(--text-on-dark);
        }
        .soul-emoji { font-size: 1.2rem; }
        .soul-label { font-size: 0.6rem; font-weight: 500; margin-top: 2px; }
        
        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .category-pills { 
            display: flex; 
            gap: 0.4rem; 
            overflow-x: auto; 
            padding: 0.5rem 0;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .category-pills::-webkit-scrollbar { display: none; }
        .category-pill {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 6px 12px;
            border-radius: 20px;
            background: var(--cream-warm);
            font-size: 0.75rem;
            white-space: nowrap;
            flex-shrink: 0;
            cursor: pointer;
        }
        .category-pill.active {
            background: var(--amber);
            color: var(--text-on-dark);
        }
        
        /* –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ */
        .recommendation-card {
            background: linear-gradient(135deg, var(--golden-soft) 0%, var(--peach-soft) 100%);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }
        .recommendation-title { font-weight: 600; margin-bottom: 0.25rem; }
        .recommendation-reason { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.5rem; }
        
        /* –¶–∏—Ç–∞—Ç–∞ */
        .quote-card {
            background: linear-gradient(135deg, var(--lavender), var(--violet-soft));
            color: var(--text-on-dark);
            border-radius: 16px;
            padding: 1.25rem;
            text-align: center;
        }
        .quote-text { font-size: 1rem; font-style: italic; margin-bottom: 0.5rem; }
        .quote-author { font-size: 0.8rem; opacity: 0.8; }
        
        /* –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ */
        .greeting { font-size: 1.4rem; font-weight: 600; margin-bottom: 0.25rem; }
        .greeting-sub { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem; }
        
        /* –°–µ—Ç–∫–∏ */
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; }
        
        /* –ü—Ä–∞–∫—Ç–∏–∫–∞ */
        .practice-meta { display: flex; gap: 0.75rem; margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-tertiary); }
        
        /* –®–∞–≥–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ */
        .step-card {
            display: flex;
            gap: 0.75rem;
            background: rgba(255,255,255,0.7);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }
        .step-num {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, var(--amber), var(--golden-light));
            color: var(--text-on-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }
        .step-text { font-size: 0.95rem; line-height: 1.5; }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å */
        .progress-bar { height: 4px; background: var(--earth-light); border-radius: 2px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--amber), var(--golden-light)); border-radius: 2px; transition: width 0.3s; }
        
        /* –ß–∞—Ç */
        .chat-container { display: flex; flex-direction: column; height: calc(100vh - 140px); }
        .chat-messages { flex: 1; overflow-y: auto; padding: 0.5rem 0; }
        .chat-msg { display: flex; gap: 8px; margin-bottom: 0.75rem; max-width: 85%; }
        .chat-msg.user { margin-left: auto; flex-direction: row-reverse; }
        .chat-avatar { width: 32px; height: 32px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1rem; flex-shrink: 0; }
        .chat-avatar.ai { background: linear-gradient(135deg, var(--golden-soft), var(--peach-glow)); }
        .chat-avatar.user { background: var(--violet-soft); }
        .chat-bubble { padding: 10px 14px; border-radius: 14px; font-size: 0.9rem; line-height: 1.4; }
        .chat-msg.ai .chat-bubble { background: var(--cream-warm); border-bottom-left-radius: 4px; }
        .chat-msg.user .chat-bubble { background: linear-gradient(135deg, var(--amber), var(--golden-light)); color: var(--text-on-dark); border-bottom-right-radius: 4px; }
        .chat-input-container { display: flex; gap: 8px; padding: 0.75rem; background: var(--cream-warm); border-radius: 16px; margin-top: 0.5rem; }
        .chat-input { flex: 1; border: none; background: transparent; font-family: inherit; font-size: 0.9rem; color: var(--text-primary); outline: none; }
        
        /* –î–Ω–µ–≤–Ω–∏–∫ */
        .journal-entry { background: var(--cream-warm); border-radius: 12px; padding: 1rem; margin-bottom: 0.5rem; }
        .journal-textarea { width: 100%; min-height: 150px; border: 1px solid var(--earth-light); border-radius: 12px; padding: 1rem; font-family: inherit; font-size: 0.95rem; line-height: 1.6; resize: none; background: var(--cream-light); outline: none; }
        .journal-textarea:focus { border-color: var(--amber); }
        
        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stat-card { text-align: center; padding: 1rem; background: var(--cream-warm); border-radius: 12px; }
        .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--amber); }
        .stat-label { font-size: 0.7rem; color: var(--text-tertiary); margin-top: 2px; }
        
        /* –ü—Ä–∏—Ä–æ–¥–Ω—ã–π –±–µ–π–¥–∂ */
        .theme-badge { display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; border-radius: 16px; font-size: 0.75rem; font-weight: 500; }
        
        /* –¢–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç */
        .temperament-card { padding: 0.75rem; border-radius: 12px; text-align: center; cursor: pointer; border: 2px solid transparent; }
        .temperament-card.active { border-color: var(--amber); }
        .temperament-icon { font-size: 1.5rem; margin-bottom: 0.25rem; }
        .temperament-name { font-weight: 600; font-size: 0.8rem; }
        .temperament-element { font-size: 0.65rem; color: var(--text-tertiary); }
        
        /* –ê–ª–µ—Ä—Ç—ã */
        .alert { padding: 0.75rem; border-radius: 12px; margin-bottom: 0.75rem; display: flex; gap: 8px; align-items: flex-start; font-size: 0.85rem; }
        .alert-info { background: #E0F2FE; border-left: 3px solid #0EA5E9; }
        .alert-warning { background: #FEF3C7; border-left: 3px solid var(--amber); }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .fade-in { animation: fadeIn 0.3s ease forwards; }
        
        /* –†–∏—Ç–º –¥–Ω—è */
        .day-period { padding: 0.75rem; border-radius: 12px; margin-bottom: 0.5rem; background: var(--cream-warm); }
        .day-period.active { border-left: 3px solid var(--amber); background: var(--sand); }
        .day-period-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem; }
        .day-period-icon { font-size: 1.25rem; }
        .day-period-time { font-size: 0.7rem; color: var(--text-tertiary); }
    </style>
</head>
<body>
    <div id="root"></div>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // –ë–ê–ó–ê –î–ê–ù–ù–´–•
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        const DB = {
            get: (key, def = null) => {
                try {
                    const item = localStorage.getItem('svetdushi_' + key);
                    return item ? JSON.parse(item) : def;
                } catch { return def; }
            },
            set: (key, value) => {
                try { localStorage.setItem('svetdushi_' + key, JSON.stringify(value)); } catch {}
            },
            getStateHistory: () => DB.get('state_history', []),
            addState: (state) => {
                const history = DB.getStateHistory();
                history.push({ state, timestamp: Date.now(), date: new Date().toISOString() });
                if (history.length > 100) history.shift();
                DB.set('state_history', history);
            },
            getJournal: () => DB.get('journal', []),
            addJournalEntry: (entry) => {
                const journal = DB.getJournal();
                journal.unshift({ ...entry, id: Date.now(), date: new Date().toISOString() });
                DB.set('journal', journal);
            },
            getPracticeHistory: () => DB.get('practice_history', []),
            addPractice: (practiceId, duration) => {
                const history = DB.getPracticeHistory();
                history.push({ practiceId, duration, timestamp: Date.now(), date: new Date().toISOString() });
                DB.set('practice_history', history);
            },
            getProfile: () => DB.get('profile', { temperament: null, name: '' }),
            setProfile: (profile) => DB.set('profile', profile),
            // –ü—Ä–æ–≥—É–ª–∫–∏ —Ç—Ä–µ–∫–µ—Ä
            getWalks: () => DB.get('walks', []),
            addWalk: (walk) => {
                const walks = DB.getWalks();
                walks.push({ ...walk, id: Date.now(), date: new Date().toISOString() });
                DB.set('walks', walks);
                return walks;
            },
            getWalkStats: () => {
                const walks = DB.getWalks();
                const now = Date.now();
                const weekAgo = now - 7 * 24 * 60 * 60 * 1000;
                const monthAgo = now - 30 * 24 * 60 * 60 * 1000;
                
                const weekWalks = walks.filter(w => new Date(w.date).getTime() > weekAgo);
                const monthWalks = walks.filter(w => new Date(w.date).getTime() > monthAgo);
                
                // –ü–æ–¥—Å—á—ë—Ç —Å–µ—Ä–∏–∏ (streak)
                let currentStreak = 0;
                let checkDate = new Date();
                checkDate.setHours(0, 0, 0, 0);
                
                while (true) {
                    const dayStart = checkDate.getTime();
                    const dayEnd = dayStart + 24 * 60 * 60 * 1000;
                    const hasWalk = walks.some(w => {
                        const wTime = new Date(w.date).getTime();
                        return wTime >= dayStart && wTime < dayEnd;
                    });
                    if (hasWalk) {
                        currentStreak++;
                        checkDate.setDate(checkDate.getDate() - 1);
                    } else if (currentStreak === 0 && checkDate.getTime() === new Date().setHours(0,0,0,0)) {
                        // –°–µ–≥–æ–¥–Ω—è –µ—â—ë –Ω–µ—Ç –ø—Ä–æ–≥—É–ª–∫–∏, –ø—Ä–æ–≤–µ—Ä–∏–º –≤—á–µ—Ä–∞
                        checkDate.setDate(checkDate.getDate() - 1);
                    } else {
                        break;
                    }
                    if (currentStreak > 365) break; // –∑–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
                }
                
                const natureWalks = walks.filter(w => w.type === 'forest' || w.type === 'park' || w.location?.includes('–ª–µ—Å') || w.location?.includes('–ø–∞—Ä–∫')).length;
                const cityWalks = walks.filter(w => w.type === 'city').length;
                const sunriseWalks = walks.filter(w => w.timeOfDay === 'sunrise' || (new Date(w.date).getHours() >= 5 && new Date(w.date).getHours() < 8)).length;
                const sunsetWalks = walks.filter(w => w.timeOfDay === 'sunset' || (new Date(w.date).getHours() >= 17 && new Date(w.date).getHours() < 20)).length;
                
                return {
                    totalWalks: walks.length,
                    totalMinutes: walks.reduce((sum, w) => sum + (w.duration || 0), 0),
                    weekWalks: weekWalks.length,
                    weekMinutes: weekWalks.reduce((sum, w) => sum + (w.duration || 0), 0),
                    monthWalks: monthWalks.length,
                    monthMinutes: monthWalks.reduce((sum, w) => sum + (w.duration || 0), 0),
                    currentStreak,
                    averageDuration: walks.length > 0 ? Math.round(walks.reduce((sum, w) => sum + (w.duration || 0), 0) / walks.length) : 0,
                    natureWalks,
                    cityWalks,
                    sunriseWalks,
                    sunsetWalks,
                    lastWalk: walks.length > 0 ? walks[walks.length - 1] : null,
                    todayWalked: walks.some(w => {
                        const wDate = new Date(w.date);
                        const today = new Date();
                        return wDate.toDateString() === today.toDateString();
                    })
                };
            },
            getWalkGoal: () => DB.get('walk_goal', { dailyMinutes: 30, weeklyMinutes: 150 }),
            setWalkGoal: (goal) => DB.set('walk_goal', goal),
            // –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –±–∞–Ω–∏
            getSaunaDay: () => DB.get('sauna_day', null), // 0-6 (–í—Å-–°–±) –∏–ª–∏ null
            setSaunaDay: (day) => DB.set('sauna_day', day),
            getSaunaHistory: () => DB.get('sauna_history', []),
            addSaunaVisit: (visit) => {
                const history = DB.getSaunaHistory();
                history.push({ ...visit, id: Date.now(), date: new Date().toISOString() });
                DB.set('sauna_history', history);
            },
            // –ü–∏—Ç–∞–Ω–∏–µ
            getNutritionProgress: () => DB.get('nutrition_progress', { startDate: null, currentDay: 0, completedDays: [], meals: [] }),
            setNutritionProgress: (progress) => DB.set('nutrition_progress', progress),
            startNutritionProgram: () => {
                DB.set('nutrition_progress', { 
                    startDate: new Date().toISOString(), 
                    currentDay: 1, 
                    completedDays: [], 
                    meals: [],
                    streak: 0
                });
            },
            logMeal: (meal) => {
                const progress = DB.getNutritionProgress();
                progress.meals.push({ ...meal, id: Date.now(), date: new Date().toISOString() });
                DB.setNutritionProgress(progress);
            },
            completeNutritionDay: (day) => {
                const progress = DB.getNutritionProgress();
                if (!progress.completedDays.includes(day)) {
                    progress.completedDays.push(day);
                    progress.currentDay = Math.max(progress.currentDay, day + 1);
                    progress.streak = progress.completedDays.length;
                }
                DB.setNutritionProgress(progress);
            },
            // PHQ-9 –ò—Å—Ç–æ—Ä–∏—è
            getPhqHistory: () => DB.get('phq_history', []),
            addPhqResult: (score) => {
                const history = DB.getPhqHistory();
                history.push({ score, date: new Date().toISOString() });
                DB.set('phq_history', history);
                DB.set('last_phq_date', new Date().toISOString());
            },
            getLastPhqDate: () => DB.get('last_phq_date', null),
            shouldShowPhqReminder: () => {
                const lastDate = DB.getLastPhqDate();
                if (!lastDate) return true;
                const daysSince = Math.floor((Date.now() - new Date(lastDate).getTime()) / (1000 * 60 * 60 * 24));
                return daysSince >= 2;
            },
            // –†–µ—Ü–µ–ø—Ç—ã
            getRecipes: () => DB.get('recipes', []),
            addRecipe: (recipe) => {
                const recipes = DB.getRecipes();
                recipes.unshift({ ...recipe, id: Date.now(), createdAt: new Date().toISOString() });
                DB.set('recipes', recipes);
                return recipes;
            },
            updateRecipe: (id, updates) => {
                const recipes = DB.getRecipes();
                const idx = recipes.findIndex(r => r.id === id);
                if (idx !== -1) {
                    recipes[idx] = { ...recipes[idx], ...updates };
                    DB.set('recipes', recipes);
                }
                return recipes;
            },
            deleteRecipe: (id) => {
                const recipes = DB.getRecipes().filter(r => r.id !== id);
                DB.set('recipes', recipes);
                return recipes;
            }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // –ê–ù–¢–†–û–ü–û–°–û–§–ò–Ø
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        // –¢–µ—Å—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç–∞
        const TEMPERAMENT_TEST = {
            questions: [
                {
                    text: '–ö–∞–∫ –≤—ã –æ–±—ã—á–Ω–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç–µ –Ω–∞ –Ω–æ–≤—ã–µ –∏–¥–µ–∏?',
                    answers: [
                        { text: '–ó–∞–≥–æ—Ä–∞—é—Å—å —ç–Ω—Ç—É–∑–∏–∞–∑–º–æ–º, —Å—Ä–∞–∑—É —Ö–æ—á—É –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å', type: 'sanguine' },
                        { text: '–ë—ã—Å—Ç—Ä–æ –æ—Ü–µ–Ω–∏–≤–∞—é –∏ –¥–µ–π—Å—Ç–≤—É—é, –µ—Å–ª–∏ –≤–∏–∂—É –ø–æ–ª—å–∑—É', type: 'choleric' },
                        { text: '–ì–ª—É–±–æ–∫–æ –æ–±–¥—É–º—ã–≤–∞—é, –≤–∑–≤–µ—à–∏–≤–∞—é –≤—Å–µ –∑–∞ –∏ –ø—Ä–æ—Ç–∏–≤', type: 'melancholic' },
                        { text: '–°–ø–æ–∫–æ–π–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—é –∫ —Å–≤–µ–¥–µ–Ω–∏—é, –Ω–µ —Ç–æ—Ä–æ–ø–ª—é—Å—å', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫ –≤—ã –≤–µ–¥—ë—Ç–µ —Å–µ–±—è –≤ –∫–æ–º–ø–∞–Ω–∏–∏?',
                    answers: [
                        { text: '–û–±—â–∏—Ç–µ–ª–µ–Ω(—å–Ω–∞), –ª–µ–≥–∫–æ –∑–Ω–∞–∫–æ–º–ª—é—Å—å, –º–Ω–æ–≥–æ —à—É—á—É', type: 'sanguine' },
                        { text: '–ß–∞—Å—Ç–æ –±–µ—Ä—É –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É, –æ—Ä–≥–∞–Ω–∏–∑—É—é, –≤–µ–¥—É –∑–∞ —Å–æ–±–æ–π', type: 'choleric' },
                        { text: '–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –≥–ª—É–±–æ–∫–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã —Å –±–ª–∏–∑–∫–∏–º–∏', type: 'melancholic' },
                        { text: '–ù–∞–±–ª—é–¥–∞—é, —Å–ª—É—à–∞—é, –≤–∫–ª—é—á–∞—é—Å—å –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫ –≤—ã –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç–µ –Ω–µ—É–¥–∞—á–∏?',
                    answers: [
                        { text: '–ë—ã—Å—Ç—Ä–æ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞—é—Å—å, –Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç—Ö–æ–∂—É', type: 'sanguine' },
                        { text: '–ó–ª—é—Å—å, –Ω–æ —ç—Ç–æ –¥–∞—ë—Ç —ç–Ω–µ—Ä–≥–∏—é –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é', type: 'choleric' },
                        { text: '–î–æ–ª–≥–æ –ø–µ—Ä–µ–∂–∏–≤–∞—é, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é, —á—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫', type: 'melancholic' },
                        { text: '–ü—Ä–∏–Ω–∏–º–∞—é —Å–ø–æ–∫–æ–π–Ω–æ, –Ω–µ –¥—Ä–∞–º–∞—Ç–∏–∑–∏—Ä—É—é', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫–æ–π —Ç–µ–º–ø –∂–∏–∑–Ω–∏ –≤–∞–º –±–ª–∏–∂–µ?',
                    answers: [
                        { text: '–ë—ã—Å—Ç—Ä—ã–π, —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π, –º–Ω–æ–≥–æ –≤—Å–µ–≥–æ —Å—Ä–∞–∑—É', type: 'sanguine' },
                        { text: '–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π, —Ü–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª—ë–Ω–Ω—ã–π, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ã–π', type: 'choleric' },
                        { text: '–†–∞–∑–º–µ—Ä–µ–Ω–Ω—ã–π, —Å –≤—Ä–µ–º–µ–Ω–µ–º –¥–ª—è –≥–ª—É–±–∏–Ω—ã –∏ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏', type: 'melancholic' },
                        { text: '–°–ø–æ–∫–æ–π–Ω—ã–π, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π, –±–µ–∑ —Å–ø–µ—à–∫–∏', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ß—Ç–æ –≤–∞—Å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∑–∞—Ä—è–∂–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏–µ–π?',
                    answers: [
                        { text: '–û–±—â–µ–Ω–∏–µ, –Ω–æ–≤—ã–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è, —Å–º–µ–Ω–∞ –æ–±—Å—Ç–∞–Ω–æ–≤–∫–∏', type: 'sanguine' },
                        { text: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–π, –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π', type: 'choleric' },
                        { text: '–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –∏—Å–∫—É—Å—Å—Ç–≤–æ, –≥–ª—É–±–æ–∫–∏–µ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è', type: 'melancholic' },
                        { text: '–£–µ–¥–∏–Ω–µ–Ω–∏–µ, –ø—Ä–∏—Ä–æ–¥–∞, —Å–ø–æ–∫–æ–π–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫ –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —Ä–µ—à–µ–Ω–∏—è?',
                    answers: [
                        { text: '–ë—ã—Å—Ç—Ä–æ, –ø–æ –Ω–∞–∏—Ç–∏—é, –¥–æ–≤–µ—Ä—è—é —á—É–≤—Å—Ç–≤–∞–º', type: 'sanguine' },
                        { text: '–†–µ—à–∏—Ç–µ–ª—å–Ω–æ, –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—è—Å—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç', type: 'choleric' },
                        { text: '–¢—â–∞—Ç–µ–ª—å–Ω–æ –æ–±–¥—É–º—ã–≤–∞—é, –≤–∑–≤–µ—à–∏–≤–∞—é –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è', type: 'melancholic' },
                        { text: '–ù–µ —Ç–æ—Ä–æ–ø–ª—é—Å—å, –¥–∞—é —Å–∏—Ç—É–∞—Ü–∏–∏ —Å–æ–∑—Ä–µ—Ç—å', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫ –≤—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ —Ä—É—Ç–∏–Ω–µ?',
                    answers: [
                        { text: '–°–∫—É—á–∞—é, –Ω—É–∂–Ω–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏ –Ω–æ–≤–∏–∑–Ω–∞', type: 'sanguine' },
                        { text: '–¢–µ—Ä–ø–ª—é, –µ—Å–ª–∏ –æ–Ω–∞ –≤–µ–¥—ë—Ç –∫ —Ü–µ–ª–∏', type: 'choleric' },
                        { text: '–ú–æ–≥—É –ø–æ–≥—Ä—É–∑–∏—Ç—å—Å—è, –µ—Å–ª–∏ –¥–µ–ª–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª', type: 'melancholic' },
                        { text: '–ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞, —Å–æ–∑–¥–∞—ë—Ç –æ—â—É—â–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫–∏–µ —ç–º–æ—Ü–∏–∏ –≤—ã —á–∞—â–µ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ?',
                    answers: [
                        { text: '–†–∞–¥–æ—Å—Ç—å, –æ–ø—Ç–∏–º–∏–∑–º, –≤–æ–æ–¥—É—à–µ–≤–ª–µ–Ω–∏–µ', type: 'sanguine' },
                        { text: '–ê–∑–∞—Ä—Ç, —Ä–µ—à–∏–º–æ—Å—Ç—å, –∏–Ω–æ–≥–¥–∞ —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ', type: 'choleric' },
                        { text: '–ì–ª—É–±–æ–∫–∏–µ —á—É–≤—Å—Ç–≤–∞, –∏–Ω–æ–≥–¥–∞ –≥—Ä—É—Å—Ç—å –∏ —Ç–æ—Å–∫—É', type: 'melancholic' },
                        { text: '–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, —É–º–∏—Ä–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ, —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫ –≤—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ—Å—å –ø–æ—Å–ª–µ —Å—Ç—Ä–µ—Å—Å–∞?',
                    answers: [
                        { text: '–û–±—â–∞—é—Å—å —Å –¥—Ä—É–∑—å—è–º–∏, —Ä–∞–∑–≤–ª–µ–∫–∞—é—Å—å, –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Å—å', type: 'sanguine' },
                        { text: '–ó–∞–Ω–∏–º–∞—é—Å—å —Å–ø–æ—Ä—Ç–æ–º –∏–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é', type: 'choleric' },
                        { text: '–£–µ–¥–∏–Ω—è—é—Å—å, —Å–ª—É—à–∞—é –º—É–∑—ã–∫—É, —Ä–∞–∑–º—ã—à–ª—è—é', type: 'melancholic' },
                        { text: '–û—Ç–¥—ã—Ö–∞—é, —Å–ø–ª—é, –∑–∞–Ω–∏–º–∞—é—Å—å —Å–ø–æ–∫–æ–π–Ω—ã–º–∏ –¥–µ–ª–∞–º–∏', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫ –≤—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –ø–µ—Ä–µ–º–µ–Ω–∞–º?',
                    answers: [
                        { text: '–õ—é–±–ª—é! –ü–µ—Ä–µ–º–µ–Ω—ã ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ', type: 'sanguine' },
                        { text: '–ü—Ä–∏–Ω–∏–º–∞—é, –µ—Å–ª–∏ –æ–Ω–∏ –≤–µ–¥—É—Ç –∫ —É–ª—É—á—à–µ–Ω–∏—é', type: 'choleric' },
                        { text: '–û—Å—Ç–æ—Ä–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è', type: 'melancholic' },
                        { text: '–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Å—å', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫–æ–µ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫ –≤–∞–º –±–ª–∏–∂–µ?',
                    answers: [
                        { text: '–î–µ–Ω—å ‚Äî –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –æ–±—â–µ–Ω–∏—è', type: 'sanguine' },
                        { text: '–£—Ç—Ä–æ ‚Äî —ç–Ω–µ—Ä–≥–∏—á–Ω—ã–π —Å—Ç–∞—Ä—Ç –¥–Ω—è', type: 'choleric' },
                        { text: '–í–µ—á–µ—Ä –∏–ª–∏ –Ω–æ—á—å ‚Äî –≤—Ä–µ–º—è –¥–ª—è –≥–ª—É–±–∏–Ω—ã', type: 'melancholic' },
                        { text: '–õ—é–±–æ–µ, –∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –¥–µ–ª–∞–º–∏', type: 'phlegmatic' }
                    ]
                },
                {
                    text: '–ö–∞–∫ –≤—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º?',
                    answers: [
                        { text: '–°—Ç–∞—Ä–∞—é—Å—å —Å–≥–ª–∞–¥–∏—Ç—å, –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ —à—É—Ç–∫—É', type: 'sanguine' },
                        { text: '–í—Å—Ç—É–ø–∞—é, –æ—Ç—Å—Ç–∞–∏–≤–∞—é —Å–≤–æ—é –ø–æ–∑–∏—Ü–∏—é', type: 'choleric' },
                        { text: '–ò–∑–±–µ–≥–∞—é, –Ω–æ –≥–ª—É–±–æ–∫–æ –ø–µ—Ä–µ–∂–∏–≤–∞—é', type: 'melancholic' },
                        { text: '–°–æ—Ö—Ä–∞–Ω—è—é —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, –∏—â—É –∫–æ–º–ø—Ä–æ–º–∏—Å—Å', type: 'phlegmatic' }
                    ]
                }
            ],
            
            getDescription: (type) => {
                const descriptions = {
                    sanguine: {
                        title: '–°–∞–Ω–≥–≤–∏–Ω–∏–∫',
                        icon: 'üåû',
                        element: '–í–æ–∑–¥—É—Ö',
                        color: '#FCD34D',
                        strengths: ['–û–ø—Ç–∏–º–∏–∑–º –∏ –∂–∏–∑–Ω–µ—Ä–∞–¥–æ—Å—Ç–Ω–æ—Å—Ç—å', '–õ—ë–≥–∫–æ—Å—Ç—å –≤ –æ–±—â–µ–Ω–∏–∏', '–ë—ã—Å—Ç—Ä–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è', '–¢–≤–æ—Ä—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ'],
                        challenges: ['–†–∞–∑–≤–∏–≤–∞–π—Ç–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–≥—Ä—É–∂–∞—Ç—å—Å—è –≥–ª—É–±–∂–µ –≤ —Ç–µ–º—ã –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è', '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –Ω–∞—á–∞—Ç—ã—Ö –¥–µ–ª ‚Äî —ç—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏—Ç —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ', '–ù–∞—Ö–æ–¥–∏—Ç–µ —Ü–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ç–∏—à–∏–Ω–µ –∏ —É–µ–¥–∏–Ω–µ–Ω–∏–∏'],
                        practices: ['–ê–∫–≤–∞—Ä–µ–ª—å', '–ü—Ä–æ–≥—É–ª–∫–∏', '–î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏'],
                        tip: '–†–∞–∑–≤–∏–≤–∞–π—Ç–µ –≥–ª—É–±–∏–Ω—É —á–µ—Ä–µ–∑ –¥–Ω–µ–≤–Ω–∏–∫ –∏ –º–µ–¥–∏—Ç–∞—Ü–∏—é'
                    },
                    choleric: {
                        title: '–•–æ–ª–µ—Ä–∏–∫',
                        icon: 'üî•',
                        element: '–û–≥–æ–Ω—å',
                        color: '#F97316',
                        strengths: ['–≠–Ω–µ—Ä–≥–∏—á–Ω–æ—Å—Ç—å –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '–õ–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞', '–¶–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª—ë–Ω–Ω–æ—Å—Ç—å', '–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–µ—Å—Ç–∏ –∑–∞ —Å–æ–±–æ–π'],
                        challenges: ['–£—á–∏—Ç–µ—Å—å –¥–µ–ª–∞—Ç—å –ø–∞—É–∑—ã ‚Äî –æ–Ω–∏ —É—Å–∏–ª–∏–≤–∞—é—Ç –≤–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è', '–¢–µ—Ä–ø–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Å—É–ø–µ—Ä—Å–∏–ª–∞, –∫–æ—Ç–æ—Ä—É—é –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–∏—Ç—å', '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–∫ –∂–µ –≤–∞–∂–Ω–æ, –∫–∞–∫ –∏ –¥–µ–π—Å—Ç–≤–∏–µ'],
                        practices: ['–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏', '–ë–∞–Ω—è', '–ü—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è'],
                        tip: '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –ø–∞—É–∑—ã –∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å –¥–ª—è –±–∞–ª–∞–Ω—Å–∞'
                    },
                    melancholic: {
                        title: '–ú–µ–ª–∞–Ω—Ö–æ–ª–∏–∫',
                        icon: 'üåô',
                        element: '–ó–µ–º–ª—è',
                        color: '#8B5CF6',
                        strengths: ['–ì–ª—É–±–∏–Ω–∞ —á—É–≤—Å—Ç–≤', '–¢–≤–æ—Ä—á–µ—Å–∫–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '–≠–º–ø–∞—Ç–∏—è', '–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏'],
                        challenges: ['–í–∞—à–∞ –≥–ª—É–±–∏–Ω–∞ ‚Äî –¥–∞—Ä; –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫ –Ω–µ–π —Å–≤–µ—Ç –∏ –¥–≤–∏–∂–µ–Ω–∏–µ', '–û—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ —Å–µ–±–µ —Å —Ç–æ–π –∂–µ –¥–æ–±—Ä–æ—Ç–æ–π, —á—Ç–æ –∏ –∫ –¥—Ä—É–≥–∏–º', '–ü–æ–∑–≤–æ–ª—è–π—Ç–µ —Å–µ–±–µ –º–æ–º–µ–Ω—Ç—ã –ª—ë–≥–∫–æ—Å—Ç–∏ –∏ –∏–≥—Ä—ã'],
                        practices: ['–°–≤–µ—Ç', '–¢–µ–ø–ª–æ', '–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å', '–ß—É–¥–æ –¥–Ω—è'],
                        tip: '–î–æ–±–∞–≤–ª—è–π—Ç–µ —Å–≤–µ—Ç–∞ –∏ —Ç–µ–ø–ª–∞, –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å'
                    },
                    phlegmatic: {
                        title: '–§–ª–µ–≥–º–∞—Ç–∏–∫',
                        icon: 'üíß',
                        element: '–í–æ–¥–∞',
                        color: '#06B6D4',
                        strengths: ['–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ —É—Ä–∞–≤–Ω–æ–≤–µ—à–µ–Ω–Ω–æ—Å—Ç—å', '–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å', '–¢–µ—Ä–ø–µ–Ω–∏–µ', '–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å—Ç—Ä–µ—Å—Å—É'],
                        challenges: ['–í–∞—à —Ç–µ–º–ø ‚Äî —ç—Ç–æ —Å–∏–ª–∞; –∏–Ω–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å —É—Å–∫–æ—Ä–µ–Ω–∏—è', '–ù–æ–≤—ã–µ –Ω–∞—á–∏–Ω–∞–Ω–∏—è –ø—Ä–∏–Ω–æ—Å—è—Ç —Å–≤–µ–∂—É—é —ç–Ω–µ—Ä–≥–∏—é', '–ú–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–æ–∑–¥–∞—é—Ç –±–æ–ª—å—à–∏–µ –ø–µ—Ä–µ–º–µ–Ω—ã'],
                        practices: ['–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏', '–ú–∞—Å—Å–∞–∂', '–î—ã—Ö–∞–Ω–∏–µ'],
                        tip: '–î–æ–±–∞–≤–ª—è–π—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –≤ –∂–∏–∑–Ω—å'
                    }
                };
                return descriptions[type];
            }
        };
        
        const NATURAL_WISDOM = {
            temperaments: {
                sanguine: { id: 'sanguine', name: '–°–∞–Ω–≥–≤–∏–Ω–∏–∫', element: '–í–æ–∑–¥—É—Ö', icon: 'üå¨Ô∏è', color: '#F6C445', practices: ['breathing', 'gratitude'], description: '–í–æ–∑–¥—É—à–Ω—ã–π, –ª—ë–≥–∫–∏–π —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç' },
                choleric: { id: 'choleric', name: '–•–æ–ª–µ—Ä–∏–∫', element: '–û–≥–æ–Ω—å', icon: 'üî•', color: '#E85D04', practices: ['warmth_heart', 'antifragile'], description: '–û–≥–Ω–µ–Ω–Ω—ã–π, –≤–æ–ª–µ–≤–æ–π —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç' },
                melancholic: { id: 'melancholic', name: '–ú–µ–ª–∞–Ω—Ö–æ–ª–∏–∫', element: '–ó–µ–º–ª—è', icon: 'üåç', color: '#6B5B8C', practices: ['light_morning', 'color_gold'], description: '–ó–µ–º–Ω–æ–π, –≥–ª—É–±–æ–∫–∏–π —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç' },
                phlegmatic: { id: 'phlegmatic', name: '–§–ª–µ–≥–º–∞—Ç–∏–∫', element: '–í–æ–¥–∞', icon: 'üíß', color: '#4A6FA5', practices: ['warmth_tea', 'warmth_footbath'], description: '–í–æ–¥–Ω—ã–π, —Å–ø–æ–∫–æ–π–Ω—ã–π —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç' }
            },
            naturalDays: {
                0: { theme: '–°–≤–µ—Ç', name: '–í—Å', icon: '‚òÄÔ∏è', color: '#F6C445', oils: ['–∞–ø–µ–ª—å—Å–∏–Ω', '–ª–∞–¥–∞–Ω', '–±–µ—Ä–≥–∞–º–æ—Ç'], oilEffect: '–†–∞–¥–æ—Å—Ç—å –∏ —Å–≤–µ—Ç' },
                1: { theme: '–í–æ–¥–∞', name: '–ü–Ω', icon: 'üíß', color: '#60A5FA', oils: ['–ª–∞–≤–∞–Ω–¥–∞', '—Ä–æ–º–∞—à–∫–∞', '–º–µ–ª–∏—Å—Å–∞'], oilEffect: '–ü–æ–∫–æ–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ' },
                2: { theme: '–û–≥–æ–Ω—å', name: '–í—Ç', icon: 'üî•', color: '#DC2626', oils: ['—Ä–æ–∑–º–∞—Ä–∏–Ω', '–∏–º–±–∏—Ä—å'], oilEffect: '–≠–Ω–µ—Ä–≥–∏—è –∏ —Å–∏–ª–∞' },
                3: { theme: '–í–æ–∑–¥—É—Ö', name: '–°—Ä', icon: 'üå¨Ô∏è', color: '#F59E0B', oils: ['–º—è—Ç–∞', '—ç–≤–∫–∞–ª–∏–ø—Ç', '–ª–∏–º–æ–Ω'], oilEffect: '–Ø—Å–Ω–æ—Å—Ç—å –∏ –ª—ë–≥–∫–æ—Å—Ç—å' },
                4: { theme: '–î–µ—Ä–µ–≤–æ', name: '–ß—Ç', icon: 'üå≥', color: '#22C55E', oils: ['–∫–µ–¥—Ä', '—Å–∞–Ω–¥–∞–ª', '–ø–∏—Ö—Ç–∞'], oilEffect: '–†–æ—Å—Ç –∏ –º—É–¥—Ä–æ—Å—Ç—å' },
                5: { theme: '–¶–≤–µ—Ç–µ–Ω–∏–µ', name: '–ü—Ç', icon: 'üå∏', color: '#EC4899', oils: ['—Ä–æ–∑–∞', '–≥–µ—Ä–∞–Ω—å'], oilEffect: '–ì–∞—Ä–º–æ–Ω–∏—è –∏ –∫—Ä–∞—Å–æ—Ç–∞' },
                6: { theme: '–ó–µ–º–ª—è', name: '–°–±', icon: 'ü™®', color: '#78716C', oils: ['–∫–∏–ø–∞—Ä–∏—Å', '–º–æ–∂–∂–µ–≤–µ–ª—å–Ω–∏–∫'], oilEffect: '–ì–ª—É–±–∏–Ω–∞ –∏ –∫–æ—Ä–Ω–∏' }
            },
            oilsByMood: {
                heavy: { oils: ['–∞–ø–µ–ª—å—Å–∏–Ω', '–≥—Ä–µ–π–ø—Ñ—Ä—É—Ç', '–±–µ—Ä–≥–∞–º–æ—Ç'], effect: '–ü–æ–¥–Ω–∏–º–∞—é—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ' },
                low_energy: { oils: ['—Ä–æ–∑–º–∞—Ä–∏–Ω', '–º—è—Ç–∞', '—ç–≤–∫–∞–ª–∏–ø—Ç'], effect: '–ü—Ä–æ–±—É–∂–¥–∞—é—Ç —ç–Ω–µ—Ä–≥–∏—é' },
                anxious: { oils: ['–ª–∞–≤–∞–Ω–¥–∞', '—Ä–æ–º–∞—à–∫–∞', '–º–µ–ª–∏—Å—Å–∞'], effect: '–£—Å–ø–æ–∫–∞–∏–≤–∞—é—Ç' },
                neutral: { oils: ['–∫–µ–¥—Ä', '—Å–∞–Ω–¥–∞–ª', '–ª–∞–¥–∞–Ω'], effect: '–£–≥–ª—É–±–ª—è—é—Ç –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å' },
                hopeful: { oils: ['–≥–µ—Ä–∞–Ω—å', '—Ä–æ–∑–∞'], effect: '–£–∫—Ä–µ–ø–ª—è—é—Ç –Ω–∞–¥–µ–∂–¥—É' },
                grateful: { oils: ['–ª–∞–¥–∞–Ω', '–º–∏—Ä—Ä–∞', '—Ä–æ–∑–∞'], effect: '–£–≥–ª—É–±–ª—è—é—Ç –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å' },
                light: { oils: ['–∞–ø–µ–ª—å—Å–∏–Ω', '–ª–∏–º–æ–Ω', '–º–∞–Ω–¥–∞—Ä–∏–Ω'], effect: '–£—Å–∏–ª–∏–≤–∞—é—Ç —Ä–∞–¥–æ—Å—Ç—å' }
            },
            getCurrentRhythm: () => {
                const hour = new Date().getHours();
                if (hour >= 6 && hour < 9) return { name: '–£—Ç—Ä–æ', quality: '–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ', key: 'morning' };
                if (hour >= 9 && hour < 12) return { name: '–ü–æ–∑–¥–Ω–µ–µ —É—Ç—Ä–æ', quality: '–ú—ã—à–ª–µ–Ω–∏–µ', key: 'lateMorning' };
                if (hour >= 12 && hour < 15) return { name: '–ü–æ–ª–¥–µ–Ω—å', quality: '–í–æ–ª—è', key: 'midday' };
                if (hour >= 15 && hour < 18) return { name: '–î–µ–Ω—å', quality: '–°–æ—Ü–∏–∞–ª—å–Ω–æ–µ', key: 'afternoon' };
                if (hour >= 18 && hour < 21) return { name: '–í–µ—á–µ—Ä', quality: '–ß—É–≤—Å—Ç–≤–∞', key: 'evening' };
                if (hour >= 21 || hour < 3) return { name: '–ù–æ—á—å', quality: '–ü–æ–∫–æ–π', key: 'night' };
                return { name: '–ü—Ä–µ–¥—Ä–∞—Å—Å–≤–µ—Ç', quality: '–î—É—Ö–æ–≤–Ω–æ–µ', key: 'preDown' };
            },
            getNaturalDay: () => NATURAL_WISDOM.naturalDays[new Date().getDay()],
            analyzeStateHistory: (history) => {
                if (!history || history.length === 0) return null;
                const last7Days = history.filter(h => Date.now() - h.timestamp < 7 * 24 * 60 * 60 * 1000);
                const stateCounts = {};
                last7Days.forEach(h => { stateCounts[h.state] = (stateCounts[h.state] || 0) + 1; });
                const dominantState = Object.entries(stateCounts).sort((a, b) => b[1] - a[1])[0]?.[0];
                let trend = 'stable';
                if (last7Days.length >= 3) {
                    const stateValues = { heavy: 1, low_energy: 2, anxious: 3, neutral: 4, hopeful: 5, grateful: 6, light: 7 };
                    const recent = last7Days.slice(-3).map(h => stateValues[h.state] || 4);
                    const earlier = last7Days.slice(0, 3).map(h => stateValues[h.state] || 4);
                    const recentAvg = recent.reduce((a, b) => a + b, 0) / recent.length;
                    const earlierAvg = earlier.reduce((a, b) => a + b, 0) / earlier.length;
                    if (recentAvg > earlierAvg + 0.5) trend = 'improving';
                    else if (recentAvg < earlierAvg - 0.5) trend = 'declining';
                }
                return { totalEntries: last7Days.length, dominantState, trend };
            }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // –î–ê–ù–ù–´–ï
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        const SOUL_STATES = [
            { id: 'heavy', emoji: 'üåë', label: '–¢—è–∂–µ–ª–æ' },
            { id: 'low_energy', emoji: 'üåí', label: '–ú–∞–ª–æ —Å–∏–ª' },
            { id: 'anxious', emoji: 'üåì', label: '–¢—Ä–µ–≤–æ–≥–∞' },
            { id: 'neutral', emoji: 'üåî', label: '–°–ø–æ–∫–æ–π–Ω–æ' },
            { id: 'hopeful', emoji: 'üåï', label: '–ù–∞–¥–µ–∂–¥–∞' },
            { id: 'grateful', emoji: 'üåü', label: '–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å' },
            { id: 'light', emoji: '‚òÄÔ∏è', label: '–°–≤–µ—Ç–ª–æ' }
        ];

        const CATEGORIES = [
            { id: 'light', name: '–°–≤–µ—Ç', icon: '‚òÄÔ∏è' },
            { id: 'warmth', name: '–¢–µ–ø–ª–æ', icon: 'üî•' },
            { id: 'spa', name: '–°–ü–ê', icon: 'üõÅ' },
            { id: 'watercolor', name: '–ê–∫–≤–∞—Ä–µ–ª—å', icon: 'üé®' },
            { id: 'walk', name: '–ü—Ä–æ–≥—É–ª–∫–∏', icon: 'üö∂' },
            { id: 'breathing', name: '–î—ã—Ö–∞–Ω–∏–µ', icon: 'üå¨Ô∏è' },
            { id: 'body', name: '–¢–µ–ª–æ', icon: 'üßò' },
            { id: 'nondual', name: '–ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ', icon: '‚ú®' },
            { id: 'gratitude', name: '–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å', icon: 'üôè' },
            { id: 'journal', name: '–î–Ω–µ–≤–Ω–∏–∫', icon: 'üìù' }
        ];
        
        // –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≥—É–ª–æ–∫
        const WALK_MOTIVATIONS = {
            start: [
                '–ö–∞–∂–¥—ã–π —à–∞–≥ ‚Äî —ç—Ç–æ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Å–≤–µ—Ç—É üåÖ',
                '–ü—Ä–∏—Ä–æ–¥–∞ –∂–¥—ë—Ç —Ç–µ–±—è. –û–Ω–∞ –≤—Å–µ–≥–¥–∞ —Ä–∞–¥–∞ –≥–æ—Å—Ç—è–º üåø',
                '–°–≤–µ–∂–∏–π –≤–æ–∑–¥—É—Ö ‚Äî –ª—É—á—à–µ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ –¥–ª—è –¥—É—à–∏ üí®',
                '–°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –ø—Ä–æ–≥—É–ª–∫–∏! ‚òÄÔ∏è',
                '–î–≤–∏–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –∂–∏–∑–Ω—å. –ü–æ—Ä–∞ –¥–≤–∏–≥–∞—Ç—å—Å—è! üö∂',
                '–î–µ—Ä–µ–≤—å—è –≥–æ—Ç–æ–≤—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–µ–π —Å–∏–ª–æ–π üå≥',
                '–ù–µ–±–æ –∂–¥—ë—Ç —Ç–≤–æ–µ–≥–æ –≤–∑–≥–ª—è–¥–∞ üå§Ô∏è'
            ],
            during: [
                '–¢—ã –º–æ–ª–æ–¥–µ—Ü! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ üí™',
                '–ö–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ –Ω–∞ –≤–æ–∑–¥—É—Ö–µ ‚Äî –ø–æ–¥–∞—Ä–æ–∫ —Ç–µ–ª—É üéÅ',
                '–ó–∞–º–µ—á–∞–π –∫—Ä–∞—Å–æ—Ç—É –≤–æ–∫—Ä—É–≥ ‚Äî –æ–Ω–∞ –≤–µ–∑–¥–µ ‚ú®',
                '–î—ã—à–∏ –≥–ª—É–±–∂–µ, —á—É–≤—Å—Ç–≤—É–π –∂–∏–∑–Ω—å üå¨Ô∏è',
                '–¢–≤–æ—ë —Ç–µ–ª–æ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç —Ç–µ–±—è –∑–∞ –¥–≤–∏–∂–µ–Ω–∏–µ üôè'
            ],
            complete: [
                '–û—Ç–ª–∏—á–Ω–æ! –¢—ã —Å–¥–µ–ª–∞–ª(–∞) —ç—Ç–æ! üéâ',
                '–ü—Ä–æ–≥—É–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –¢—ã —Å—Ç–∞–ª(–∞) —á—É—Ç–æ—á–∫—É —Å–∏–ª—å–Ω–µ–µ üí™',
                '–ü—Ä–∏—Ä–æ–¥–∞ –ø–æ–¥–µ–ª–∏–ª–∞—Å—å —Å —Ç–æ–±–æ–π —Å–≤–æ–µ–π —ç–Ω–µ—Ä–≥–∏–µ–π üåø',
                '–ö–∞–∂–¥–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ ‚Äî –º–∞–ª–µ–Ω—å–∫–∞—è –ø–æ–±–µ–¥–∞ –Ω–∞–¥ —Ç—å–º–æ–π ‚òÄÔ∏è',
                '–¢—ã –∑–∞–±–æ—Ç–∏—à—å—Å—è –æ —Å–µ–±–µ. –≠—Ç–æ –≤–∞–∂–Ω–æ! ‚ù§Ô∏è'
            ],
            streak: [
                '–ü–æ—Ç—Ä—è—Å–∞—é—â–µ! {days} –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥! üî•',
                '{days} –¥–Ω–µ–π –ø—Ä–æ–≥—É–ª–æ–∫! –¢—ã —Ñ–æ—Ä–º–∏—Ä—É–µ—à—å –ø—Ä–∏–≤—ã—á–∫—É! üåü',
                '–°–µ—Ä–∏—è {days} –¥–Ω–µ–π! –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å! üí™'
            ],
            reminder: [
                '–°–µ–≥–æ–¥–Ω—è –µ—â—ë –Ω–µ –±—ã–ª–æ –ø—Ä–æ–≥—É–ª–∫–∏. –ú–æ–∂–µ—Ç, –≤—ã–π—Ç–∏ –Ω–∞ 10 –º–∏–Ω—É—Ç? üå§Ô∏è',
                '–°–≤–µ–∂–∏–π –≤–æ–∑–¥—É—Ö –∂–¥—ë—Ç —Ç–µ–±—è! üåø',
                '–î–∞–∂–µ –∫–æ—Ä–æ—Ç–∫–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –ª—É—á—à–µ, —á–µ–º –Ω–∏–∫–∞–∫–æ–π üö∂'
            ]
        };
        
        // –¶–µ–ª–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≥—É–ª–æ–∫
        const WALK_ACHIEVEMENTS = [
            { id: 'first_walk', name: '–ü–µ—Ä–≤—ã–π —à–∞–≥', icon: 'üë£', description: '–ó–∞–ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤—É—é –ø—Ä–æ–≥—É–ª–∫—É', condition: (stats) => stats.totalWalks >= 1 },
            { id: 'week_streak', name: '–ù–µ–¥–µ–ª—è –≤ –¥–≤–∏–∂–µ–Ω–∏–∏', icon: 'üî•', description: '7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥', condition: (stats) => stats.currentStreak >= 7 },
            { id: 'ten_walks', name: '–î–µ—Å—è—Ç–∫–∞', icon: 'üéØ', description: '10 –ø—Ä–æ–≥—É–ª–æ–∫', condition: (stats) => stats.totalWalks >= 10 },
            { id: 'hour_total', name: '–ß–∞—Å –Ω–∞ –≤–æ–∑–¥—É—Ö–µ', icon: '‚è±Ô∏è', description: '60 –º–∏–Ω—É—Ç –∑–∞ –Ω–µ–¥–µ–ª—é', condition: (stats) => stats.weekMinutes >= 60 },
            { id: 'three_hours', name: '–ú–∞—Å—Ç–µ—Ä –ø—Ä–æ–≥—É–ª–æ–∫', icon: 'üèÜ', description: '180 –º–∏–Ω—É—Ç –∑–∞ –Ω–µ–¥–µ–ª—é', condition: (stats) => stats.weekMinutes >= 180 },
            { id: 'month_streak', name: '–ú–µ—Å—è—Ü —Å–∏–ª—ã', icon: 'üíé', description: '30 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥', condition: (stats) => stats.currentStreak >= 30 },
            { id: 'nature_lover', name: '–õ—é–±–∏—Ç–µ–ª—å –ø—Ä–∏—Ä–æ–¥—ã', icon: 'üå≥', description: '5 –ø—Ä–æ–≥—É–ª–æ–∫ –≤ –ª–µ—Å—É/–ø–∞—Ä–∫–µ', condition: (stats) => stats.natureWalks >= 5 },
            { id: 'city_walker', name: '–ì–æ—Ä–æ–¥—Å–∫–æ–π —Ö–æ–¥–æ–∫', icon: 'üèôÔ∏è', description: '10 –ø—Ä–æ–≥—É–ª–æ–∫ –≤ –≥–æ—Ä–æ–¥–µ', condition: (stats) => (stats.cityWalks || 0) >= 10 },
            { id: 'sunrise_walker', name: '–†–∞–Ω–Ω—è—è –ø—Ç–∞—à–∫–∞', icon: 'üåÖ', description: '3 –ø—Ä–æ–≥—É–ª–∫–∏ –Ω–∞ —Ä–∞—Å—Å–≤–µ—Ç–µ', condition: (stats) => stats.sunriseWalks >= 3 },
            { id: 'sunset_walker', name: '–í–µ—á–µ—Ä–Ω–∏–π —Å—Ç—Ä–∞–Ω–Ω–∏–∫', icon: 'üåá', description: '3 –ø—Ä–æ–≥—É–ª–∫–∏ –Ω–∞ –∑–∞–∫–∞—Ç–µ', condition: (stats) => stats.sunsetWalks >= 3 }
        ];
        
        // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–≥—É–ª–∫–∞–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
        const WALK_RECOMMENDATIONS = {
            heavy: { duration: 15, type: 'walk_observe', tip: '–ü—Ä–∏ —Ç—è–∂–µ—Å—Ç–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ—Ä–æ—Ç–∫–æ–π –ø—Ä–æ–≥—É–ª–∫–∏. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –≤—ã–π—Ç–∏.' },
            low_energy: { duration: 10, type: 'walk_observe', tip: '–ù–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä—è–≥–∞–π—Å—è. –î–∞–∂–µ 10 –º–∏–Ω—É—Ç –Ω–∞ –≤–æ–∑–¥—É—Ö–µ –ø–æ–º–æ–≥—É—Ç.' },
            anxious: { duration: 20, type: 'walk_forest', tip: '–õ–µ—Å –∏–ª–∏ –ø–∞—Ä–∫ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω—ã –ø—Ä–∏ —Ç—Ä–µ–≤–æ–≥–µ.' },
            neutral: { duration: 30, type: 'walk_observe', tip: '–•–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–π –ø—Ä–æ–≥—É–ª–∫–∏.' },
            hopeful: { duration: 30, type: 'walk_beauty', tip: '–ü–æ–∏—â–∏ –∫—Ä–∞—Å–æ—Ç—É –≤–æ–∫—Ä—É–≥!' },
            grateful: { duration: 25, type: 'walk_beauty', tip: '–ü—Ä–æ–≥—É–ª–∫–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ ‚Äî –∑–∞–º–µ—á–∞–π, –∑–∞ —á—Ç–æ –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω.' },
            light: { duration: 40, type: 'walk_forest', tip: '–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –¥–æ–ª–≥–æ–π –ø—Ä–æ–≥—É–ª–∫–∏!' }
        };
        
        // Health-–∏–Ω—Å–∞–π—Ç—ã –æ –ø–æ–ª—å–∑–µ –ø—Ä–æ–≥—É–ª–æ–∫
        const HEALTH_INSIGHTS = [
            { icon: 'üß†', title: '–ú–æ–∑–≥', fact: '20 –º–∏–Ω—É—Ç –ø—Ä–æ–≥—É–ª–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç –ø—Ä–∏—Ç–æ–∫ –∫—Ä–æ–≤–∏ –∫ –º–æ–∑–≥—É –Ω–∞ 15%', benefit: '–£–ª—É—á—à–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏' },
            { icon: '‚ù§Ô∏è', title: '–°–µ—Ä–¥—Ü–µ', fact: '30 –º–∏–Ω—É—Ç —Ö–æ–¥—å–±—ã —Å–Ω–∏–∂–∞—é—Ç —Ä–∏—Å–∫ —Å–µ—Ä–¥–µ—á–Ω—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –Ω–∞ 19%', benefit: '–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã' },
            { icon: 'üòä', title: '–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ', fact: '–ü—Ä–æ–≥—É–ª–∫–∞ –ø–æ–≤—ã—à–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —ç–Ω–¥–æ—Ä—Ñ–∏–Ω–æ–≤ –Ω–∞ 30%', benefit: '–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω—Ç–∏–¥–µ–ø—Ä–µ—Å—Å–∞–Ω—Ç' },
            { icon: 'üí™', title: '–≠–Ω–µ—Ä–≥–∏—è', fact: '10 –º–∏–Ω—É—Ç –Ω–∞ –≤–æ–∑–¥—É—Ö–µ –±–æ–¥—Ä—è—Ç –ª—É—á—à–µ —á–∞—à–∫–∏ –∫–æ—Ñ–µ', benefit: '–ü–æ–≤—ã—à–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ç–æ–Ω—É—Å–∞' },
            { icon: 'üò¥', title: '–°–æ–Ω', fact: '–î–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏ —É–ª—É—á—à–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞ –Ω–∞ 65%', benefit: '–ì–ª—É–±–æ–∫–∏–π –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–∏–π —Å–æ–Ω' },
            { icon: 'üåø', title: '–°—Ç—Ä–µ—Å—Å', fact: '20 –º–∏–Ω—É—Ç –≤ –ø–∞—Ä–∫–µ —Å–Ω–∏–∂–∞—é—Ç –∫–æ—Ä—Ç–∏–∑–æ–ª –Ω–∞ 20%', benefit: '–°–Ω—è—Ç–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è' },
            { icon: 'ü¶¥', title: '–ö–æ—Å—Ç–∏', fact: '–•–æ–¥—å–±–∞ —É–∫—Ä–µ–ø–ª—è–µ—Ç –∫–æ—Å—Ç–∏ –∏ —Å—É—Å—Ç–∞–≤—ã', benefit: '–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ –æ—Å—Ç–µ–æ–ø–æ—Ä–æ–∑–∞' },
            { icon: 'üî•', title: '–ú–µ—Ç–∞–±–æ–ª–∏–∑–º', fact: '30 –º–∏–Ω —Ö–æ–¥—å–±—ã —Å–∂–∏–≥–∞—é—Ç ~150 –∫–∞–ª–æ—Ä–∏–π', benefit: '–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–¥–æ—Ä–æ–≤–æ–≥–æ –≤–µ—Å–∞' },
            { icon: 'üßò', title: '–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å', fact: '–ü—Ä–æ–≥—É–ª–∫–∞ –≤ –ø—Ä–∏—Ä–æ–¥–µ —Å–Ω–∏–∂–∞–µ—Ç —Ä—É–º–∏–Ω–∞—Ü–∏—é –Ω–∞ 25%', benefit: '–ú–µ–Ω—å—à–µ –Ω–∞–≤—è–∑—á–∏–≤—ã—Ö –º—ã—Å–ª–µ–π' },
            { icon: 'üå≥', title: '–§–∏—Ç–æ–Ω—Ü–∏–¥—ã', fact: '–õ–µ—Å–Ω–æ–π –≤–æ–∑–¥—É—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–ª–µ–±–Ω—ã–µ —Ñ–∏—Ç–æ–Ω—Ü–∏–¥—ã', benefit: '–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞' }
        ];
        
        // –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ø—Ä–æ–≥—É–ª–æ–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
        const analyzeWalkMoodCorrelation = (walks, stateHistory) => {
            if (walks.length < 3 || stateHistory.length < 3) return null;
            
            const stateValues = { heavy: 1, low_energy: 2, anxious: 3, neutral: 4, hopeful: 5, grateful: 6, light: 7 };
            const last14Days = [];
            
            for (let i = 0; i < 14; i++) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                date.setHours(0, 0, 0, 0);
                const dayEnd = date.getTime() + 24 * 60 * 60 * 1000;
                
                const dayWalks = walks.filter(w => {
                    const wTime = new Date(w.date).getTime();
                    return wTime >= date.getTime() && wTime < dayEnd;
                });
                
                const dayMoods = stateHistory.filter(s => {
                    const sTime = new Date(s.date).getTime();
                    return sTime >= date.getTime() && sTime < dayEnd;
                });
                
                const walkMinutes = dayWalks.reduce((sum, w) => sum + (w.duration || 0), 0);
                const avgMood = dayMoods.length > 0 
                    ? dayMoods.reduce((sum, m) => sum + (stateValues[m.state] || 4), 0) / dayMoods.length 
                    : null;
                
                last14Days.push({ date: date.toISOString(), walkMinutes, avgMood, dayOfWeek: date.getDay() });
            }
            
            // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–Ω–µ–π —Å –ø—Ä–æ–≥—É–ª–∫–∞–º–∏ –∏ –±–µ–∑
            const daysWithWalks = last14Days.filter(d => d.walkMinutes > 0 && d.avgMood !== null);
            const daysWithoutWalks = last14Days.filter(d => d.walkMinutes === 0 && d.avgMood !== null);
            
            const avgMoodWithWalks = daysWithWalks.length > 0 
                ? daysWithWalks.reduce((sum, d) => sum + d.avgMood, 0) / daysWithWalks.length 
                : null;
            const avgMoodWithoutWalks = daysWithoutWalks.length > 0 
                ? daysWithoutWalks.reduce((sum, d) => sum + d.avgMood, 0) / daysWithoutWalks.length 
                : null;
            
            // –õ—É—á—à–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ–≥—É–ª–æ–∫
            const dayStats = [0, 1, 2, 3, 4, 5, 6].map(day => {
                const days = last14Days.filter(d => d.dayOfWeek === day);
                return {
                    day,
                    avgMinutes: days.length > 0 ? days.reduce((sum, d) => sum + d.walkMinutes, 0) / days.length : 0
                };
            });
            const bestDay = dayStats.reduce((best, d) => d.avgMinutes > best.avgMinutes ? d : best, dayStats[0]);
            const dayNames = ['–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±'];
            
            return {
                last14Days: last14Days.reverse(),
                avgMoodWithWalks,
                avgMoodWithoutWalks,
                moodImprovement: avgMoodWithWalks && avgMoodWithoutWalks 
                    ? ((avgMoodWithWalks - avgMoodWithoutWalks) / avgMoodWithoutWalks * 100).toFixed(0) 
                    : null,
                bestDay: dayNames[bestDay.day],
                bestDayMinutes: Math.round(bestDay.avgMinutes)
            };
        };

        const PRACTICES = [
            // –°–í–ï–¢
            { id: 'light_morning', category: 'light', title: '–£—Ç—Ä–µ–Ω–Ω–∏–π —Å–≤–µ—Ç', short: '–í—Å—Ç—Ä–µ—á–∞ —Å —É—Ç—Ä–µ–Ω–Ω–∏–º —Å–≤–µ—Ç–æ–º', steps: ['–í—Å—Ç–∞–Ω—å—Ç–µ —É –æ–∫–Ω–∞, –≤—ã—Ö–æ–¥—è—â–µ–≥–æ –Ω–∞ –≤–æ—Å—Ç–æ–∫', '–ó–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞ –∏ –ø–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ —Ç–µ–ø–ª–æ —Å–≤–µ—Ç–∞', '–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ —Å–≤–µ—Ç –Ω–∞–ø–æ–ª–Ω—è–µ—Ç —Ç–µ–ª–æ', '–ú–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞', '–ü–æ–±—É–¥—å—Ç–µ –≤ —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏'], duration: 10, bg: '#FFF3C7', states: ['heavy', 'low_energy'] },
            { id: 'light_candle', category: 'light', title: '–ú–µ–¥–∏—Ç–∞—Ü–∏—è –Ω–∞ —Å–≤–µ—á—É', short: '–°–æ–∑–µ—Ä—Ü–∞–Ω–∏–µ –∂–∏–≤–æ–≥–æ –æ–≥–Ω—è', steps: ['–ó–∞–∂–≥–∏—Ç–µ —Å–≤–µ—á—É', '–ù–∞–ø—Ä–∞–≤—å—Ç–µ –º—è–≥–∫–∏–π –≤–∑–≥–ª—è–¥ –Ω–∞ –ø–ª–∞–º—è', '–ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ —Ç–∞–Ω—Ü–µ–º –æ–≥–Ω—è', '–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–≤–µ—Ç –≤–Ω—É—Ç—Ä–∏ –≤–∞—Å', '–ó–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –æ–±—Ä–∞–∑'], duration: 15, bg: '#FFE4C9', states: ['anxious', 'heavy'] },
            
            // –¢–ï–ü–õ–û
            { id: 'warmth_heart', category: 'warmth', title: '–¢–µ–ø–ª–æ —Å–µ—Ä–¥—Ü–∞', short: '–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ç–µ–ø–ª–∞', steps: ['–ü–æ–ª–æ–∂–∏—Ç–µ –ª–∞–¥–æ–Ω–∏ –Ω–∞ —Å–µ—Ä–¥—Ü–µ', '–í—Å–ø–æ–º–Ω–∏—Ç–µ –º–æ–º–µ–Ω—Ç –ª—é–±–≤–∏ –∏ —Ç–µ–ø–ª–∞', '–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –æ–≥–æ–Ω—ë–∫ –≤ –≥—Ä—É–¥–∏', '–ü–æ–∑–≤–æ–ª—å—Ç–µ —Ç–µ–ø–ª—É —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏—Ç—å—Å—è', '–°–∫–∞–∂–∏—Ç–µ: ¬´–í–æ –º–Ω–µ –µ—Å—Ç—å —Ç–µ–ø–ª–æ¬ª'], duration: 12, bg: '#FFE8E0', states: ['heavy', 'low_energy'] },
            { id: 'warmth_tea', category: 'warmth', title: '–ú–µ–¥–∏—Ç–∞—Ü–∏—è —Å —á–∞–µ–º', short: '–û—Å–æ–∑–Ω–∞–Ω–Ω–æ–µ –ø–∏—Ç—å—ë —Ç—ë–ø–ª–æ–≥–æ –Ω–∞–ø–∏—Ç–∫–∞', steps: ['–ó–∞–≤–∞—Ä–∏—Ç–µ —á–∞—à–∫—É —á–∞—è', '–í–æ–∑—å–º–∏—Ç–µ —á–∞—à–∫—É –¥–≤—É–º—è —Ä—É–∫–∞–º–∏', '–ü–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ —Ç–µ–ø–ª–æ –≤ –ª–∞–¥–æ–Ω—è—Ö', '–í–¥–æ—Ö–Ω–∏—Ç–µ –∞—Ä–æ–º–∞—Ç', '–ü–µ–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω–æ, —á—É–≤—Å—Ç–≤—É—è —Ç–µ–ø–ª–æ'], duration: 10, bg: '#FFF0D4', states: ['heavy', 'low_energy', 'anxious'] },
            { id: 'warmth_footbath', category: 'warmth', title: '–í–∞–Ω–Ω–æ—á–∫–∞ –¥–ª—è –Ω–æ–≥', short: '–ü—Ä–æ–≥—Ä–µ–≤ –Ω–æ–≥ —Å —ç—Ñ–∏—Ä–Ω—ã–º–∏ –º–∞—Å–ª–∞–º–∏', steps: ['–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ —Ç–∞–∑ —Å —Ç—ë–ø–ª–æ–π –≤–æ–¥–æ–π (38-40¬∞C)', '–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å–ª–æ –ø–æ –¥–Ω—é –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é', '–ü—Ä–∏ —Ç—è–∂–µ—Å—Ç–∏: –∞–ø–µ–ª—å—Å–∏–Ω, –≥—Ä–µ–π–ø—Ñ—Ä—É—Ç', '–ü—Ä–∏ —Ç—Ä–µ–≤–æ–≥–µ: –ª–∞–≤–∞–Ω–¥–∞, —Ä–æ–º–∞—à–∫–∞', '–ü—Ä–∏ —É–ø–∞–¥–∫–µ —Å–∏–ª: —Ä–æ–∑–º–∞—Ä–∏–Ω, –º—è—Ç–∞', '–î–æ–±–∞–≤—å—Ç–µ 3-5 –∫–∞–ø–µ–ª—å –≤ –≤–æ–¥—É', '–û–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≥–∏ –∏ —Ä–∞—Å—Å–ª–∞–±—å—Ç–µ—Å—å', '–ü–æ–±—É–¥—å—Ç–µ 15-20 –º–∏–Ω—É—Ç', '–ù–∞–¥–µ–Ω—å—Ç–µ —Ç—ë–ø–ª—ã–µ –Ω–æ—Å–∫–∏'], duration: 25, bg: '#FFE8E0', states: ['heavy', 'low_energy', 'anxious', 'neutral'] },
            { id: 'warmth_blanket', category: 'warmth', title: '–ö–æ–∫–æ–Ω —Ç–µ–ø–ª–∞', short: '–£–∫—É—Ç—ã–≤–∞–Ω–∏–µ –≤ –æ–¥–µ—è–ª–æ', steps: ['–í–æ–∑—å–º–∏—Ç–µ —Ç—ë–ø–ª–æ–µ –æ–¥–µ—è–ª–æ', '–£–∫—É—Ç–∞–π—Ç–µ—Å—å –ø–æ–ª–Ω–æ—Å—Ç—å—é', '–ü–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', '–î—ã—à–∏—Ç–µ –º–µ–¥–ª–µ–Ω–Ω–æ', '–ü–æ–±—É–¥—å—Ç–µ 15-20 –º–∏–Ω—É—Ç'], duration: 20, bg: '#FFF0D4', states: ['heavy', 'anxious'] },
            { id: 'warmth_self_hug', category: 'warmth', title: '–û–±—ä—è—Ç–∏—è —Å–µ–±—è', short: '–°–∞–º–æ—Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ', steps: ['–°–∫—Ä–µ—Å—Ç–∏—Ç–µ —Ä—É–∫–∏ –Ω–∞ –≥—Ä—É–¥–∏', '–û–±–Ω–∏–º–∏—Ç–µ —Å–µ–±—è –º—è–≥–∫–æ', '–ü–æ–∫–∞—á–∏–≤–∞–π—Ç–µ—Å—å, –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è', '–°–∫–∞–∂–∏—Ç–µ: ¬´–Ø –∑–∞–±–æ—á—É—Å—å –æ —Ç–µ–±–µ¬ª', '–ü–æ–±—É–¥—å—Ç–µ –≤ –æ–±—ä—è—Ç–∏—è—Ö 2-3 –º–∏–Ω—É—Ç—ã'], duration: 5, bg: '#FFE8E0', states: ['heavy', 'anxious', 'low_energy'] },
            { id: 'warmth_compress', category: 'warmth', title: '–ö–æ–º–ø—Ä–µ—Å—Å –Ω–∞ –ø–µ—á–µ–Ω—å', short: '–¢—ë–ø–ª—ã–π –∫–æ–º–ø—Ä–µ—Å—Å –¥–ª—è –≥–∞—Ä–º–æ–Ω–∏–∑–∞—Ü–∏–∏', steps: ['–°–º–æ—á–∏—Ç–µ –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ —Ç—ë–ø–ª–æ–π –≤–æ–¥–æ–π', '–õ—è–≥—Ç–µ –Ω–∞ —Å–ø–∏–Ω—É', '–ü–æ–ª–æ–∂–∏—Ç–µ –Ω–∞ –ø—Ä–∞–≤–æ–µ –ø–æ–¥—Ä–µ–±–µ—Ä—å–µ', '–°–≤–µ—Ä—Ö—É ‚Äî –≥—Ä–µ–ª–∫—É –∏–ª–∏ –±—É—Ç—ã–ª–∫—É', '–£–∫—Ä–æ–π—Ç–µ—Å—å –∏ —Ä–∞—Å—Å–ª–∞–±—å—Ç–µ—Å—å', '–ü–æ–±—É–¥—å—Ç–µ 20-30 –º–∏–Ω—É—Ç'], duration: 35, bg: '#FFE8E0', states: ['heavy', 'low_energy'] },
            
            // –ê–ö–í–ê–†–ï–õ–¨
            { id: 'watercolor_sunrise', category: 'watercolor', title: '–†–∞—Å—Å–≤–µ—Ç', short: '–û—Ç —Ç—å–º—ã –∫ —Å–≤–µ—Ç—É', steps: ['–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –∫—Ä–∞—Å–∫–∏', '–°–º–æ—á–∏—Ç–µ –±—É–º–∞–≥—É', '–ù–∞–Ω–µ—Å–∏—Ç–µ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –≤–Ω–∏–∑—É', '–î–æ–±–∞–≤—å—Ç–µ –∫—Ä–∞—Å–Ω—ã–π –∏ –æ—Ä–∞–Ω–∂–µ–≤—ã–π', '–ó–∞–≤–µ—Ä—à–∏—Ç–µ –∂—ë–ª—Ç—ã–º –Ω–∞–≤–µ—Ä—Ö—É'], duration: 20, bg: '#FFE4C9', states: ['heavy', 'low_energy', 'hopeful'] },
            { id: 'watercolor_emotion', category: 'watercolor', title: '–ü–æ—Ç–æ–∫ —ç–º–æ—Ü–∏–π', short: '–°–≤–æ–±–æ–¥–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ü–≤–µ—Ç–µ', steps: ['–†–∞–∑–ª–æ–∂–∏—Ç–µ –≤—Å–µ —Ü–≤–µ—Ç–∞', '–°–º–æ—á–∏—Ç–µ –±—É–º–∞–≥—É', '–ü—Ä–∏—Å–ª—É—à–∞–π—Ç–µ—Å—å –∫ —Å–µ–±–µ', '–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ', '–†–∏—Å—É–π—Ç–µ –∫–∞–∫ —Ö–æ—á–µ—Ç—Å—è'], duration: 15, bg: '#E8DCFF', states: ['heavy', 'anxious', 'neutral'] },
            
            // –ü–†–û–ì–£–õ–ö–ò
            { id: 'walk_sunrise', category: 'walk', title: '–ù–∞ —Ä–∞—Å—Å–≤–µ—Ç–µ', short: '–í—Å—Ç—Ä–µ—á–∞ –Ω–æ–≤–æ–≥–æ –¥–Ω—è', steps: ['–í—Å—Ç–∞–Ω—å—Ç–µ –¥–æ —Ä–∞—Å—Å–≤–µ—Ç–∞', '–í—ã–π–¥–∏—Ç–µ –Ω–∞ –º–µ—Å—Ç–æ —Å –≤–∏–¥–æ–º –Ω–∞ –≤–æ—Å—Ç–æ–∫', '–ù–∞–±–ª—é–¥–∞–π—Ç–µ, –∫–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è –Ω–µ–±–æ', '–í—Å—Ç—Ä–µ—Ç—å—Ç–µ –ø–µ—Ä–≤—ã–µ –ª—É—á–∏', '–ü–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç–µ –∑–∞ –Ω–æ–≤—ã–π –¥–µ–Ω—å'], duration: 30, bg: '#FFE4C9', states: ['heavy', 'low_energy'] },
            { id: 'walk_sunset', category: 'walk', title: '–ù–∞ –∑–∞–∫–∞—Ç–µ', short: '–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–Ω—è', steps: ['–í—ã–π–¥–∏—Ç–µ –∑–∞ —á–∞—Å –¥–æ –∑–∞–∫–∞—Ç–∞', '–ò–¥–∏—Ç–µ –º–µ–¥–ª–µ–Ω–Ω–æ', '–ù–∞–±–ª—é–¥–∞–π—Ç–µ –∏–≥—Ä—É –∫—Ä–∞—Å–æ–∫', '–û—Ç–ø—É—Å—Ç–∏—Ç–µ –∑–∞–±–æ—Ç—ã –¥–Ω—è', '–í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ —Å—É–º–µ—Ä–∫–∞—Ö'], duration: 40, bg: '#F4A4A4', states: ['anxious', 'neutral'] },
            { id: 'walk_forest', category: 'walk', title: '–õ–µ—Å–Ω–∞—è', short: '–ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ –ª–µ—Å', steps: ['–í–æ–π–¥–∏—Ç–µ –≤ –ª–µ—Å –º–µ–¥–ª–µ–Ω–Ω–æ', '–ü—Ä–∏—Å–ª—É—à–∞–π—Ç–µ—Å—å', '–í–¥–æ—Ö–Ω–∏—Ç–µ –∑–∞–ø–∞—Ö –ª–µ—Å–∞', '–ü—Ä–∏–∫–æ—Å–Ω–∏—Ç–µ—Å—å –∫ –¥–µ—Ä–µ–≤—É', '–ü—Ä–æ—Å—Ç–æ –ø–æ–±—É–¥—å—Ç–µ'], duration: 45, bg: '#DCF5DC', states: ['anxious', 'hopeful'] },
            { id: 'walk_observe', category: 'walk', title: '–ù–∞–±–ª—é–¥–µ–Ω–∏–µ', short: '–û—Å–æ–∑–Ω–∞–Ω–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞', steps: ['–í—ã–π–¥–∏—Ç–µ –±–µ–∑ —Ü–µ–ª–∏', '–ò–¥–∏—Ç–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –æ–±—ã—á–Ω–æ–≥–æ', '–ó–∞–º–µ—á–∞–π—Ç–µ –¥–µ—Ç–∞–ª–∏ –≤–æ–∫—Ä—É–≥', '–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –Ω–µ–±–æ', '–ü–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ –≤–æ–∑–¥—É—Ö'], duration: 25, bg: '#FAF6EE', states: ['neutral', 'hopeful', 'grateful'] },
            { id: 'walk_beauty', category: 'walk', title: '–ü–æ–∏—Å–∫ –∫—Ä–∞—Å–æ—Ç—ã', short: '–ù–∞–π—Ç–∏ 5 –∫—Ä–∞—Å–∏–≤—ã—Ö –≤–µ—â–µ–π', steps: ['–ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É: –Ω–∞–π—Ç–∏ 5 –∫—Ä–∞—Å–∏–≤—ã—Ö –≤–µ—â–µ–π', '–í—ã–π–¥–∏—Ç–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –≤–∑–≥–ª—è–¥–æ–º', '–ò—â–∏—Ç–µ –∫—Ä–∞—Å–æ—Ç—É –≤–µ–∑–¥–µ', '–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å —É –∫–∞–∂–¥–æ–π –Ω–∞—Ö–æ–¥–∫–∏', '–í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏'], duration: 30, bg: '#FEE8D6', states: ['neutral', 'hopeful', 'grateful'] },
            
            // –î–´–•–ê–ù–ò–ï
            { id: 'breathing', category: 'breathing', title: '–Ø–∫–æ—Ä–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ', short: '–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∫ –Ω–∞—Å—Ç–æ—è—â–µ–º—É', steps: ['–°—è–¥—å—Ç–µ —É–¥–æ–±–Ω–æ', '–ù–∞–π–¥–∏—Ç–µ, –≥–¥–µ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –¥—ã—Ö–∞–Ω–∏–µ', '–ù–∞–ø—Ä–∞–≤—å—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ —Ç—É–¥–∞', '–ü—Ä–æ—Å—Ç–æ –Ω–∞–±–ª—é–¥–∞–π—Ç–µ', '–ö–æ–≥–¥–∞ —É–º —É—Ö–æ–¥–∏—Ç ‚Äî –≤–µ—Ä–Ω–∏—Ç–µ—Å—å'], duration: 10, bg: '#E8F4F8', states: ['anxious', 'heavy', 'neutral'] },
            
            // –¢–ï–õ–û
            { id: 'mbct_bodyscan', category: 'body', title: '–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–∞', short: '–¢–µ–ª–µ—Å–Ω–æ–µ –æ—Å–æ–∑–Ω–∞–≤–∞–Ω–∏–µ', steps: ['–õ—è–≥—Ç–µ —É–¥–æ–±–Ω–æ', '–ù–∞–ø—Ä–∞–≤—å—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–∞–ª—å—Ü—ã –Ω–æ–≥', '–ú–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–¥–Ω–∏–º–∞–π—Ç–µ—Å—å –≤–≤–µ—Ä—Ö', '–ó–∞–º–µ—á–∞–π—Ç–µ –æ—â—É—â–µ–Ω–∏—è', '–î–æ–π–¥–∏—Ç–µ –¥–æ –º–∞–∫—É—à–∫–∏'], duration: 20, bg: '#E8EEF4', states: ['anxious', 'low_energy'] },
            
            // –ü–†–ò–°–£–¢–°–¢–í–ò–ï
            { id: 'nondual_presence', category: 'nondual', title: '–ß–∏—Å—Ç–æ–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ', short: '–û—Å–æ–∑–Ω–∞–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –µ—Å—Ç—å', steps: ['–°—è–¥—å—Ç–µ —É–¥–æ–±–Ω–æ', '–ó–∞–º–µ—Ç—å—Ç–µ –∑–≤—É–∫–∏ –≤–æ–∫—Ä—É–≥', '–ö—Ç–æ –∏—Ö –æ—Å–æ–∑–Ω–∞—ë—Ç?', '–ó–∞–º–µ—Ç—å—Ç–µ –æ—â—É—â–µ–Ω–∏—è', '–û—Ç–¥–æ—Ö–Ω–∏—Ç–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏'], duration: 15, bg: '#F5F0FF', states: ['neutral', 'hopeful', 'grateful'] },
            
            // –ë–õ–ê–ì–û–î–ê–†–ù–û–°–¢–¨
            { id: 'gratitude', category: 'gratitude', title: '–í–µ—á–µ—Ä–Ω—è—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å', short: '–¢—Ä–∏ –º–æ–º–µ–Ω—Ç–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏', steps: ['–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –ø–µ—Ä–µ–¥ —Å–Ω–æ–º', '–í—Å–ø–æ–º–Ω–∏—Ç–µ –¥–µ–Ω—å', '–ù–∞–π–¥–∏—Ç–µ —Ç—Ä–∏ –º–æ–º–µ–Ω—Ç–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏', '–ü–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å —Ç–µ–ª–æ–º', '–ó–∞—Å—ã–ø–∞–π—Ç–µ —Å —ç—Ç–∏–º'], duration: 5, bg: '#FFF8E8', states: ['heavy', 'neutral', 'hopeful', 'grateful'] },
            
            // –î–ù–ï–í–ù–ò–ö
            { id: 'journal_deep', category: 'journal', title: '–ì–ª—É–±–æ–∫–æ–µ –ø–∏—Å—å–º–æ', short: '–ü–∏—Å—å–º–µ–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ', steps: ['–í–æ–∑—å–º–∏—Ç–µ –±—É–º–∞–≥—É –∏ —Ä—É—á–∫—É', '–ù–∞–ø–∏—à–∏—Ç–µ: ¬´–ß—Ç–æ —Å–µ–π—á–∞—Å –≤–æ –º–Ω–µ?¬ª', '–ü–∏—à–∏—Ç–µ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ 10 –º–∏–Ω—É—Ç', '–ù–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ', '–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–µ'], duration: 15, bg: '#FAF6EE', states: ['neutral', 'hopeful'] },
            
            // –ë–ê–ù–Ø –ò –°–ü–ê
            { id: 'sauna', category: 'spa', title: '–ü–æ—Å–µ—â–µ–Ω–∏–µ –±–∞–Ω–∏', short: '–ì–ª—É–±–æ–∫–æ–µ –ø—Ä–æ–≥—Ä–µ–≤–∞–Ω–∏–µ —Ç–µ–ª–∞ –∏ –¥—É—à–∏', steps: ['–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —ç—Ñ–∏—Ä–Ω—ã–µ –º–∞—Å–ª–∞ –ø–æ –¥–Ω—é –Ω–µ–¥–µ–ª–∏', '–í—Å/‚òÄÔ∏è –°–≤–µ—Ç: –∞–ø–µ–ª—å—Å–∏–Ω, –ª–∞–¥–∞–Ω ‚Äî —Ä–∞–¥–æ—Å—Ç—å', '–ü–Ω/üíß –í–æ–¥–∞: –ª–∞–≤–∞–Ω–¥–∞, —ç–≤–∫–∞–ª–∏–ø—Ç ‚Äî –ø–æ–∫–æ–π', '–í—Ç/üî• –û–≥–æ–Ω—å: —Ä–æ–∑–º–∞—Ä–∏–Ω, –∏–º–±–∏—Ä—å ‚Äî —Å–∏–ª–∞', '–°—Ä/üå¨Ô∏è –í–æ–∑–¥—É—Ö: –º—è—Ç–∞, –ª–∏–º–æ–Ω ‚Äî —è—Å–Ω–æ—Å—Ç—å', '–ß—Ç/üå≥ –î–µ—Ä–µ–≤–æ: –ø–∏—Ö—Ç–∞, –∫–µ–¥—Ä ‚Äî —Ä–æ—Å—Ç', '–ü—Ç/üå∏ –¶–≤–µ—Ç–µ–Ω–∏–µ: —Ä–æ–∑–∞, –≥–µ—Ä–∞–Ω—å ‚Äî –≥–∞—Ä–º–æ–Ω–∏—è', '–°–±/ü™® –ó–µ–º–ª—è: –∫–∏–ø–∞—Ä–∏—Å, —Å–æ—Å–Ω–∞ ‚Äî –≥–ª—É–±–∏–Ω–∞', '–î–æ–±–∞–≤—å—Ç–µ 5-7 –∫–∞–ø–µ–ª—å –≤ –∫–æ–≤—à —Å –≤–æ–¥–æ–π', '–ü–µ—Ä–≤—ã–π –∑–∞—Ö–æ–¥ 5-7 –º–∏–Ω—É—Ç ‚Äî –ø—Ä–∏–≤—ã–∫–∞–Ω–∏–µ', '–û—Ç–¥—ã—Ö 10-15 –º–∏–Ω—É—Ç, –ø–µ–π—Ç–µ –≤–æ–¥—É –∏–ª–∏ —á–∞–π', '–í—Ç–æ—Ä–æ–π –∑–∞—Ö–æ–¥ 10-15 –º–∏–Ω—É—Ç —Å –≤–µ–Ω–∏–∫–æ–º', '–ú–∞—Å—Å–∞–∂ –≤–µ–Ω–∏–∫–æ–º ‚Äî –æ—Ç –Ω–æ–≥ –∫ –≥–æ–ª–æ–≤–µ', '–°–Ω–æ–≤–∞ –æ—Ç–¥—ã—Ö –∏ –ø–∏—Ç—å—ë', '–¢—Ä–µ—Ç–∏–π –∑–∞—Ö–æ–¥ ‚Äî —Å–æ–∑–µ—Ä—Ü–∞–Ω–∏–µ –∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å', '–ü–æ—Å–ª–µ –±–∞–Ω–∏ ‚Äî —Ç—ë–ø–ª—ã–π —Ç—Ä–∞–≤—è–Ω–æ–π —á–∞–π', '–û—Ç–¥—ã—Ö –º–∏–Ω–∏–º—É–º 30 –º–∏–Ω—É—Ç'], duration: 120, bg: '#FFE8E0', states: ['heavy', 'low_energy', 'anxious', 'neutral'] },
            
            { id: 'bath_full', category: 'spa', title: '–¢—ë–ø–ª–∞—è –≤–∞–Ω–Ω–∞', short: '–¶–µ–ª–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ —Å –º–∞—Å–ª–∞–º–∏', steps: ['–ù–∞–ø–æ–ª–Ω–∏—Ç–µ –≤–∞–Ω–Ω—É —Ç—ë–ø–ª–æ–π –≤–æ–¥–æ–π (37-38¬∞C)', '–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å–ª–∞ –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é:', '–ü—Ä–∏ —Ç—è–∂–µ—Å—Ç–∏: –∞–ø–µ–ª—å—Å–∏–Ω + –±–µ—Ä–≥–∞–º–æ—Ç', '–ü—Ä–∏ —Ç—Ä–µ–≤–æ–≥–µ: –ª–∞–≤–∞–Ω–¥–∞ + —Ä–æ–º–∞—à–∫–∞', '–ü—Ä–∏ —É–ø–∞–¥–∫–µ: —Ä–æ–∑–º–∞—Ä–∏–Ω + –≥—Ä–µ–π–ø—Ñ—Ä—É—Ç', '–î–ª—è –±–∞–ª–∞–Ω—Å–∞: –≥–µ—Ä–∞–Ω—å + –ª–∞–¥–∞–Ω', '–°–º–µ—à–∞–π—Ç–µ 8-10 –∫–∞–ø–µ–ª—å —Å —ç–º—É–ª—å–≥–∞—Ç–æ—Ä–æ–º', '–≠–º—É–ª—å–≥–∞—Ç–æ—Ä: —Å–æ–ª—å, —Å–ª–∏–≤–∫–∏ –∏–ª–∏ –º—ë–¥', '–î–æ–±–∞–≤—å—Ç–µ —Å–º–µ—Å—å –≤ –≤–æ–¥—É', '–ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –ø–æ –ø–ª–µ—á–∏', '–î—ã—à–∏—Ç–µ –≥–ª—É–±–æ–∫–æ, –≤–¥—ã—Ö–∞—è –∞—Ä–æ–º–∞—Ç', '–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ —Ç–µ–ø–ª–æ —Ä–∞—Å—Ç–≤–æ—Ä—è–µ—Ç —Ç—è–∂–µ—Å—Ç—å', '–ü–æ–±—É–¥—å—Ç–µ 20-30 –º–∏–Ω—É—Ç', '–ü–æ—Å–ª–µ ‚Äî —É–∫—É—Ç–∞–π—Ç–µ—Å—å –∏ –æ—Ç–¥–æ—Ö–Ω–∏—Ç–µ'], duration: 40, bg: '#FFE8E0', states: ['heavy', 'low_energy', 'anxious'] },
            
            { id: 'massage_self', category: 'spa', title: '–°–∞–º–æ–º–∞—Å—Å–∞–∂ —Å –º–∞—Å–ª–∞–º–∏', short: '–ó–∞–±–æ—Ç–ª–∏–≤–æ–µ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ –∫ —Å–µ–±–µ', steps: ['–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –±–∞–∑–æ–≤–æ–µ –º–∞—Å–ª–æ (–º–∏–Ω–¥–∞–ª—å–Ω–æ–µ, –∫—É–Ω–∂—É—Ç–Ω–æ–µ)', '–î–æ–±–∞–≤—å—Ç–µ —ç—Ñ–∏—Ä–Ω—ã–µ –º–∞—Å–ª–∞ (2-3 –∫–∞–ø–ª–∏ –Ω–∞ —Å—Ç.–ª.):', '–î–ª—è —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è: –ª–∞–≤–∞–Ω–¥–∞, —Ä–æ–º–∞—à–∫–∞', '–î–ª—è —ç–Ω–µ—Ä–≥–∏–∏: —Ä–æ–∑–º–∞—Ä–∏–Ω, –∞–ø–µ–ª—å—Å–∏–Ω', '–î–ª—è –∑–∞–∑–µ–º–ª–µ–Ω–∏—è: –∫–µ–¥—Ä, –≤–µ—Ç–∏–≤–µ—Ä', '–°–æ–≥—Ä–µ–π—Ç–µ –º–∞—Å–ª–æ –≤ –ª–∞–¥–æ–Ω—è—Ö', '–ù–∞—á–Ω–∏—Ç–µ —Å–æ —Å—Ç–æ–ø ‚Äî –∫—Ä—É–≥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è', '–ü–æ–¥–Ω–∏–º–∞–π—Ç–µ—Å—å –ø–æ –≥–æ–ª–µ–Ω—è–º, –±—ë–¥—Ä–∞–º', '–ú—è–≥–∫–æ –º–∞—Å—Å–∏—Ä—É–π—Ç–µ –∂–∏–≤–æ—Ç –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ', '–†–∞–∑–æ–º–Ω–∏—Ç–µ –ø–ª–µ—á–∏ –∏ —à–µ—é', '–ü–æ–º–∞—Å—Å–∏—Ä—É–π—Ç–µ —Ä—É–∫–∏ –æ—Ç –∫–∏—Å—Ç–µ–π –∫ –ø–ª–µ—á–∞–º', '–ó–∞–≤–µ—Ä—à–∏—Ç–µ –º–∞—Å—Å–∞–∂–µ–º –ª–∏—Ü–∞ –∏ –≥–æ–ª–æ–≤—ã', '–û—Å—Ç–∞–≤—å—Ç–µ –º–∞—Å–ª–æ –≤–ø–∏—Ç–∞—Ç—å—Å—è 15-20 –º–∏–Ω—É—Ç', '–ü—Ä–∏–º–∏—Ç–µ —Ç—ë–ø–ª—ã–π –¥—É—à –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ —É—Ç—Ä–∞'], duration: 30, bg: '#FEE8D6', states: ['heavy', 'low_energy', 'anxious', 'neutral'] },
            
            { id: 'massage_feet_evening', category: 'spa', title: '–í–µ—á–µ—Ä–Ω–∏–π –º–∞—Å—Å–∞–∂ —Å—Ç–æ–ø', short: '–†–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å—Ç–æ–ø—ã —Å –º–∞—Å–ª–∞–º–∏', steps: ['–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ –º–∞—Å–ª–æ –ø–æ –¥–Ω—é/—Å–æ—Å—Ç–æ—è–Ω–∏—é', '–í–µ—á–µ—Ä–Ω–∏–µ –º–∞—Å–ª–∞: –ª–∞–≤–∞–Ω–¥–∞, –ª–∞–¥–∞–Ω, –∫–µ–¥—Ä', '–°–º–µ—à–∞–π—Ç–µ 3-4 –∫–∞–ø–ª–∏ —Å –±–∞–∑–æ–≤—ã–º –º–∞—Å–ª–æ–º', '–°—è–¥—å—Ç–µ —É–¥–æ–±–Ω–æ, —Å–æ–≥–Ω–∏—Ç–µ –æ–¥–Ω—É –Ω–æ–≥—É', '–ù–∞–Ω–µ—Å–∏—Ç–µ –º–∞—Å–ª–æ –∏ —Ä–∞–∑–æ–≥—Ä–µ–π—Ç–µ —Å—Ç–æ–ø—É', '–†–∞–∑–æ–º–Ω–∏—Ç–µ –ø–æ–¥–æ—à–≤—É –±–æ–ª—å—à–∏–º–∏ –ø–∞–ª—å—Ü–∞–º–∏', '–ü—Ä–æ–π–¥–∏—Ç–µ –∫–∞–∂–¥—ã–π –ø–∞–ª–µ—Ü, –ø–æ—Ç—è–Ω–∏—Ç–µ', '–ü–æ–º–∞—Å—Å–∏—Ä—É–π—Ç–µ —Å–≤–æ–¥ —Å—Ç–æ–ø—ã', '–†–∞–∑–æ—Ç—Ä–∏—Ç–µ –ø—è—Ç–∫—É –∫—Ä—É–≥–æ–≤—ã–º–∏ –¥–≤–∏–∂–µ–Ω–∏—è–º–∏', '–ü–æ–≥–ª–∞–¥—å—Ç–µ –æ—Ç –ø–∞–ª—å—Ü–µ–≤ –∫ —â–∏–∫–æ–ª–æ—Ç–∫–µ', '–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ–ø–æ–π', '–ù–∞–¥–µ–Ω—å—Ç–µ —Ö–ª–æ–ø–∫–æ–≤—ã–µ –Ω–æ—Å–∫–∏', '–ü–æ–ª–µ–∂–∏—Ç–µ —Å –ø—Ä–∏–ø–æ–¥–Ω—è—Ç—ã–º–∏ –Ω–æ–≥–∞–º–∏'], duration: 20, bg: '#FFE8E0', states: ['anxious', 'neutral', 'low_energy'] },
            
            // –õ–Æ–ë–Ø–©–ê–Ø –î–û–ë–†–û–¢–ê
            { id: 'loving_kindness', category: 'nondual', title: '–õ—é–±—è—â–∞—è –¥–æ–±—Ä–æ—Ç–∞', short: '–ú–µ—Ç—Ç–∞-–º–µ–¥–∏—Ç–∞—Ü–∏—è –¥–ª—è —Å–µ—Ä–¥—Ü–∞', steps: ['–°—è–¥—å—Ç–µ —É–¥–æ–±–Ω–æ, –∑–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞', '–ü–æ–ª–æ–∂–∏—Ç–µ —Ä—É–∫—É –Ω–∞ —Å–µ—Ä–¥—Ü–µ', '–ù–∞–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–≤—å –∫ —Å–µ–±–µ:', '¬´–ü—É—Å—Ç—å —è –±—É–¥—É —Å—á–∞—Å—Ç–ª–∏–≤(–∞)¬ª', '¬´–ü—É—Å—Ç—å —è –±—É–¥—É –∑–¥–æ—Ä–æ–≤(–∞)¬ª', '¬´–ü—É—Å—Ç—å —è –±—É–¥—É –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏¬ª', '¬´–ü—É—Å—Ç—å —è –±—É–¥—É —Å–≤–æ–±–æ–¥–µ–Ω(–Ω–∞) –æ—Ç —Å—Ç—Ä–∞–¥–∞–Ω–∏–π¬ª', '–í—Å–ø–æ–º–Ω–∏—Ç–µ –±–ª–∏–∑–∫–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞', '–ù–∞–ø—Ä–∞–≤—å—Ç–µ –µ–º—É —Ç–µ –∂–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è', '–†–∞—Å—à–∏—Ä—å—Ç–µ –Ω–∞ –≤—Å–µ—Ö –∑–Ω–∞–∫–æ–º—ã—Ö', '–†–∞—Å—à–∏—Ä—å—Ç–µ –Ω–∞ –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤', '¬´–ü—É—Å—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤–∞ –±—É–¥—É—Ç —Å—á–∞—Å—Ç–ª–∏–≤—ã¬ª', '–ü–æ–±—É–¥—å—Ç–µ –≤ —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏'], duration: 15, bg: '#FFE4E4', states: ['heavy', 'anxious', 'neutral', 'hopeful', 'grateful'] },
            
            // –ü–†–û–©–ï–ù–ò–ï
            { id: 'forgiveness', category: 'nondual', title: '–ü—Ä–∞–∫—Ç–∏–∫–∞ –ø—Ä–æ—â–µ–Ω–∏—è', short: '–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –æ—Ç –≥—Ä—É–∑–∞ –ø—Ä–æ—à–ª–æ–≥–æ', steps: ['–°—è–¥—å—Ç–µ —Å–ø–æ–∫–æ–π–Ω–æ, –∑–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞', '–í—Å–ø–æ–º–Ω–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Ç—è–≥–æ—Ç–∏—Ç', '–ü—Ä–∏–∑–Ω–∞–π—Ç–µ –±–æ–ª—å, –∫–æ—Ç–æ—Ä—É—é –æ–Ω–∞ –ø—Ä–∏—á–∏–Ω–∏–ª–∞', '–°–∫–∞–∂–∏—Ç–µ: ¬´–Ø –ø—Ä–∏–∑–Ω–∞—é —ç—Ç—É –±–æ–ª—å¬ª', '–ü–æ–¥—É–º–∞–π—Ç–µ –æ —á–µ–ª–æ–≤–µ–∫–µ (–∏–ª–∏ —Å–µ–±–µ)', '–û–Ω/–æ–Ω–∞ —Ç–æ–∂–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç/—Å—Ç—Ä–∞–¥–∞–ª(–∞)', '–°–∫–∞–∂–∏—Ç–µ: ¬´–Ø –ø—Ä–æ—â–∞—é —Ç–µ–±—è¬ª', '–ò–ª–∏: ¬´–Ø –ø—Ä–æ—â–∞—é —Å–µ–±—è¬ª', '–ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–±—ã–≤–∞—Ç—å ‚Äî —Ç–æ–ª—å–∫–æ –æ—Ç–ø—É—Å—Ç–∏—Ç—å', '–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ –≥—Ä—É–∑ —É—Ö–æ–¥–∏—Ç', '–ü–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ –ª—ë–≥–∫–æ—Å—Ç—å –≤ –≥—Ä—É–¥–∏', '–ü–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç–µ —Å–µ–±—è –∑–∞ —ç—Ç–æ—Ç —à–∞–≥'], duration: 20, bg: '#F5F0FF', states: ['heavy', 'neutral'] },
            
            // –ö–¢–û –ù–ê–ë–õ–Æ–î–ê–ï–¢
            { id: 'who_observes', category: 'nondual', title: '–ö—Ç–æ –Ω–∞–±–ª—é–¥–∞–µ—Ç?', short: '–°–∞–º–æ–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ –∞–¥–≤–∞–π—Ç–µ', steps: ['–°—è–¥—å—Ç–µ –≤ —Ç–∏—à–∏–Ω–µ', '–ó–∞–º–µ—Ç—å—Ç–µ –∑–≤—É–∫–∏ –≤–æ–∫—Ä—É–≥', '–°–ø—Ä–æ—Å–∏—Ç–µ: ¬´–ö—Ç–æ —Å–ª—ã—à–∏—Ç —ç—Ç–∏ –∑–≤—É–∫–∏?¬ª', '–ó–∞–º–µ—Ç—å—Ç–µ –æ—â—É—â–µ–Ω–∏—è –≤ —Ç–µ–ª–µ', '–°–ø—Ä–æ—Å–∏—Ç–µ: ¬´–ö—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç —ç—Ç–æ —Ç–µ–ª–æ?¬ª', '–ó–∞–º–µ—Ç—å—Ç–µ –º—ã—Å–ª–∏', '–°–ø—Ä–æ—Å–∏—Ç–µ: ¬´–ö—Ç–æ –Ω–∞–±–ª—é–¥–∞–µ—Ç –º—ã—Å–ª–∏?¬ª', '–ù–µ –∏—â–∏—Ç–µ –æ—Ç–≤–µ—Ç —É–º–æ–º', '–ü—Ä–æ—Å—Ç–æ –±—É–¥—å—Ç–µ —Å –≤–æ–ø—Ä–æ—Å–æ–º', '–ó–∞–º–µ—Ç—å—Ç–µ: –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–æ–º', '–¢–æ, —á—Ç–æ –≤—ã –µ—Å—Ç—å ‚Äî —ç—Ç–æ —Å–∞–º–æ –æ—Å–æ–∑–Ω–∞–≤–∞–Ω–∏–µ', '–û—Ç–¥–æ—Ö–Ω–∏—Ç–µ –∫–∞–∫ —ç—Ç–æ –æ—Å–æ–∑–Ω–∞–≤–∞–Ω–∏–µ'], duration: 15, bg: '#F5F0FF', states: ['neutral', 'hopeful', 'grateful', 'light'] },
            
            // –ß–£–î–û –î–ù–Ø
            { id: 'wonder_of_day', category: 'gratitude', title: '–ß—É–¥–æ –¥–Ω—è', short: '–í–µ—á–µ—Ä–Ω—è—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è', steps: ['–í–µ—á–µ—Ä–æ–º, –ø–µ—Ä–µ–¥ —Å–Ω–æ–º', '–í—Å–ø–æ–º–Ω–∏—Ç–µ –ø—Ä–æ—à–µ–¥—à–∏–π –¥–µ–Ω—å', '–ü—Ä–æ–π–¥–∏—Ç–µ –µ–≥–æ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ', '–û—Ç –≤–µ—á–µ—Ä–∞ –∫ —É—Ç—Ä—É, –∫–∞–¥—Ä –∑–∞ –∫–∞–¥—Ä–æ–º', '–ù–∞–π–¥–∏—Ç–µ –º–æ–º–µ–Ω—Ç —É–¥–∏–≤–ª–µ–Ω–∏—è –∏–ª–∏ –∫—Ä–∞—Å–æ—Ç—ã', '–≠—Ç–æ –∏ –µ—Å—Ç—å ¬´—á—É–¥–æ –¥–Ω—è¬ª', '–ó–∞–¥–µ—Ä–∂–∏—Ç–µ—Å—å –Ω–∞ –Ω—ë–º', '–ü–æ–∑–≤–æ–ª—å—Ç–µ —á—É–≤—Å—Ç–≤—É –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å –≤–∞—Å', '–û—Ç–ø—É—Å—Ç–∏—Ç–µ –¥–µ–Ω—å —Å –º–∏—Ä–æ–º', '–ó–∞—Å—ã–ø–∞–π—Ç–µ —Å –æ–±—Ä–∞–∑–æ–º —á—É–¥–∞'], duration: 10, bg: '#FFF8E8', states: ['neutral', 'hopeful', 'grateful'] },
            
            // –ü–°–ò–•–û–û–ë–†–ê–ó–û–í–ê–ù–ò–ï
            { id: 'psychoeducation', category: 'journal', title: '–ü–æ–Ω–∏–º–∞–Ω–∏–µ –¥–µ–ø—Ä–µ—Å—Å–∏–∏', short: '–ó–Ω–∞–Ω–∏–µ ‚Äî –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫ –∏—Å—Ü–µ–ª–µ–Ω–∏—é', steps: ['–î–µ–ø—Ä–µ—Å—Å–∏—è ‚Äî —ç—Ç–æ –Ω–µ —Å–ª–∞–±–æ—Å—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞', '–≠—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—â–µ–µ —Ç–µ–ª–æ –∏ –¥—É—à—É', '–°–∏–º–ø—Ç–æ–º—ã: —É–ø–∞–¥–æ–∫ —Å–∏–ª, –ø–æ—Ç–µ—Ä—è –∏–Ω—Ç–µ—Ä–µ—Å–∞', '–¢—è–∂–µ—Å—Ç—å, –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å–Ω–∞ –∏ –∞–ø–ø–µ—Ç–∏—Ç–∞', '–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –º—ã—Å–ª–∏ ‚Äî —Å–∏–º–ø—Ç–æ–º, –Ω–µ –ø—Ä–∞–≤–¥–∞', '–ú—ã—Å–ª–∏ ‚Äî —ç—Ç–æ –Ω–µ —Ñ–∞–∫—Ç—ã –æ –≤–∞—Å', '–î–µ–ø—Ä–µ—Å—Å–∏—è –∏—Å–∫–∞–∂–∞–µ—Ç –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ', '–í–∞–∂–Ω–æ: —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ', '–û–Ω–æ –ø–æ–¥–¥–∞—ë—Ç—Å—è —Ä–∞–±–æ—Ç–µ –∏ –ª–µ—á–µ–Ω–∏—é', '–ü—Ä–∞–∫—Ç–∏–∫–∏, –¥–≤–∏–∂–µ–Ω–∏–µ, —Å–≤–µ—Ç ‚Äî –ø–æ–º–æ–≥–∞—é—Ç', '–ü—Ä–∏ —Ç—è–∂—ë–ª—ã—Ö —Å–∏–º–ø—Ç–æ–º–∞—Ö ‚Äî –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É', '–í—ã –Ω–µ –æ–¥–∏–Ω–æ–∫–∏ –≤ —ç—Ç–æ–º'], duration: 10, bg: '#E8F4F8', states: ['heavy', 'low_energy', 'anxious', 'neutral'] }
        ];
        
        // –ì–æ—Ä—è—á–∏–µ –ª–∏–Ω–∏–∏ –ø–æ–º–æ—â–∏
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // –ú–û–î–£–õ–¨ –ü–ò–¢–ê–ù–ò–Ø (–ü–ê–õ–ï–û)
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        const NUTRITION_PLAN = {
            morning: {
                title: '–ó–∞–≤—Ç—Ä–∞–∫ (–¥–æ 10:00)',
                principle: '–ë–µ–ª–∫–æ–≤–æ-–∂–∏—Ä–æ–≤–æ–π —Ä–∞—Ü–∏–æ–Ω + —Å–ª–æ–∂–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã',
                icon: 'üåÖ',
                description: '–£—Ç—Ä–æ–º –æ—Ä–≥–∞–Ω–∏–∑–º –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏. –ë–µ–ª–∫–∏ –∏ –∂–∏—Ä—ã –¥–∞—é—Ç –Ω–∞—Å—ã—â–µ–Ω–∏–µ –Ω–∞ 4-5 —á–∞—Å–æ–≤ –±–µ–∑ —Å–∫–∞—á–∫–æ–≤ —Å–∞—Ö–∞—Ä–∞.',
                foods: [
                    { name: '–Ø–π—Ü–∞', details: '2-3 —à—Ç. (–≤–∞—Ä–µ–Ω—ã–µ, –æ–º–ª–µ—Ç, –≥–ª–∞–∑—É–Ω—å—è)', icon: 'ü•ö' },
                    { name: '–¢–æ–ø–ª—ë–Ω–æ–µ –º–∞—Å–ª–æ', details: '–ì—Ö–∏ ‚Äî 1-2 —Å—Ç.–ª. –∫ –ª—é–±—ã–º –±–ª—é–¥–∞–º', icon: 'üßà' },
                    { name: '–†—ã–±–∞', details: '–õ–æ—Å–æ—Å—å, —Å–µ–ª—å–¥—å, —Å–∫—É–º–±—Ä–∏—è', icon: 'üêü' },
                    { name: '–û—Ä–µ—Ö–∏', details: '–ì–æ—Ä—Å—Ç—å –º–∏–Ω–¥–∞–ª—è –∏–ª–∏ –≥—Ä–µ—Ü–∫–∏—Ö', icon: 'ü•ú' },
                    { name: '–ö–∞—à–∞', details: '–ì—Ä–µ—á–∫–∞, –æ–≤—Å—è–Ω–∫–∞ (–±–µ–∑ —Å–∞—Ö–∞—Ä–∞)', icon: 'ü•£' },
                    { name: '–û–≤–æ—â–∏', details: '–ü–æ–º–∏–¥–æ—Ä—ã, –æ–≥—É—Ä—Ü—ã, –∑–µ–ª–µ–Ω—å', icon: 'ü•ó' },
                    { name: '–°—ã—Ä', details: '–¢–≤—ë—Ä–¥—ã–π, –≤—ã–¥–µ—Ä–∂–∞–Ω–Ω—ã–π', icon: 'üßÄ' }
                ],
                avoid: ['–°–ª–∞–¥–∫–∏–µ –∫–∞—à–∏', '–ú—é—Å–ª–∏ —Å —Å–∞—Ö–∞—Ä–æ–º', '–°–æ–∫–∏', '–•–ª–µ–± –±–µ–ª—ã–π', '–í—ã–ø–µ—á–∫–∞']
            },
            lunch: {
                title: '–û–±–µ–¥ (12:00 - 14:00)',
                principle: '–ü–∏–∫ –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏—è ‚Äî –ª—é–±–∞—è –ø–∏—â–∞',
                icon: '‚òÄÔ∏è',
                description: '–í —ç—Ç–æ –≤—Ä–µ–º—è –ø–∏—â–µ–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ. –ú–æ–∂–Ω–æ –µ—Å—Ç—å –≤—Å—ë, –≤–∫–ª—é—á–∞—è –º—è—Å–æ –∏ —Å–ª–æ–∂–Ω—ã–µ –±–ª—é–¥–∞.',
                foods: [
                    { name: '–ú—è—Å–æ', details: '–ò–Ω–¥–µ–π–∫–∞, –∫—É—Ä–∏—Ü–∞, —É—Ç–∫–∞', icon: 'üçó' },
                    { name: '–†—ã–±–∞', details: '–õ—é–±–∞—è, –æ—Å–æ–±–µ–Ω–Ω–æ –∂–∏—Ä–Ω–∞—è', icon: 'üêü' },
                    { name: '–û–≤–æ—â–∏', details: '–°–∞–ª–∞—Ç—ã, –≥–∞—Ä–Ω–∏—Ä—ã', icon: 'ü•¨' },
                    { name: '–°—É–ø—ã', details: '–ö–æ—Å—Ç–Ω—ã–π –±—É–ª—å–æ–Ω, —â–∏, –±–æ—Ä—â', icon: 'üç≤' },
                    { name: '–ö—Ä—É–ø—ã', details: '–†–∏—Å, –≥—Ä–µ—á–∫–∞, –∫–∏–Ω–æ–∞', icon: 'üçö' },
                    { name: '–ë–æ–±–æ–≤—ã–µ', details: '–ß–µ—á–µ–≤–∏—Ü–∞, –Ω—É—Ç (—É–º–µ—Ä–µ–Ω–Ω–æ)', icon: 'ü´ò' }
                ],
                avoid: ['–î–µ—Å–µ—Ä—Ç—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –µ–¥—ã', '–°–ª–∞–¥–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏']
            },
            dinner: {
                title: '–£–∂–∏–Ω (18:00 - 19:00)',
                principle: '–õ—ë–≥–∫–∞—è –ø–∏—â–∞ ‚Äî –æ–≤–æ—â–∏ –∏ –º–æ–ª–æ—á–Ω–æ–µ',
                icon: 'üåô',
                description: '–í–µ—á–µ—Ä–æ–º –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ –∑–∞–º–µ–¥–ª—è–µ—Ç—Å—è. –õ—ë–≥–∫–∞—è –ø–∏—â–∞ –æ–±–µ—Å–ø–µ—á–∏—Ç —Å–ø–æ–∫–æ–π–Ω—ã–π —Å–æ–Ω –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ.',
                foods: [
                    { name: '–¢—É—à—ë–Ω—ã–µ –æ–≤–æ—â–∏', details: '–ö–∞–±–∞—á–∫–∏, –º–æ—Ä–∫–æ–≤—å, —Ç—ã–∫–≤–∞', icon: 'ü•ï' },
                    { name: '–¢–≤–æ—Ä–æ–≥', details: '5-9% –∂–∏—Ä–Ω–æ—Å—Ç–∏', icon: 'üßà' },
                    { name: '–ü—Ä–æ—Å—Ç–æ–∫–≤–∞—à–∞', details: '–ö–µ—Ñ–∏—Ä, —Ä—è–∂–µ–Ω–∫–∞, –π–æ–≥—É—Ä—Ç', icon: 'ü•õ' },
                    { name: '–ú—è–≥–∫–∏–π —Å—ã—Ä', details: '–ê–¥—ã–≥–µ–π—Å–∫–∏–π, –º–æ—Ü–∞—Ä–µ–ª–ª–∞, —Ä–∏–∫–æ—Ç—Ç–∞', icon: 'üßÄ' },
                    { name: '–û–≤–æ—â–Ω–æ–π —Å—É–ø', details: '–ë–µ–∑ –º—è—Å–∞, –ª—ë–≥–∫–∏–π', icon: 'üçµ' },
                    { name: '–°–∞–ª–∞—Ç', details: '–°–æ —Å–º–µ—Ç–∞–Ω–æ–π –∏–ª–∏ —Ç–æ–ø–ª—ë–Ω—ã–º –º–∞—Å–ª–æ–º', icon: 'ü•ó' }
                ],
                avoid: ['–ú—è—Å–æ (–¥–æ–ª–≥–æ –ø–µ—Ä–µ–≤–∞—Ä–∏–≤–∞–µ—Ç—Å—è)', '–§—Ä—É–∫—Ç—ã (–±—Ä–æ–∂–µ–Ω–∏–µ)', '–°–ª–∞–¥–∫–æ–µ']
            },
            excluded: {
                title: '‚õî –ò—Å–∫–ª—é—á–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é',
                items: [
                    { name: '–°–∞—Ö–∞—Ä', details: '–ë–µ–ª—ã–π, –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π, —Å–∏—Ä–æ–ø—ã', icon: 'üç¨' },
                    { name: '–ú—É—á–Ω–æ–µ', details: '–•–ª–µ–±, –º–∞–∫–∞—Ä–æ–Ω—ã, –≤—ã–ø–µ—á–∫–∞', icon: 'üçû' },
                    { name: '–†–∞—Å—Ç–∏—Ç. –º–∞—Å–ª–∞', details: '–ü–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ, –æ–ª–∏–≤–∫–æ–≤–æ–µ, —Ä–∞–ø—Å–æ–≤–æ–µ', icon: 'ü´í' },
                    { name: '–°–æ–∫–∏', details: '–î–∞–∂–µ —Å–≤–µ–∂–µ–≤—ã–∂–∞—Ç—ã–µ (–º–Ω–æ–≥–æ —Å–∞—Ö–∞—Ä–∞)', icon: 'üßÉ' },
                    { name: '–ì–∞–∑–∏—Ä–æ–≤–∫–∞', details: '–õ—é–±—ã–µ —Å–ª–∞–¥–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏', icon: 'ü•§' },
                    { name: '–§–∞—Å—Ç—Ñ—É–¥', details: '–¢—Ä–∞–Ω—Å–∂–∏—Ä—ã, –¥–æ–±–∞–≤–∫–∏', icon: 'üçü' },
                    { name: '–ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã', details: '–ö–æ–ª–±–∞—Å—ã, —Å–æ—Å–∏—Å–∫–∏', icon: 'üå≠' }
                ]
            },
            recommended_fats: {
                title: '‚úÖ –ü–æ–ª–µ–∑–Ω—ã–µ –∂–∏—Ä—ã',
                items: [
                    { name: '–¢–æ–ø–ª—ë–Ω–æ–µ –º–∞—Å–ª–æ', details: '–ì—Ö–∏ ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∂–∞—Ä–∫–∏', icon: 'üßà' },
                    { name: '–°–∞–ª–æ', details: '–°–æ–ª—ë–Ω–æ–µ, –∫–æ–ø—á—ë–Ω–æ–µ, –¥–ª—è –∂–∞—Ä–∫–∏', icon: 'ü•ì' },
                    { name: '–°–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ', details: '–ù–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ, 82%+ –∂–∏—Ä–Ω–æ—Å—Ç–∏', icon: 'üßà' },
                    { name: '–ñ–∏–≤–æ—Ç–Ω—ã–π –∂–∏—Ä', details: '–£—Ç–∏–Ω—ã–π, –≥—É—Å–∏–Ω—ã–π, –∫—É—Ä–∏–Ω—ã–π', icon: 'üçñ' },
                    { name: '–°–º–µ—Ç–∞–Ω–∞', details: '–î–ª—è –∑–∞–ø—Ä–∞–≤–∫–∏ —Å–∞–ª–∞—Ç–æ–≤', icon: 'ü•õ' }
                ]
            }
        };
        
        const TEMPERAMENT_NUTRITION = {
            sanguine: {
                title: '–°–∞–Ω–≥–≤–∏–Ω–∏–∫',
                icon: 'üåû',
                element: '–í–æ–∑–¥—É—Ö',
                tendency: '–ë—ã—Å—Ç—Ä—ã–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º, —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫—É—Å—ã–≤–∞—Ç—å',
                recommendations: [
                    '–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∏—ë–º—ã –ø–∏—â–∏ ‚Äî –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ –∑–∞–≤—Ç—Ä–∞–∫',
                    '–ë–æ–ª—å—à–µ –±–µ–ª–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏',
                    '–ò–∑–±–µ–≥–∞–π—Ç–µ –∫–æ—Ñ–µ ‚Äî –∏ –±–µ–∑ —Ç–æ–≥–æ –º–Ω–æ–≥–æ —ç–Ω–µ—Ä–≥–∏–∏',
                    '–¢—ë–ø–ª—ã–µ —Å—É–ø—ã –∏ –∫–∞—à–∏ –¥–ª—è –∑–∞–∑–µ–º–ª–µ–Ω–∏—è',
                    '–û—Ä–µ—Ö–∏ –≤–º–µ—Å—Ç–æ —Å–ª–∞–¥–∫–∏—Ö –ø–µ—Ä–µ–∫—É—Å–æ–≤'
                ],
                superfoods: ['–ì—Ä–µ—á–∫–∞', '–Ø–π—Ü–∞', '–ì—Ä–µ—Ü–∫–∏–µ –æ—Ä–µ—Ö–∏', '–¢—ã–∫–≤–∞'],
                avoid: ['–ú–Ω–æ–≥–æ –∫–æ—Ñ–µ–∏–Ω–∞', '–°–ª–∞–¥–∫–∏–µ —Å–Ω–µ–∫–∏', '–ï–¥–∞ –Ω–∞ –±–µ–≥—É']
            },
            choleric: {
                title: '–•–æ–ª–µ—Ä–∏–∫',
                icon: 'üî•',
                element: '–û–≥–æ–Ω—å',
                tendency: '–°–∏–ª—å–Ω–æ–µ –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ, —Ä–∏—Å–∫ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—è',
                recommendations: [
                    '–û—Ö–ª–∞–∂–¥–∞—é—â–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã ‚Äî –æ–≥—É—Ä—Ü—ã, –∫–∞–±–∞—á–∫–∏',
                    '–ú–µ–Ω—å—à–µ –æ—Å—Ç—Ä–æ–≥–æ –∏ –∂–∞—Ä–µ–Ω–æ–≥–æ',
                    '–ë–æ–ª—å—à–µ —Å—ã—Ä—ã—Ö –æ–≤–æ—â–µ–π –∏ —Å–∞–ª–∞—Ç–æ–≤',
                    '–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–æ–¥—ã ‚Äî –æ–≥–æ–Ω—å —Ç—Ä–µ–±—É–µ—Ç –≤–ª–∞–≥–∏',
                    '–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏—ë–º—ã –ø–∏—â–∏ ‚Äî –Ω–µ —Ç–æ—Ä–æ–ø–∏—Ç–µ—Å—å'
                ],
                superfoods: ['–û–≥—É—Ä—Ü—ã', '–ö–∞–±–∞—á–∫–∏', '–†—ã–±–∞', '–ô–æ–≥—É—Ä—Ç'],
                avoid: ['–û—Å—Ç—Ä–æ–µ', '–ê–ª–∫–æ–≥–æ–ª—å', '–ö—Ä–∞—Å–Ω–æ–µ –º—è—Å–æ –≤ –∏–∑–±—ã—Ç–∫–µ']
            },
            melancholic: {
                title: '–ú–µ–ª–∞–Ω—Ö–æ–ª–∏–∫',
                icon: 'üåô',
                element: '–ó–µ–º–ª—è',
                tendency: '–°–ª–∞–±–æ–µ –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
                recommendations: [
                    '–°–æ–≥—Ä–µ–≤–∞—é—â–∏–µ —Å–ø–µ—Ü–∏–∏ ‚Äî –∏–º–±–∏—Ä—å, –∫—É—Ä–∫—É–º–∞',
                    '–¢—ë–ø–ª–∞—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–∞—è –ø–∏—â–∞ (–Ω–µ —Å—ã—Ä–∞—è)',
                    '–ö–æ—Å—Ç–Ω—ã–µ –±—É–ª—å–æ–Ω—ã –¥–ª—è –ø–∏—Ç–∞–Ω–∏—è',
                    '–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∏—ë–º—ã ‚Äî –±–µ–∑ –≥–æ–ª–æ–¥–∞–Ω–∏—è',
                    '–§–µ—Ä–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è –º–∏–∫—Ä–æ–±–∏–æ–º–∞'
                ],
                superfoods: ['–ö–æ—Å—Ç–Ω—ã–π –±—É–ª—å–æ–Ω', '–¢—É—à—ë–Ω—ã–µ –æ–≤–æ—â–∏', '–ò–º–±–∏—Ä—å', '–ö–≤–∞—à–µ–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞'],
                avoid: ['–•–æ–ª–æ–¥–Ω–∞—è —Å—ã—Ä–∞—è –ø–∏—â–∞', '–ú–æ–ª–æ–∫–æ (–º–æ–∂–µ—Ç –ø–ª–æ—Ö–æ —É—Å–≤–∞–∏–≤–∞—Ç—å—Å—è)', '–°—É—Ö–∞—è –µ–¥–∞']
            },
            phlegmatic: {
                title: '–§–ª–µ–≥–º–∞—Ç–∏–∫',
                icon: 'üíß',
                element: '–í–æ–¥–∞',
                tendency: '–ú–µ–¥–ª–µ–Ω–Ω—ã–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º, –∑–∞–¥–µ—Ä–∂–∫–∞ –∂–∏–¥–∫–æ—Å—Ç–∏',
                recommendations: [
                    '–û—Å—Ç—Ä—ã–µ —Å–ø–µ—Ü–∏–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞',
                    '–õ—ë–≥–∫–∞—è –ø–∏—â–∞ ‚Äî –∏–∑–±–µ–≥–∞–π—Ç–µ —Ç—è–∂—ë–ª–æ–≥–æ',
                    '–ú–µ–Ω—å—à–µ –º–æ–ª–æ—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤',
                    '–ë–æ–ª—å—à–µ –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –µ–¥—ã',
                    '–ò–º–±–∏—Ä–Ω—ã–π —á–∞–π –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ'
                ],
                superfoods: ['–ò–º–±–∏—Ä—å', '–ü–µ—Ä–µ—Ü', '–õ—ë–≥–∫–∏–µ –æ–≤–æ—â–∏', '–ì–æ—Ä—å–∫–∏–µ —Ç—Ä–∞–≤—ã'],
                avoid: ['–ú–Ω–æ–≥–æ –º–æ–ª–æ—á–Ω–æ–≥–æ', '–°–ª–∞–¥–∫–æ–µ', '–ë–æ–ª—å—à–∏–µ –ø–æ—Ä—Ü–∏–∏']
            }
        };
        
        const WEEK_TRANSITION = [
            {
                day: 1,
                title: '–î–µ–Ω—å 1: –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ',
                focus: '–£–±–∏—Ä–∞–µ–º —Å–∞—Ö–∞—Ä –∏–∑ –Ω–∞–ø–∏—Ç–∫–æ–≤',
                tasks: [
                    '–ü–µ–π—Ç–µ —á–∞–π –∏ –∫–æ—Ñ–µ –±–µ–∑ —Å–∞—Ö–∞—Ä–∞',
                    '–ó–∞–º–µ–Ω–∏—Ç–µ —Å–æ–∫–∏ –Ω–∞ –≤–æ–¥—É —Å –ª–∏–º–æ–Ω–æ–º',
                    '–ó–∞–≤—Ç—Ä–∞–∫: –¥–æ–±–∞–≤—å—Ç–µ 2 —è–π—Ü–∞ –∫ –æ–±—ã—á–Ω–æ–º—É —Ä–∞—Ü–∏–æ–Ω—É'
                ],
                tip: '–≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —à–∞–≥. –°–∞—Ö–∞—Ä –≤ –Ω–∞–ø–∏—Ç–∫–∞—Ö ‚Äî –ø—É—Å—Ç—ã–µ –∫–∞–ª–æ—Ä–∏–∏.',
                motivation: '–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å ‚Äî —É–∂–µ –ø–æ–±–µ–¥–∞! –¢–µ–ª–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è.'
            },
            {
                day: 2,
                title: '–î–µ–Ω—å 2: –ó–∞–≤—Ç—Ä–∞–∫',
                focus: '–ë–µ–ª–∫–æ–≤—ã–π –∑–∞–≤—Ç—Ä–∞–∫',
                tasks: [
                    '–ó–∞–≤—Ç—Ä–∞–∫: —è–π—Ü–∞ –Ω–∞ —Å–∞–ª–µ –∏–ª–∏ —Ç–æ–ø–ª—ë–Ω–æ–º –º–∞—Å–ª–µ + —Å—ã—Ä',
                    '–ë–µ–∑ —Ö–ª–µ–±–∞ –∏ —Å–ª–∞–¥–∫–æ–≥–æ —É—Ç—Ä–æ–º',
                    '–î–æ–±–∞–≤—å—Ç–µ –≥–æ—Ä—Å—Ç—å –æ—Ä–µ—Ö–æ–≤'
                ],
                tip: '–ë–µ–ª–æ–∫ —É—Ç—Ä–æ–º = —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è –¥–æ –æ–±–µ–¥–∞ –±–µ–∑ –ø–µ—Ä–µ–∫—É—Å–æ–≤.',
                motivation: '–£–∂–µ –≤—Ç–æ—Ä–æ–π –¥–µ–Ω—å! –ó–∞–º–µ—Ç—å—Ç–µ, –∫–∞–∫ –º–µ–Ω—å—à–µ —Ö–æ—á–µ—Ç—Å—è —Å–ª–∞–¥–∫–æ–≥–æ –∫ –æ–±–µ–¥—É.'
            },
            {
                day: 3,
                title: '–î–µ–Ω—å 3: –û–±–µ–¥',
                focus: '–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –æ–±–µ–¥ 12-14',
                tasks: [
                    '–û–±–µ–¥ —Å—Ç—Ä–æ–≥–æ –≤ 12:00-14:00',
                    '–ú—è—Å–æ/—Ä—ã–±–∞ + –æ–≤–æ—â–∏ + –∫—Ä—É–ø–∞',
                    '–ë–µ–∑ –¥–µ—Å–µ—Ä—Ç–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –µ–¥—ã'
                ],
                tip: '–í —ç—Ç–æ –≤—Ä–µ–º—è –ø–∏—â–µ–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–µ—Ä–º–µ–Ω—Ç—ã –Ω–∞ –ø–∏–∫–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.',
                motivation: '–¢—Ä–∏ –¥–Ω—è! –¢–µ–ª–æ —É–∂–µ –Ω–∞—á–∏–Ω–∞–µ—Ç –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –≤–∞—Å.'
            },
            {
                day: 4,
                title: '–î–µ–Ω—å 4: –£–∂–∏–Ω',
                focus: '–õ—ë–≥–∫–∏–π —É–∂–∏–Ω –¥–æ 19:00',
                tasks: [
                    '–£–∂–∏–Ω: —Ç—É—à—ë–Ω—ã–µ –æ–≤–æ—â–∏ + —Ç–≤–æ—Ä–æ–≥/–ø—Ä–æ—Å—Ç–æ–∫–≤–∞—à–∞',
                    '–ë–µ–∑ –º—è—Å–∞ –≤–µ—á–µ—Ä–æ–º',
                    '–£–∂–∏–Ω –∑–∞ 3 —á–∞—Å–∞ –¥–æ —Å–Ω–∞'
                ],
                tip: '–õ—ë–≥–∫–∏–π —É–∂–∏–Ω = –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–æ–Ω = –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ.',
                motivation: '–ß–µ—Ç—ã—Ä–µ –¥–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è! –°–æ–Ω –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å –≥–ª—É–±–∂–µ.'
            },
            {
                day: 5,
                title: '–î–µ–Ω—å 5: –£–±–∏—Ä–∞–µ–º –º—É—á–Ω–æ–µ',
                focus: '–î–µ–Ω—å –±–µ–∑ —Ö–ª–µ–±–∞ –∏ –º–∞–∫–∞—Ä–æ–Ω',
                tasks: [
                    '–ó–∞–º–µ–Ω–∏—Ç–µ —Ö–ª–µ–± –Ω–∞ –æ–≤–æ—â–∏',
                    '–í–º–µ—Å—Ç–æ –º–∞–∫–∞—Ä–æ–Ω ‚Äî –≥—Ä–µ—á–∫–∞ –∏–ª–∏ —Ä–∏—Å',
                    '–ï—Å–ª–∏ –æ—á–µ–Ω—å —Ö–æ—á–µ—Ç—Å—è ‚Äî —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π —Ö–ª–µ–±–µ—Ü'
                ],
                tip: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—à–µ–Ω–∏—Ü–∞ ‚Äî –Ω–µ —Ç–∞, —á—Ç–æ –µ–ª–∏ –Ω–∞—à–∏ –ø—Ä–µ–¥–∫–∏. –û—Ä–≥–∞–Ω–∏–∑–º –µ—ë –ø–ª–æ—Ö–æ –ø–µ—Ä–µ–≤–∞—Ä–∏–≤–∞–µ—Ç.',
                motivation: '–ü—è—Ç—å –¥–Ω–µ–π! –í—ã —É–∂–µ –Ω–∞ –ø–æ–ª–ø—É—Ç–∏ –∫ –Ω–æ–≤–æ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏.'
            },
            {
                day: 6,
                title: '–î–µ–Ω—å 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è',
                focus: '–°–æ–±–∏—Ä–∞–µ–º –≤—Å—ë –≤–º–µ—Å—Ç–µ',
                tasks: [
                    '–£—Ç—Ä–æ: –±–µ–ª–æ–∫ + –∂–∏—Ä—ã + —Å–ª–æ–∂–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã',
                    '–û–±–µ–¥ 12-14: –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø—Ä–∏—ë–º –ø–∏—â–∏',
                    '–£–∂–∏–Ω: –æ–≤–æ—â–∏ + –º–æ–ª–æ—á–Ω–æ–µ'
                ],
                tip: '–°–µ–≥–æ–¥–Ω—è –ø—Ä–∞–∫—Ç–∏–∫—É–µ–º –≤–µ—Å—å —Ü–∏–∫–ª. –ü—Ä–∏—Å–ª—É—à–∏–≤–∞–π—Ç–µ—Å—å –∫ —Ç–µ–ª—É.',
                motivation: '–®–µ—Å—Ç—å –¥–Ω–µ–π! –¢–µ–ª–æ —É–∂–µ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤—ã–π —Ä–µ–∂–∏–º.'
            },
            {
                day: 7,
                title: '–î–µ–Ω—å 7: –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ',
                focus: '–ù–æ–≤–∞—è –Ω–æ—Ä–º–∞',
                tasks: [
                    '–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤—á–µ—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å',
                    '–ó–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ –æ—â—É—â–µ–Ω–∏—è',
                    '–û—Ç–º–µ—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —ç–Ω–µ—Ä–≥–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏'
                ],
                tip: '–ù–µ–¥–µ–ª—è ‚Äî —ç—Ç–æ –Ω–∞—á–∞–ª–æ. –î–ª—è —É—Å—Ç–æ–π—á–∏–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω—É–∂–µ–Ω 21 –¥–µ–Ω—å.',
                motivation: 'üéâ –ù–µ–¥–µ–ª—è –ø–æ–∑–∞–¥–∏! –í—ã –∑–∞–ª–æ–∂–∏–ª–∏ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –∑–¥–æ—Ä–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è.'
            }
        ];
        
        const NUTRITION_ACHIEVEMENTS = [
            { id: 'first_day', name: '–ü–µ—Ä–≤—ã–π —à–∞–≥', icon: 'üå±', description: '–ù–∞—á–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–∏—Ç–∞–Ω–∏—è', condition: (d) => d >= 1 },
            { id: 'three_days', name: '–¢—Ä–∏ –¥–Ω—è —Å–∏–ª—ã', icon: 'üí™', description: '3 –¥–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è', condition: (d) => d >= 3 },
            { id: 'week_complete', name: '–ù–µ–¥–µ–ª—è –∑–¥–æ—Ä–æ–≤—å—è', icon: 'üèÜ', description: '–ó–∞–≤–µ—Ä—à–∏—Ç—å 7-–¥–Ω–µ–≤–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É', condition: (d) => d >= 7 },
            { id: 'two_weeks', name: '–î–≤–µ –Ω–µ–¥–µ–ª–∏', icon: '‚≠ê', description: '14 –¥–Ω–µ–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è', condition: (d) => d >= 14 },
            { id: 'habit_formed', name: '–ü—Ä–∏–≤—ã—á–∫–∞', icon: 'üéØ', description: '21 –¥–µ–Ω—å ‚Äî –ø—Ä–∏–≤—ã—á–∫–∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞', condition: (d) => d >= 21 }
        ];
        
        const NUTRITION_EXAMPLES = {
            success: [
                '–ê–Ω–Ω–∞, 34 –≥–æ–¥–∞: ¬´–ü–æ—Å–ª–µ –Ω–µ–¥–µ–ª–∏ –±–µ–∑ —Å–∞—Ö–∞—Ä–∞ –≥–æ–ª–æ–≤–Ω—ã–µ –±–æ–ª–∏ –ø—Ä–æ—à–ª–∏, —ç–Ω–µ—Ä–≥–∏–∏ —Å—Ç–∞–ª–æ –±–æ–ª—å—à–µ¬ª',
                '–ú–∏—Ö–∞–∏–ª, 42 –≥–æ–¥–∞: ¬´–ë–µ–ª–∫–æ–≤—ã–π –∑–∞–≤—Ç—Ä–∞–∫ ‚Äî —ç—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ. –î–æ –æ–±–µ–¥–∞ –Ω–µ –¥—É–º–∞—é –æ –µ–¥–µ¬ª',
                '–ï–ª–µ–Ω–∞, 28 –ª–µ—Ç: ¬´–¢—É—à—ë–Ω—ã–µ –æ–≤–æ—â–∏ –Ω–∞ —É–∂–∏–Ω ‚Äî —Å–ø–ª—é –∫–∞–∫ –º–ª–∞–¥–µ–Ω–µ—Ü¬ª',
                '–î–º–∏—Ç—Ä–∏–π, 45 –ª–µ—Ç: ¬´–ó–∞ –º–µ—Å—è—Ü –º–∏–Ω—É—Å 5 –∫–≥ –±–µ–∑ –¥–∏–µ—Ç, –ø—Ä–æ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∂–∏–º¬ª',
                '–û–ª—å–≥–∞, 38 –ª–µ—Ç: ¬´–î–µ–ø—Ä–µ—Å—Å–∏—è –æ—Ç—Å—Ç—É–ø–∏–ª–∞, –∫–æ–≥–¥–∞ –Ω–∞–ª–∞–¥–∏–ª–∞ –ø–∏—Ç–∞–Ω–∏–µ. –°–≤—è–∑—å –æ—á–µ–≤–∏–¥–Ω–∞¬ª'
            ],
            motivation: [
                '–ï–¥–∞ ‚Äî —ç—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ç–µ–ª–∞. –ö–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ?',
                '–í—ã –Ω–µ —Ç–æ, —á—Ç–æ –≤—ã –µ–¥–∏—Ç–µ. –í—ã —Ç–æ, —á—Ç–æ –≤—ã —É—Å–≤–∞–∏–≤–∞–µ—Ç–µ.',
                '–ö–∞–∂–¥—ã–π –ø—Ä–∏—ë–º –ø–∏—â–∏ ‚Äî —ç—Ç–æ –≤—ã–±–æ—Ä. –í—ã–±–∏—Ä–∞–π—Ç–µ –∂–∏–∑–Ω—å.',
                '–¢–µ–ª–æ ‚Äî –≤–∞—à –¥–æ–º. –ò–∑ —á–µ–≥–æ –≤—ã –µ–≥–æ —Å—Ç—Ä–æ–∏—Ç–µ?',
                '–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ ‚Äî –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, –∞ –∑–∞–±–æ—Ç–∞ –æ —Å–µ–±–µ.'
            ]
        };
        
        // –†–µ—Ü–µ–ø—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        const DEFAULT_RECIPES = [
            {
                id: 'soup_chicken_cabbage',
                isDefault: true,
                title: 'üç≤ –°—É–ø –∏–∑ –¥–æ–º–∞—à–Ω–µ–π –ø—Ç–∏—Ü—ã —Å –∫–∞–ø—É—Å—Ç–æ–π',
                category: 'soup',
                cookTime: '6-7 —á–∞—Å–æ–≤',
                servings: '6-8 –ø–æ—Ä—Ü–∏–π',
                description: '–ù–∞–≤–∞—Ä–∏—Å—Ç—ã–π —Ü–µ–ª–µ–±–Ω—ã–π —Å—É–ø –Ω–∞ –∫–æ—Å—Ç–Ω–æ–º –±—É–ª—å–æ–Ω–µ —Å –∫–≤–∞—à–µ–Ω–æ–π –∫–∞–ø—É—Å—Ç–æ–π –∏ –∑–µ–ª–µ–Ω—å—é',
                ingredients: [
                    'üçó –î–æ–º–∞—à–Ω—è—è –∫—É—Ä–∏—Ü–∞ –∏–ª–∏ –∏–Ω–¥–µ–π–∫–∞ (–≥–æ–ª–µ–Ω—å, –ø–ª–µ—á–æ, —à–µ—è) ‚Äî –Ω–∞ –∫–æ—Å—Ç–∏',
                    'ü•¨ –ö–≤–∞—à–µ–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞ —Å –∫–ª—é–∫–≤–æ–π –∏–ª–∏ —Å–≤–µ–∂–∞—è –∫–∞–ø—É—Å—Ç–∞',
                    'ü•ï –ú–æ—Ä–∫–æ–≤—å ‚Äî 2-3 —à—Ç.',
                    'üßÖ –õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π ‚Äî 2 —à—Ç.',
                    'ü´ë –ë–æ–ª–≥–∞—Ä—Å–∫–∏–π –ø–µ—Ä–µ—Ü ‚Äî 1-2 —à—Ç.',
                    'üçÖ –ü–æ–º–∏–¥–æ—Ä ‚Äî 1-2 —à—Ç.',
                    'ü•í –°–æ–ª—ë–Ω—ã–µ –æ–≥—É—Ä—Ü—ã ‚Äî 2-3 —à—Ç.',
                    'üåø –ó–µ–ª–µ–Ω—å —Å–≤–µ–∂–∞—è (—É–∫—Ä–æ–ø, –ø–µ—Ç—Ä—É—à–∫–∞)',
                    'üåø –°–Ω—ã—Ç—å —Å—É—à—ë–Ω–∞—è ‚Äî 1 —Å—Ç.–ª.',
                    'üçã –Ø–±–ª–æ—á–Ω—ã–π —É–∫—Å—É—Å –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –∏–ª–∏ –ª–∏–º–æ–Ω',
                    'üåø –õ–∞–≤—Ä–æ–≤—ã–π –ª–∏—Å—Ç ‚Äî 2-3 —à—Ç.',
                    '‚ö´ –ß—ë—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü –≥–æ—Ä–æ—à–∫–æ–º ‚Äî 5-7 —à—Ç.',
                    'üßÇ –°–æ–ª—å –ø–æ –≤–∫—É—Å—É'
                ],
                steps: [
                    {
                        title: '–í–∞—Ä–∏–º –±—É–ª—å–æ–Ω',
                        text: '–î–æ–º–∞—à–Ω—é—é –∫—É—Ä–∏—Ü—É –∏–ª–∏ –∏–Ω–¥–µ–π–∫—É (–Ω–∞ –∫–æ—Å—Ç–∏ ‚Äî –≥–æ–ª–µ–Ω—å, –ø–ª–µ—á–æ –∏ —à–µ—è) –æ—Ç–≤–∞—Ä–∏–≤–∞–µ–º 5-6 —á–∞—Å–æ–≤ –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–º –æ–≥–Ω–µ. –≠—Ç–æ –¥–∞—ë—Ç –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π –∫–æ—Å—Ç–Ω—ã–π –±—É–ª—å–æ–Ω, –±–æ–≥–∞—Ç—ã–π –∫–æ–ª–ª–∞–≥–µ–Ω–æ–º.',
                        time: '5-6 —á–∞—Å–æ–≤'
                    },
                    {
                        title: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º—è—Å–∞',
                        text: '–í—ã–Ω–∏–º–∞–µ–º –º—è—Å–æ –∏–∑ –±—É–ª—å–æ–Ω–∞ –∏ –æ—Å—Ç—É–∂–∞–µ–º. –û—Ç–¥–µ–ª—è–µ–º –æ—Ç –∫–æ—Å—Ç–µ–π –∏ –Ω–∞—Ä–µ–∑–∞–µ–º –ø–æ—Ä—Ü–∏–æ–Ω–Ω—ã–º–∏ –∫—É—Å–æ—á–∫–∞–º–∏.',
                        time: '15 –º–∏–Ω'
                    },
                    {
                        title: '–î–æ–±–∞–≤–ª—è–µ–º –æ–≤–æ—â–∏',
                        text: '–í –∫–∏–ø—è—â–∏–π –±—É–ª—å–æ–Ω –¥–æ–±–∞–≤–ª—è–µ–º: –∫–≤–∞—à–µ–Ω—É—é –∫–∞–ø—É—Å—Ç—É —Å –∫–ª—é–∫–≤–æ–π (–∏–ª–∏ –Ω–∞—à–∏–Ω–∫–æ–≤–∞–Ω–Ω—É—é —Å–≤–µ–∂—É—é), –º–æ—Ä–∫–æ–≤—å –Ω–∞ –∫—Ä—É–ø–Ω–æ–π —Ç—ë—Ä–∫–µ, –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–π –ª—É–∫, –±–æ–ª–≥–∞—Ä—Å–∫–∏–π –ø–µ—Ä–µ—Ü –∏ –ø–æ–º–∏–¥–æ—Ä.',
                        time: '5 –º–∏–Ω'
                    },
                    {
                        title: '–°–ø–µ—Ü–∏–∏',
                        text: '–î–æ–±–∞–≤–ª—è–µ–º –ª–∞–≤—Ä–æ–≤—ã–π –ª–∏—Å—Ç –∏ —á—ë—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü –≥–æ—Ä–æ—à–∫–æ–º.',
                        time: '1 –º–∏–Ω'
                    },
                    {
                        title: '–í–∞—Ä–∏–º –æ–≤–æ—â–∏',
                        text: '–í–∞—Ä–∏–º –Ω–∞ —Å—Ä–µ–¥–Ω–µ–º –æ–≥–Ω–µ –æ–∫–æ–ª–æ 30 –º–∏–Ω—É—Ç –¥–æ –º—è–≥–∫–æ—Å—Ç–∏ –æ–≤–æ—â–µ–π.',
                        time: '30 –º–∏–Ω'
                    },
                    {
                        title: '–§–∏–Ω–∞–ª—å–Ω—ã–µ —à—Ç—Ä–∏—Ö–∏',
                        text: '–í –∫–æ–Ω—Ü–µ –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ—Ä—É–±–ª–µ–Ω–Ω—É—é —Å–≤–µ–∂—É—é –∑–µ–ª–µ–Ω—å, —Å—É—à—ë–Ω—É—é —Å–Ω—ã—Ç—å –∏ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–µ —Å–æ–ª—ë–Ω—ã–µ –æ–≥—É—Ä—Ü—ã.',
                        time: '2 –º–∏–Ω'
                    },
                    {
                        title: '–ú—è—Å–æ –∏ –∫–∏—Å–ª–∏–Ω–∫–∞',
                        text: '–í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ—Ä–µ–∑–∞–Ω–Ω–æ–µ –º—è—Å–æ –≤ —Å—É–ø. –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —è–±–ª–æ—á–Ω—ã–π —É–∫—Å—É—Å –∏–ª–∏ —Å–æ–∫ –ª–∏–º–æ–Ω–∞ –ø–æ –≤–∫—É—Å—É –¥–ª—è –ø—Ä–∏—è—Ç–Ω–æ–π –∫–∏—Å–ª–∏–Ω–∫–∏.',
                        time: '2 –º–∏–Ω'
                    }
                ],
                tips: [
                    'üí° –ö–æ—Å—Ç–Ω—ã–π –±—É–ª—å–æ–Ω ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–ª–ª–∞–≥–µ–Ω–∞, –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Å—É—Å—Ç–∞–≤–æ–≤ –∏ –∫–æ–∂–∏',
                    'üí° –ö–≤–∞—à–µ–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞ ‚Äî –ø—Ä–æ–±–∏–æ—Ç–∏–∫, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∏–∫—Ä–æ–±–∏–æ–º',
                    'üí° –°–Ω—ã—Ç—å ‚Äî —Ä—É—Å—Å–∫–∏–π —Å—É–ø–µ—Ä—Ñ—É–¥, –±–æ–≥–∞—Ç –≤–∏—Ç–∞–º–∏–Ω–∞–º–∏',
                    'üí° –°—É–ø –µ—â—ë –≤–∫—É—Å–Ω–µ–µ –Ω–∞ –≤—Ç–æ—Ä–æ–π –¥–µ–Ω—å!'
                ],
                temperaments: ['melancholic', 'phlegmatic', 'sanguine', 'choleric']
            }
        ];

        const CRISIS_LINES = [
            { name: '–¢–µ–ª–µ—Ñ–æ–Ω –¥–æ–≤–µ—Ä–∏—è', phone: '8-800-2000-122', note: '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ' },
            { name: '–¶–µ–Ω—Ç—Ä —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–º–æ—â–∏ –ú–ß–°', phone: '8-499-216-50-50', note: '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ' },
            { name: '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å (–ú–æ—Å–∫–≤–∞)', phone: '051', note: '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ —Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ' },
            { name: '–ü–æ–º–æ—â—å –ø—Ä–∏ —Å—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã—Ö –º—ã—Å–ª—è—Ö', phone: '8-800-2000-122', note: '–ê–Ω–æ–Ω–∏–º–Ω–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ' }
        ];
        
        // PHQ-9 –æ–ø—Ä–æ—Å–Ω–∏–∫
        const PHQ9_QUESTIONS = [
            '–ú–∞–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∏–ª–∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è –æ—Ç –¥–µ–ª',
            '–ü–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å, —Ç–æ—Å–∫–∞, –±–µ–∑–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å',
            '–ü—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–Ω–æ–º (–±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞ –∏–ª–∏ —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å)',
            '–£—Å—Ç–∞–ª–æ—Å—Ç—å, —É–ø–∞–¥–æ–∫ —Å–∏–ª',
            '–ü–ª–æ—Ö–æ–π –∞–ø–ø–µ—Ç–∏—Ç –∏–ª–∏ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏–µ',
            '–ü–ª–æ—Ö–æ–µ –º–Ω–µ–Ω–∏–µ –æ —Å–µ–±–µ, —á—É–≤—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω–∏–∫–∞',
            '–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è (—á–∏—Ç–∞—Ç—å, —Å–º–æ—Ç—Ä–µ—Ç—å –¢–í)',
            '–ó–∞–º–µ–¥–ª–µ–Ω–Ω–æ—Å—Ç—å –∏–ª–∏ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –≤ –¥–≤–∏–∂–µ–Ω–∏—è—Ö',
            '–ú—ã—Å–ª–∏ –æ —Ç–æ–º, —á—Ç–æ –ª—É—á—à–µ –±—ã —É–º–µ—Ä–µ—Ç—å'
        ];
        
        const PHQ9_OPTIONS = [
            { label: '–°–æ–≤—Å–µ–º –Ω–µ—Ç', value: 0 },
            { label: '–ù–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π', value: 1 },
            { label: '–ë–æ–ª—å—à–µ –ø–æ–ª–æ–≤–∏–Ω—ã –¥–Ω–µ–π', value: 2 },
            { label: '–ü–æ—á—Ç–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å', value: 3 }
        ];

        const QUOTES = [
            { text: '–°–≤–µ—Ç ‚Äî —ç—Ç–æ –∂–∏–∑–Ω—å, –∏ –∂–∏–∑–Ω—å ‚Äî —ç—Ç–æ —Å–≤–µ—Ç', author: '–û–ª–∞—Ñ –ö–æ–æ–±' },
            { text: '–¢–µ–ø–ª–æ —Ä–∞–∑–º—è–≥—á–∞–µ—Ç –∑–∞—Ç–≤–µ—Ä–¥–µ–≤—à–µ–µ', author: '–û–ª–∞—Ñ –ö–æ–æ–±' },
            { text: '–ñ—ë–ª—Ç—ã–π ‚Äî –±–ª–∏–∂–∞–π—à–∏–π –∫ —Å–≤–µ—Ç—É —Ü–≤–µ—Ç', author: '–ò.–í. –ì—ë—Ç–µ' },
            { text: '–°–∞–º–∞—è —Ç—ë–º–Ω–∞—è –Ω–æ—á—å ‚Äî –ø–µ—Ä–µ–¥ —Ä–∞—Å—Å–≤–µ—Ç–æ–º', author: '–ù–∞—Ä–æ–¥–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å' },
            { text: '–ü—Ä–∏—Ä–æ–¥–∞ ‚Äî –≤–µ–ª–∏–∫–∏–π —Ü–µ–ª–∏—Ç–µ–ª—å', author: '–ì–∏–ø–ø–æ–∫—Ä–∞—Ç' },
            // –ù–∏—Å–∞—Ä–≥–∞–¥–∞—Ç—Ç–∞ –ú–∞—Ö–∞—Ä–∞–¥–∂
            { text: '–ö–æ–≥–¥–∞ –≤—Å—ë —Ç–µ—Ä—è–µ—Ç —Å–º—ã—Å–ª ‚Äî —Ç—ã –±–ª–∏–∑–æ–∫ –∫ –∏—Å—Ç–∏–Ω–µ. –°–º—ã—Å–ª ‚Äî —ç—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —É–º–∞', author: '–ù–∏—Å–∞—Ä–≥–∞–¥–∞—Ç—Ç–∞ –ú–∞—Ö–∞—Ä–∞–¥–∂' },
            { text: '–°—Ç—Ä–∞–¥–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –ø—Ä–∏–∑—ã–≤ –∫ –≤–Ω–∏–º–∞–Ω–∏—é. –û–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Ç—ã –Ω–∞ –ª–æ–∂–Ω–æ–º –ø—É—Ç–∏', author: '–ù–∏—Å–∞—Ä–≥–∞–¥–∞—Ç—Ç–∞ –ú–∞—Ö–∞—Ä–∞–¥–∂' },
            { text: '–î–µ–ø—Ä–µ—Å—Å–∏—è ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç—ã —É—Å—Ç–∞–ª –±—ã—Ç—å —Ç–µ–º, –∫–µ–º –Ω–µ —è–≤–ª—è–µ—à—å—Å—è', author: '–ù–∏—Å–∞—Ä–≥–∞–¥–∞—Ç—Ç–∞ –ú–∞—Ö–∞—Ä–∞–¥–∂' },
            { text: '–ú—É–¥—Ä–æ—Å—Ç—å –ø—Ä–∏—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞–¥–∞–Ω–∏–µ. –ë–µ–∑ –Ω–µ–≥–æ –º—ã –æ—Å—Ç–∞—ë–º—Å—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–º–∏', author: '–ù–∏—Å–∞—Ä–≥–∞–¥–∞—Ç—Ç–∞ –ú–∞—Ö–∞—Ä–∞–¥–∂' },
            { text: '–û—Ç—á–∞—è–Ω–∏–µ —Ä–∞–∑—Ä—É—à–∞–µ—Ç –ª–æ–∂–Ω—ã–µ –Ω–∞–¥–µ–∂–¥—ã. –≠—Ç–æ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ', author: '–ù–∏—Å–∞—Ä–≥–∞–¥–∞—Ç—Ç–∞ –ú–∞—Ö–∞—Ä–∞–¥–∂' },
            // –ö–∞—Ä–ª –†–µ–Ω—Ç—Ü
            { text: '–î–µ–ø—Ä–µ—Å—Å–∏—è ‚Äî —ç—Ç–æ —á–µ—Å—Ç–Ω–æ—Å—Ç—å. –¢—ã –±–æ–ª—å—à–µ –Ω–µ –º–æ–∂–µ—à—å –ø—Ä–∏—Ç–≤–æ—Ä—è—Ç—å—Å—è —Å—á–∞—Å—Ç–ª–∏–≤—ã–º', author: '–ö–∞—Ä–ª –†–µ–Ω—Ç—Ü' },
            { text: '–¢—å–º–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–≤–µ—Ç, –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã –µ—â—ë –Ω–µ —É–≤–∏–¥–µ–ª', author: '–ö–∞—Ä–ª –†–µ–Ω—Ç—Ü' },
            { text: '–ö–æ–≥–¥–∞ –∏–ª–ª—é–∑–∏–∏ —Ä—É—à–∞—Ç—Å—è ‚Äî –±–æ–ª—å–Ω–æ. –ù–æ —ç—Ç–æ –±–æ–ª—å –∏—Å—Ü–µ–ª–µ–Ω–∏—è', author: '–ö–∞—Ä–ª –†–µ–Ω—Ç—Ü' },
            { text: '–¢—ã –Ω–µ –º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ —Å–µ–±—è. –¢—ã –º–æ–∂–µ—à—å —Ç–æ–ª—å–∫–æ –ø–æ—Ç–µ—Ä—è—Ç—å –≤—Å—ë, —á—Ç–æ –Ω–µ —Ç—ã', author: '–ö–∞—Ä–ª –†–µ–Ω—Ç—Ü' },
            { text: '–î–µ–ø—Ä–µ—Å—Å–∏—è ‚Äî –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –±–µ–≥—Å—Ç–≤–æ –æ—Ç —Å–µ–±—è', author: '–ö–∞—Ä–ª –†–µ–Ω—Ç—Ü' },
            // –û—à–æ
            { text: '–î–µ–ø—Ä–µ—Å—Å–∏—è –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç—ã –ø–æ–¥–∞–≤–ª—è–ª —á—Ç–æ-—Ç–æ. –ü–æ–∑–≤–æ–ª—å —ç—Ç–æ–º—É –ø—Ä–æ—è–≤–∏—Ç—å—Å—è', author: '–û—à–æ' },
            { text: '–¢—å–º–∞ ‚Äî —ç—Ç–æ –Ω–µ –≤—Ä–∞–≥ —Å–≤–µ—Ç–∞. –¢—å–º–∞ ‚Äî —ç—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤–µ—Ç–∞. –°—Ç–∞–Ω—å —Å–≤–µ—Ç–æ–º', author: '–û—à–æ' },
            { text: '–ü–µ—á–∞–ª—å –∏–º–µ–µ—Ç –≥–ª—É–±–∏–Ω—É, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç —É —Å—á–∞—Å—Ç—å—è. –ß–µ—Ä–µ–∑ –ø–µ—á–∞–ª—å —Ç—ã —Ä–∞—Å—Ç—ë—à—å', author: '–û—à–æ' },
            { text: '–°—Ç—Ä–∞–¥–∞–Ω–∏–µ ‚Äî —ç—Ç–æ —Å–∏–≥–Ω–∞–ª —Ç—Ä–µ–≤–æ–≥–∏. –ß—Ç–æ-—Ç–æ –≤ –∂–∏–∑–Ω–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å', author: '–û—à–æ' },
            { text: '–í –¥–µ–ø—Ä–µ—Å—Å–∏–∏ —Ç—ã –±–ª–∏–∂–µ –∫ —Å–µ–±–µ, —á–µ–º –∫–æ–≥–¥–∞ —Ç—ã ¬´—Å—á–∞—Å—Ç–ª–∏–≤¬ª –ø–æ —á—É–∂–∏–º –ø—Ä–∞–≤–∏–ª–∞–º', author: '–û—à–æ' },
            // –≠–∫—Ö–∞—Ä—Ç –¢–æ–ª–ª–µ
            { text: '–î–µ–ø—Ä–µ—Å—Å–∏—è ‚Äî –Ω–µ–ø—Ä–∏–Ω—è—Ç–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –µ—Å—Ç—å. –ü—Ä–∏–º–∏ –º–æ–º–µ–Ω—Ç ‚Äî –∏ —Å—Ç—Ä–∞–¥–∞–Ω–∏–µ –æ—Å–ª–∞–±–Ω–µ—Ç', author: '–≠–∫—Ö–∞—Ä—Ç –¢–æ–ª–ª–µ' },
            { text: '–ë–æ–ª—å –Ω–µ–∏–∑–±–µ–∂–Ω–∞. –°—Ç—Ä–∞–¥–∞–Ω–∏–µ ‚Äî –≤—ã–±–æ—Ä. –í—ã–±–µ—Ä–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ', author: '–≠–∫—Ö–∞—Ä—Ç –¢–æ–ª–ª–µ' },
            { text: '–°–∞–º–æ–µ —Ç—ë–º–Ω–æ–µ –≤—Ä–µ–º—è ‚Äî –ø–µ—Ä–µ–¥ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ–º. –¢—å–º–∞ –≤—ã—Ç–∞–ª–∫–∏–≤–∞–µ—Ç —Ç–µ–±—è –∫ —Å–≤–µ—Ç—É', author: '–≠–∫—Ö–∞—Ä—Ç –¢–æ–ª–ª–µ' },
            // –†—É–º–∏
            { text: '–†–∞–Ω–∞ ‚Äî —ç—Ç–æ –º–µ—Å—Ç–æ, –∫—É–¥–∞ –≤—Ö–æ–¥–∏—Ç —Å–≤–µ—Ç', author: '–†—É–º–∏' },
            { text: '–ü–µ—á–∞–ª—å –≤—Å–ø–∞—Ö–∏–≤–∞–µ—Ç —Ç–≤–æ—ë —Å–µ—Ä–¥—Ü–µ. –¢–∞–∫ –æ–Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ø–æ—Å–æ–±–Ω—ã–º –≤–º–µ—Å—Ç–∏—Ç—å –±–æ–ª—å—à–µ —Ä–∞–¥–æ—Å—Ç–∏', author: '–†—É–º–∏' },
            { text: '–ù–µ –æ—Ç–≤–æ—Ä–∞—á–∏–≤–∞–π—Å—è –æ—Ç —Ç—å–º—ã. –ü–æ–≤–µ—Ä–Ω–∏—Å—å –∫ –Ω–µ–π ‚Äî –∏ –æ–Ω–∞ —Å—Ç–∞–Ω–µ—Ç —Å–≤–µ—Ç–æ–º', author: '–†—É–º–∏' },
            // –ü–µ–º–∞ –ß–æ–¥—Ä–æ–Ω
            { text: '–û—â—É—â–µ–Ω–∏–µ –±–µ–∑–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ ‚Äî —Ö–æ—Ä–æ—à–µ–µ –º–µ—Å—Ç–æ –¥–ª—è –Ω–∞—á–∞–ª–∞. –û—Ç—Å—é–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ –≤—Å—ë', author: '–ü–µ–º–∞ –ß–æ–¥—Ä–æ–Ω' },
            { text: '–ë–æ–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –º–µ—Å—Ç–∞, –≥–¥–µ —Å–µ—Ä–¥—Ü–µ –µ—â—ë –∑–∞–∫—Ä—ã—Ç–æ', author: '–ü–µ–º–∞ –ß–æ–¥—Ä–æ–Ω' },
            // –†–∞–º–∞–Ω–∞ –ú–∞—Ö–∞—Ä—à–∏
            { text: '–°—Ç—Ä–∞–¥–∞–Ω–∏–µ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Å–∫–∞—Ç—å. –ë–µ–∑ —Å—Ç—Ä–∞–¥–∞–Ω–∏—è –Ω–µ –±—ã–ª–æ –±—ã –ø–æ–∏—Å–∫–∞ –∏—Å—Ç–∏–Ω—ã', author: '–†–∞–º–∞–Ω–∞ –ú–∞—Ö–∞—Ä—à–∏' },
            { text: '–¢—å–º–∞ –≤–Ω—É—Ç—Ä–∏ ‚Äî —ç—Ç–æ –Ω–µ–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Å–≤–µ—Ç', author: '–†–∞–º–∞–Ω–∞ –ú–∞—Ö–∞—Ä—à–∏' },
            // –ö–∞—Ä–ª –Æ–Ω–≥
            { text: '–î–µ–ø—Ä–µ—Å—Å–∏—è –ø–æ–¥–æ–±–Ω–∞ –¥–∞–º–µ –≤ —á—ë—Ä–Ω–æ–º. –ù–µ –≥–æ–Ω–∏ –µ—ë ‚Äî –ø—Ä–∏–≥–ª–∞—Å–∏ –∑–∞ —Å—Ç–æ–ª, –≤—ã—Å–ª—É—à–∞–π', author: '–ö–∞—Ä–ª –Æ–Ω–≥' },
            { text: '–ù–µ—Ç –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è —Å–æ–∑–Ω–∞–Ω–∏—è –±–µ–∑ –±–æ–ª–∏', author: '–ö–∞—Ä–ª –Æ–Ω–≥' },
            // –í–∏–∫—Ç–æ—Ä –§—Ä–∞–Ω–∫–ª
            { text: '–°—Ç—Ä–∞–¥–∞–Ω–∏–µ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å —Å—Ç—Ä–∞–¥–∞–Ω–∏–µ–º, –∫–æ–≥–¥–∞ –æ–±—Ä–µ—Ç–∞–µ—Ç —Å–º—ã—Å–ª', author: '–í–∏–∫—Ç–æ—Ä –§—Ä–∞–Ω–∫–ª' },
            // –¢–∏—Ç –ù–∞—Ç –•–∞–Ω
            { text: '–ù–µ—Ç –≥—Ä—è–∑–∏ ‚Äî –Ω–µ—Ç –ª–æ—Ç–æ—Å–∞. –ò–∑ —Å—Ç—Ä–∞–¥–∞–Ω–∏—è —Ä–æ–∂–¥–∞–µ—Ç—Å—è –º—É–¥—Ä–æ—Å—Ç—å', author: '–¢–∏—Ç –ù–∞—Ç –•–∞–Ω' },
            // –ê–¥—å—è—à–∞–Ω—Ç–∏
            { text: '–î–µ–ø—Ä–µ—Å—Å–∏—è ‚Äî —ç—Ç–æ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–∏. –ü—Ä–µ–∫—Ä–∞—Ç–∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è—Ç—å—Å—è ‚Äî –∏ –∂–∏–∑–Ω—å –ø–æ—Ç–µ—á—ë—Ç', author: '–ê–¥—å—è—à–∞–Ω—Ç–∏' },
            { text: '–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ø–∞—Å—Ç—å, —á—Ç–æ–±—ã –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å, —á—Ç–æ –ø–∞–¥–∞—Ç—å –Ω–µ–∫—É–¥–∞', author: '–ê–¥—å—è—à–∞–Ω—Ç–∏' }
        ];

        const LOCAL_RESPONSES = [
            '–Ø —Å–ª—ã—à—É —Ç–µ–±—è. –†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ üå§Ô∏è',
            '–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –¥–µ–ª–∏—à—å—Å—è. –≠—Ç–æ –≤–∞–∂–Ω–æ.',
            '–ò–Ω–æ–≥–¥–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–±—ã—Ç—å —Ä—è–¥–æ–º ‚Äî —É–∂–µ –º–Ω–æ–≥–æ.',
            '–î–∞–∂–µ –≤ —Ç—ë–º–Ω–æ–π –Ω–æ—á–∏ –∑–≤—ë–∑–¥—ã —Å–≤–µ—Ç—è—Ç.',
            '–¢–µ–ø–ª–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, –∫–∞–∫ –≤–µ—Å–Ω–∞.',
            '–¢—ã –Ω–µ –æ–¥–∏–Ω –≤ —ç—Ç–æ–º.'
        ];

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // –ö–û–ú–ü–û–ù–ï–ù–¢–´
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        function BottomNav({ page, setPage }) {
            const items = [
                { id: 'home', icon: 'üè†', label: '–ì–ª–∞–≤–Ω–∞—è' },
                { id: 'nutrition', icon: 'ü•ó', label: '–ü–∏—Ç–∞–Ω–∏–µ' },
                { id: 'walks', icon: 'üö∂', label: '–ü—Ä–æ–≥—É–ª–∫–∏' },
                { id: 'practices', icon: 'üìñ', label: '–ü—Ä–∞–∫—Ç–∏–∫–∏' },
                { id: 'profile', icon: 'üë§', label: '–ü—Ä–æ—Ñ–∏–ª—å' }
            ];
            return (
                <nav className="bottom-nav">
                    {items.map(item => (
                        <div key={item.id} className={`nav-item ${page === item.id ? 'active' : ''}`} onClick={() => setPage(item.id)}>
                            <span className="nav-icon">{item.icon}</span>
                            <span>{item.label}</span>
                        </div>
                    ))}
                </nav>
            );
        }

        function HomePage({ setPage, setPractice }) {
            const [state, setState] = useState('neutral');
            const [quote] = useState(QUOTES[Math.floor(Math.random() * QUOTES.length)]);
            const profile = DB.getProfile();
            const stateHistory = DB.getStateHistory();
            const hour = new Date().getHours();
            const greeting = hour < 6 ? '–î–æ–±—Ä–æ–π –Ω–æ—á–∏' : hour < 12 ? '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ' : hour < 18 ? '–î–æ–±—Ä—ã–π –¥–µ–Ω—å' : '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä';
            const naturalDay = NATURAL_WISDOM.getNaturalDay();
            const rhythm = NATURAL_WISDOM.getCurrentRhythm();
            const soulStatesRef = useRef(null);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª—è
            const isProfileComplete = profile.name && profile.temperament;
            
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            useEffect(() => {
                const darkTheme = DB.get('dark_theme', false);
                if (darkTheme) {
                    document.documentElement.classList.add('dark-theme');
                }
            }, []);
            
            useEffect(() => { DB.addState(state); }, [state]);
            
            // –°–∫—Ä–æ–ª–ª –∫ "–°–ø–æ–∫–æ–π–Ω–æ" –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            useEffect(() => {
                if (soulStatesRef.current) {
                    const neutralIndex = SOUL_STATES.findIndex(s => s.id === 'neutral');
                    const chipWidth = 85; // –ø—Ä–∏–º–µ—Ä–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —á–∏–ø–∞
                    const containerWidth = soulStatesRef.current.offsetWidth;
                    const scrollPos = (neutralIndex * chipWidth) - (containerWidth / 2) + (chipWidth / 2);
                    soulStatesRef.current.scrollLeft = Math.max(0, scrollPos);
                }
            }, []);
            
            // –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞
            const stateRecs = {
                heavy: ['light_morning', 'warmth_heart', 'warmth_footbath'],
                low_energy: ['warmth_tea', 'walk_sunrise', 'warmth_footbath'],
                anxious: ['breathing', 'warmth_blanket', 'walk_forest'],
                neutral: ['nondual_presence', 'journal_deep', 'walk_observe'],
                hopeful: ['watercolor_sunrise', 'gratitude', 'walk_beauty'],
                grateful: ['gratitude', 'walk_beauty'],
                light: ['watercolor_emotion', 'walk_observe']
            };
            const recPracticeId = stateRecs[state]?.[0] || 'breathing';
            const recPractice = PRACTICES.find(p => p.id === recPracticeId);
            
            return (
                <div className="fade-in">
                    <h1 className="greeting">{greeting}{profile.name ? `, ${profile.name}` : ''} ‚ú®</h1>
                    <p className="greeting-sub">{rhythm.name} ‚Äî {rhythm.quality}</p>
                    
                    {/* –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å */}
                    {!isProfileComplete && (
                        <div 
                            className="card card-clickable" 
                            style={{ 
                                background: 'linear-gradient(135deg, #FEF3C7, #FDE68A)', 
                                marginBottom: '1rem',
                                border: '2px solid var(--amber)'
                            }}
                            onClick={() => setPage('profile')}
                        >
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>
                                <span style={{ fontSize: '2rem' }}>üë§</span>
                                <div style={{ flex: 1 }}>
                                    <strong>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å</strong>
                                    <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)', marginTop: '0.25rem' }}>
                                        {!profile.name && !profile.temperament 
                                            ? '–£–∫–∞–∂–∏—Ç–µ –∏–º—è –∏ –ø—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç –Ω–∞ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π'
                                            : !profile.name 
                                                ? '–£–∫–∞–∂–∏—Ç–µ –≤–∞—à–µ –∏–º—è'
                                                : '–ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç –Ω–∞ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π'
                                        }
                                    </p>
                                </div>
                                <span style={{ fontSize: '1.25rem' }}>‚Üí</span>
                            </div>
                        </div>
                    )}
                    
                    <div style={{ display: 'flex', gap: '0.5rem', marginBottom: '1rem' }}>
                        <span className="nature-badge" style={{ background: naturalDay.color + '20', color: naturalDay.color }}>
                            {naturalDay.icon} {naturalDay.name}
                        </span>
                    </div>

                    <h3>–ö–∞–∫ –Ω–∞ –¥—É—à–µ?</h3>
                    <div className="soul-states" ref={soulStatesRef}>
                        {SOUL_STATES.map(s => (
                            <div key={s.id} className={`soul-chip ${state === s.id ? 'active' : ''}`} onClick={() => setState(s.id)}>
                                <span className="soul-emoji">{s.emoji}</span>
                                <span className="soul-label">{s.label}</span>
                            </div>
                        ))}
                    </div>

                    {recPractice && (
                        <div className="recommendation-card" onClick={() => { setPractice(recPractice); setPage('practice'); }}>
                            <div className="recommendation-title">üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</div>
                            <h3>{recPractice.title}</h3>
                            <p className="recommendation-reason">{recPractice.short}</p>
                            <button className="btn btn-primary btn-small">–ù–∞—á–∞—Ç—å</button>
                        </div>
                    )}

                    <div className="grid-2">
                        <div className="card card-clickable" onClick={() => setPage('day')}>
                            <div style={{ 
                                width: '40px', 
                                height: '40px', 
                                background: 'linear-gradient(180deg, #DC2626 0%, #DC2626 30%, white 30%)',
                                borderRadius: '6px',
                                display: 'flex',
                                flexDirection: 'column',
                                alignItems: 'center',
                                justifyContent: 'flex-end',
                                marginBottom: '0.25rem',
                                border: '1px solid #e0e0e0',
                                boxShadow: '0 1px 2px rgba(0,0,0,0.1)'
                            }}>
                                <span style={{ 
                                    fontSize: '1.1rem', 
                                    fontWeight: 'bold', 
                                    color: '#1a1a1a',
                                    lineHeight: 1,
                                    marginBottom: '2px'
                                }}>{new Date().getDate()}</span>
                                <span style={{ 
                                    fontSize: '0.55rem', 
                                    color: '#666',
                                    textTransform: 'uppercase',
                                    marginBottom: '3px'
                                }}>{['—è–Ω–≤','—Ñ–µ–≤','–º–∞—Ä','–∞–ø—Ä','–º–∞–π','–∏—é–Ω','–∏—é–ª','–∞–≤–≥','—Å–µ–Ω','–æ–∫—Ç','–Ω–æ—è','–¥–µ–∫'][new Date().getMonth()]}</span>
                            </div>
                            <strong>–ú–æ–π –¥–µ–Ω—å</strong>
                            <p style={{ fontSize: '0.75rem', color: 'var(--text-tertiary)' }}>–ü–ª–∞–Ω –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</p>
                        </div>
                        <div className="card card-clickable" onClick={() => setPage('journal')}>
                            <div style={{ fontSize: '1.25rem', marginBottom: '0.25rem' }}>üìù</div>
                            <strong>–î–Ω–µ–≤–Ω–∏–∫</strong>
                            <p style={{ fontSize: '0.75rem', color: 'var(--text-tertiary)' }}>–ó–∞–ø–∏—Å–∞—Ç—å –º—ã—Å–ª–∏</p>
                        </div>
                    </div>

                    {/* –í–µ—á–µ—Ä–Ω—è—è –≤–∞–Ω–Ω–æ—á–∫–∞ */}
                    {hour >= 19 && hour <= 22 && (
                        <div className="card" style={{ background: '#F0FDF4', marginTop: '0.5rem' }} onClick={() => { const p = PRACTICES.find(pr => pr.id === 'warmth_footbath'); if(p) { setPractice(p); setPage('practice'); } }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                <span style={{ fontSize: '1.5rem' }}>üõÅ</span>
                                <div>
                                    <strong>–í–µ—á–µ—Ä–Ω—è—è –≤–∞–Ω–Ω–æ—á–∫–∞</strong>
                                    <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                        –ú–∞—Å–ª–∞ –¥–Ω—è: {naturalDay.oils.join(', ')}
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* –°–ü–ê –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö */}
                    {(new Date().getDay() === 0 || new Date().getDay() === 6) && (
                        <div className="card" style={{ background: '#FEF3C7', marginTop: '0.5rem' }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>
                                <span style={{ fontSize: '1.25rem' }}>‚ô®Ô∏è</span>
                                <strong>–í—ã—Ö–æ–¥–Ω–æ–π ‚Äî –≤—Ä–µ–º—è –¥–ª—è –°–ü–ê</strong>
                            </div>
                            <div style={{ display: 'flex', gap: '0.4rem', flexWrap: 'wrap' }}>
                                <button className="btn btn-small btn-secondary" onClick={() => { const p = PRACTICES.find(pr => pr.id === 'sauna'); if(p) { setPractice(p); setPage('practice'); } }}>
                                    üßñ –ë–∞–Ω—è
                                </button>
                                <button className="btn btn-small btn-secondary" onClick={() => { const p = PRACTICES.find(pr => pr.id === 'bath_full'); if(p) { setPractice(p); setPage('practice'); } }}>
                                    üõÅ –í–∞–Ω–Ω–∞
                                </button>
                                <button className="btn btn-small btn-secondary" onClick={() => { const p = PRACTICES.find(pr => pr.id === 'massage_self'); if(p) { setPractice(p); setPage('practice'); } }}>
                                    üíÜ –ú–∞—Å—Å–∞–∂
                                </button>
                            </div>
                        </div>
                    )}
                    
                    {/* –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –±–∞–Ω–µ –≤ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–µ–Ω—å */}
                    {(() => {
                        const saunaDay = DB.getSaunaDay();
                        const today = new Date().getDay();
                        const dayNames = ['–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–≤—Ç–æ—Ä–Ω–∏–∫', '—Å—Ä–µ–¥—É', '—á–µ—Ç–≤–µ—Ä–≥', '–ø—è—Ç–Ω–∏—Ü—É', '—Å—É–±–±–æ—Ç—É'];
                        const dayOils = naturalDay.oils;
                        
                        if (saunaDay !== null && saunaDay === today) {
                            return (
                                <div className="card" style={{ background: 'linear-gradient(135deg, #FEE8D6, #FFE4C9)', marginTop: '0.5rem' }}>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>
                                        <span style={{ fontSize: '1.5rem' }}>üßñ</span>
                                        <div>
                                            <strong>–°–µ–≥–æ–¥–Ω—è ‚Äî –¥–µ–Ω—å –±–∞–Ω–∏!</strong>
                                            <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                                –ú–∞—Å–ª–∞ –¥–Ω—è: {dayOils.join(', ')} ‚Äî {naturalDay.oilEffect.toLowerCase()}
                                            </p>
                                        </div>
                                    </div>
                                    <button 
                                        className="btn btn-primary btn-small" 
                                        onClick={() => { const p = PRACTICES.find(pr => pr.id === 'sauna'); if(p) { setPractice(p); setPage('practice'); } }}
                                    >
                                        –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∞–∫—Ç–∏–∫—É
                                    </button>
                                </div>
                            );
                        }
                        return null;
                    })()}
                    
                    {/* –ß—É–¥–æ –¥–Ω—è –≤–µ—á–µ—Ä–æ–º */}
                    {hour >= 21 && (
                        <div className="card card-clickable" style={{ background: '#F5F0FF', marginTop: '0.5rem' }} onClick={() => { const p = PRACTICES.find(pr => pr.id === 'wonder_of_day'); if(p) { setPractice(p); setPage('practice'); } }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                <span style={{ fontSize: '1.25rem' }}>‚ú®</span>
                                <div>
                                    <strong>–ß—É–¥–æ –¥–Ω—è</strong>
                                    <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>–í–µ—á–µ—Ä–Ω—è—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è</p>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="quote-card" style={{ marginTop: '0.75rem' }}>
                        <p className="quote-text">¬´{quote.text}¬ª</p>
                        <p className="quote-author">‚Äî {quote.author}</p>
                    </div>
                </div>
            );
        }

        function DayPage({ setPage, setPractice }) {
            const hour = new Date().getHours();
            const naturalDay = NATURAL_WISDOM.getNaturalDay();
            const profile = DB.getProfile();
            const temperament = profile.temperament || 'melancholic';
            const tempInfo = TEMPERAMENT_NUTRITION[temperament];
            
            // –ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è –ø–æ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç—É
            const getMealRecommendation = (mealType) => {
                // –ü–æ–ª–Ω—ã–π —Ä–∞—Ü–∏–æ–Ω –ø–æ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç–∞–º (–ü–∞–ª–µ–æ)
                const mealsByTemperament = {
                    sanguine: {
                        breakfast: {
                            foods: ['ü•ö –Ø–π—Ü–∞ 3—à—Ç –Ω–∞ —Å–∞–ª–µ', 'üßà –¢–æ–ø–ª—ë–Ω–æ–µ –º–∞—Å–ª–æ', 'üåø –ó–µ–ª–µ–Ω—å', 'üßÄ –¢–≤—ë—Ä–¥—ã–π —Å—ã—Ä'],
                            tip: '–ú–Ω–æ–≥–æ –±–µ–ª–∫–∞ –∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö –∂–∏—Ä–æ–≤ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏'
                        },
                        snack1: {
                            foods: ['ü•ú –ì—Ä–µ—Ü–∫–∏–µ –æ—Ä–µ—Ö–∏', 'üçé –Ø–±–ª–æ–∫–æ', 'ü•ï –ú–æ—Ä–∫–æ–≤—å'],
                            tip: '–ü–æ–ª–µ–∑–Ω—ã–µ –∂–∏—Ä—ã –≤–º–µ—Å—Ç–æ –±—ã—Å—Ç—Ä—ã—Ö –ø–µ—Ä–µ–∫—É—Å–æ–≤'
                        },
                        lunch: {
                            foods: ['üçó –ö—É—Ä–∏—Ü–∞ –≥—Ä–∏–ª—å', 'ü•ó –°–∞–ª–∞—Ç —Å–æ —Å–º–µ—Ç–∞–Ω–æ–π', 'üåø –£–∫—Ä–æ–ø/–ø–µ—Ç—Ä—É—à–∫–∞', 'ü•í –û–≤–æ—â–∏'],
                            tip: '–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –æ–±–µ–¥ ‚Äî –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ!'
                        },
                        snack2: {
                            foods: ['üßÄ –¢–≤–æ—Ä–æ–≥ 9%', 'ü´ê –Ø–≥–æ–¥—ã', 'ü•ú –ö–µ—à—å—é'],
                            tip: '–ë–µ–ª–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏—Ç –¥–æ —É–∂–∏–Ω–∞'
                        },
                        dinner: {
                            foods: ['üêü –†—ã–±–∞ –Ω–∞ —Ç–æ–ø–ª—ë–Ω–æ–º –º–∞—Å–ª–µ', 'ü•¶ –ë—Ä–æ–∫–∫–æ–ª–∏', 'ü•¨ –®–ø–∏–Ω–∞—Ç', 'üåø –£–∫—Ä–æ–ø'],
                            tip: '–õ—ë–≥–∫–∏–π –±–µ–ª–æ–∫ + –æ–≤–æ—â–∏, –±–µ–∑ –∫—Ä—É–ø'
                        }
                    },
                    choleric: {
                        breakfast: {
                            foods: ['ü•ö –Ø–π—Ü–∞ 2—à—Ç', 'ü•í –û–≥—É—Ä–µ—Ü', 'ü•¨ –õ–∏—Å—Ç—å—è —Å–∞–ª–∞—Ç–∞', 'üßà –¢–æ–ø–ª—ë–Ω–æ–µ –º–∞—Å–ª–æ'],
                            tip: '–û—Ö–ª–∞–∂–¥–∞—é—â–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –æ–≥–Ω—è'
                        },
                        snack1: {
                            foods: ['ü•í –û–≥—É—Ä–µ—Ü', 'üçÖ –ü–æ–º–∏–¥–æ—Ä', 'üåø –†—É–∫–∫–æ–ª–∞', 'üßÄ –ú–æ—Ü–∞—Ä–µ–ª–ª–∞'],
                            tip: '–°–≤–µ–∂–∏–µ –æ–≤–æ—â–∏ –æ—Ö–ª–∞–∂–¥–∞—é—Ç'
                        },
                        lunch: {
                            foods: ['üêü –†—ã–±–∞ –Ω–∞ –ø–∞—Ä—É', 'ü•ó –°–∞–ª–∞—Ç —Å–æ —Å–º–µ—Ç–∞–Ω–æ–π', 'üåø –£–∫—Ä–æ–ø', 'ü•í –ö–∞–±–∞—á–∫–∏'],
                            tip: '–ú–µ–Ω—å—à–µ –º—è—Å–∞, –±–æ–ª—å—à–µ —Ä—ã–±—ã –∏ –æ–≤–æ—â–µ–π'
                        },
                        snack2: {
                            foods: ['ü•õ –ö–µ—Ñ–∏—Ä', 'ü•í –°–µ–ª—å–¥–µ—Ä–µ–π', 'üåø –ü–µ—Ç—Ä—É—à–∫–∞', 'ü•ú –¢—ã–∫–≤. —Å–µ–º–µ—á–∫–∏'],
                            tip: '–û—Ö–ª–∞–∂–¥–∞—é—â–∏–π –ø–æ–ª–¥–Ω–∏–∫'
                        },
                        dinner: {
                            foods: ['ü•ó –°–∞–ª–∞—Ç —Å–æ —Å–º–µ—Ç–∞–Ω–æ–π', 'ü•¨ –õ–∏—Å—Ç—å—è —Å–∞–ª–∞—Ç–∞', 'üßÄ –ê–¥—ã–≥–µ–π—Å–∫–∏–π —Å—ã—Ä', 'ü•í –û–≥—É—Ä—Ü—ã'],
                            tip: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ª—ë–≥–∫–∏–π, –±–µ–∑ –æ—Å—Ç—Ä–æ–≥–æ'
                        }
                    },
                    melancholic: {
                        breakfast: {
                            foods: ['ü•£ –ö–∞—à–∞ –Ω–∞ —Ç–æ–ø–ª—ë–Ω–æ–º –º–∞—Å–ª–µ', 'ü•ö –Ø–π—Ü–∞ –Ω–∞ —Å–∞–ª–µ', 'üåø –ó–µ–ª–µ–Ω—å', 'üå∞ –û—Ä–µ—Ö–∏'],
                            tip: '–¢–æ–ª—å–∫–æ —Ç—ë–ø–ª–∞—è –ø–∏—â–∞ –¥–ª—è —Å–æ–≥—Ä–µ–≤–∞–Ω–∏—è'
                        },
                        snack1: {
                            foods: ['üçµ –ò–º–±–∏—Ä–Ω—ã–π —á–∞–π', 'ü•ú –ú–∏–Ω–¥–∞–ª—å', 'üçØ –ú—ë–¥'],
                            tip: '–°–æ–≥—Ä–µ–≤–∞—é—â–∏–π –ø–µ—Ä–µ–∫—É—Å'
                        },
                        lunch: {
                            foods: ['üç≤ –ö–æ—Å—Ç–Ω—ã–π –±—É–ª—å–æ–Ω', 'ü¶É –ò–Ω–¥–µ–π–∫–∞ –Ω–∞ —Å–∞–ª–µ', 'ü•ï –ú–æ—Ä–∫–æ–≤—å', 'üåø –ó–µ–ª–µ–Ω—å'],
                            tip: '–ù–∞–≤–∞—Ä–∏—Å—Ç—ã–π —Å—É–ø –∏ —Ç—ë–ø–ª–æ–µ –º—è—Å–æ'
                        },
                        snack2: {
                            foods: ['üçµ –¢—Ä–∞–≤—è–Ω–æ–π —á–∞–π', 'üßÄ –¢–≤–æ—Ä–æ–≥ —Å–æ —Å–º–µ—Ç–∞–Ω–æ–π', 'üçØ –° –∫–æ—Ä–∏—Ü–µ–π'],
                            tip: '–¢—ë–ø–ª—ã–π —Ç–≤–æ—Ä–æ–≥ —Å –ø—Ä—è–Ω–æ—Å—Ç—è–º–∏'
                        },
                        dinner: {
                            foods: ['ü•ï –û–≤–æ—â–∏ –Ω–∞ —Ç–æ–ø–ª—ë–Ω–æ–º –º–∞—Å–ª–µ', 'üåø –£–∫—Ä–æ–ø/–ø–µ—Ç—Ä—É—à–∫–∞', 'üßÖ –õ—É–∫', 'ü•õ –†—è–∂–µ–Ω–∫–∞'],
                            tip: '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–∞—è –ø–∏—â–∞, –Ω–µ —Å—ã—Ä–∞—è!'
                        }
                    },
                    phlegmatic: {
                        breakfast: {
                            foods: ['ü•ö –Ø–π—Ü–∞ –Ω–∞ —Å–∞–ª–µ —Å –ø–µ—Ä—Ü–µ–º', 'üåø –†—É–∫–∫–æ–ª–∞', 'üå∂Ô∏è –ö—É—Ä–∫—É–º–∞', 'üçµ –ó–µ–ª—ë–Ω—ã–π —á–∞–π'],
                            tip: '–û—Å—Ç—Ä—ã–µ —Å–ø–µ—Ü–∏–∏ —Ä–∞–∑–≥–æ–Ω—è—é—Ç –º–µ—Ç–∞–±–æ–ª–∏–∑–º'
                        },
                        snack1: {
                            foods: ['ü•ï –ú–æ—Ä–∫–æ–≤–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏', 'üåø –°–µ–ª—å–¥–µ—Ä–µ–π', 'ü•¨ –õ–∏—Å—Ç—å—è —Å–∞–ª–∞—Ç–∞', 'üçã –õ–∏–º–æ–Ω–Ω–∞—è –≤–æ–¥–∞'],
                            tip: '–õ—ë–≥–∫–∏–π –∏ –æ—Å—Ç—Ä—ã–π'
                        },
                        lunch: {
                            foods: ['üçó –ö—É—Ä–∏—Ü–∞ –Ω–∞ —Ç–æ–ø–ª—ë–Ω–æ–º –º–∞—Å–ª–µ', 'ü•ó –†—É–∫–∫–æ–ª–∞', 'üßÑ –ß–µ—Å–Ω–æ–∫', 'üå∂Ô∏è –ö–∞—Ä—Ä–∏'],
                            tip: '–£–º–µ—Ä–µ–Ω–Ω–∞—è –ø–æ—Ä—Ü–∏—è —Å –ø—Ä—è–Ω–æ—Å—Ç—è–º–∏'
                        },
                        snack2: {
                            foods: ['üçµ –ò–º–±–∏—Ä–Ω—ã–π —á–∞–π', 'üåø –ó–µ–ª–µ–Ω—å', 'ü•ú –ù–µ–º–Ω–æ–≥–æ –æ—Ä–µ—Ö–æ–≤', 'ü•í –û–≤–æ—â–∏'],
                            tip: '–ú–∏–Ω–∏–º—É–º –º–æ–ª–æ—á–Ω–æ–≥–æ'
                        },
                        dinner: {
                            foods: ['ü•ó –õ—ë–≥–∫–∏–π —Å–∞–ª–∞—Ç', 'üêü –†—ã–±–∞ –Ω–∞ —Ç–æ–ø–ª—ë–Ω–æ–º –º–∞—Å–ª–µ', 'üåø –ó–µ–ª–µ–Ω—å'],
                            tip: '–ú–∞–ª–µ–Ω—å–∫–∞—è –ø–æ—Ä—Ü–∏—è, –±–æ–ª—å—à–µ –∑–µ–ª–µ–Ω–∏'
                        }
                    }
                };
                
                const meals = mealsByTemperament[temperament] || mealsByTemperament.melancholic;
                const meal = meals[mealType];
                
                // –û–±—â–∏–µ —Å–æ–≤–µ—Ç—ã –ø–æ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç—É
                const tempTips = {
                    sanguine: 'üåû –†–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ!',
                    choleric: 'üî• –û—Ö–ª–∞–∂–¥–∞–π—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ–≥–æ–Ω—å',
                    melancholic: 'üåô –°–æ–≥—Ä–µ–≤–∞–π—Ç–µ —Ç–µ–ª–æ –∏ –¥—É—à—É',
                    phlegmatic: 'üíß –†–∞–∑–≥–æ–Ω—è–π—Ç–µ –º–µ—Ç–∞–±–æ–ª–∏–∑–º'
                };
                
                return {
                    ...meal,
                    tempTip: tempTips[temperament]
                };
            };
            
            const dayPlan = [
                { time: '6-7', name: '–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ', icon: 'üåÖ', practices: ['light_morning', 'breathing'], active: hour >= 6 && hour < 7 },
                { time: '7-9', name: '–ó–∞–≤—Ç—Ä–∞–∫', icon: 'üç≥', meal: 'breakfast', active: hour >= 7 && hour < 9 },
                { time: '9-11', name: '–£—Ç—Ä–µ–Ω–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å', icon: 'üí≠', practices: ['journal_deep', 'psychoeducation'], active: hour >= 9 && hour < 11 },
                { time: '10:30-11', name: '–ü–µ—Ä–µ–∫—É—Å', icon: 'ü•ú', meal: 'snack1', active: hour >= 10 && hour < 11 },
                { time: '12-14', name: '–û–±–µ–¥', icon: 'üçΩÔ∏è', meal: 'lunch', active: hour >= 12 && hour < 14 },
                { time: '14-16', name: '–î–µ–Ω—å', icon: '‚ö°', practices: ['walk_observe', 'warmth_heart'], active: hour >= 14 && hour < 16 },
                { time: '15:30-16:30', name: '–ü–æ–ª–¥–Ω–∏–∫', icon: 'üßÄ', meal: 'snack2', active: hour >= 15 && hour < 17 },
                { time: '17-18', name: '–í–µ—á–µ—Ä–Ω—è—è –ø—Ä–æ–≥—É–ª–∫–∞', icon: 'üö∂', practices: ['walk_sunset', 'gratitude'], active: hour >= 17 && hour < 18 },
                { time: '18-19', name: '–£–∂–∏–Ω', icon: 'ü•ó', meal: 'dinner', active: hour >= 18 && hour < 19 },
                { time: '20-22', name: '–°–ü–ê-–≤—Ä–µ–º—è', icon: 'üõÅ', practices: ['warmth_footbath', 'bath_full', 'massage_self'], oils: naturalDay.oils, active: hour >= 20 && hour < 22 },
                { time: '22-23', name: '–ü–µ—Ä–µ–¥ —Å–Ω–æ–º', icon: 'üåô', practices: ['wonder_of_day', 'gratitude'], active: hour >= 22 && hour < 23 }
            ];
            
            return (
                <div className="fade-in">
                    <h1>–ú–æ–π –¥–µ–Ω—å</h1>
                    <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem', marginBottom: '0.5rem' }}>
                        {naturalDay.icon} {naturalDay.theme} ‚Äî {naturalDay.oilEffect}
                    </p>
                    
                    {/* –¢–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç –∏ –ø–∏—Ç–∞–Ω–∏–µ */}
                    <div className="card" style={{ marginBottom: '1rem', padding: '0.75rem' }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.25rem' }}>
                            <span style={{ fontSize: '1.25rem' }}>{tempInfo?.icon || 'üåô'}</span>
                            <strong>{tempInfo?.title || '–ú–µ–ª–∞–Ω—Ö–æ–ª–∏–∫'}</strong>
                        </div>
                        <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                            {tempInfo?.tendency}
                        </p>
                    </div>
                    
                    {dayPlan.map((period, idx) => {
                        const mealData = period.meal ? getMealRecommendation(period.meal) : null;
                        
                        return (
                            <div key={idx} className={`day-period ${period.active ? 'active' : ''}`}>
                                <div className="day-period-header">
                                    <span className="day-period-icon">{period.icon}</span>
                                    <strong>{period.name}</strong>
                                    <span className="day-period-time">{period.time}</span>
                                </div>
                                
                                {/* –ë–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è */}
                                {mealData && (
                                    <div style={{ marginTop: '0.5rem' }}>
                                        <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)', marginBottom: '0.4rem' }}>
                                            üí° {mealData.tip}
                                        </p>
                                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.3rem', marginBottom: '0.4rem' }}>
                                            {mealData.foods.map((food, i) => (
                                                <span key={i} style={{ 
                                                    background: 'var(--sand, #F5EDE0)', 
                                                    padding: '0.2rem 0.5rem', 
                                                    borderRadius: '10px',
                                                    fontSize: '0.7rem'
                                                }}>{food}</span>
                                            ))}
                                        </div>
                                        {mealData.tempTip && period.active && (
                                            <p style={{ 
                                                fontSize: '0.75rem', 
                                                color: 'var(--amber)', 
                                                fontStyle: 'italic',
                                                marginTop: '0.25rem'
                                            }}>
                                                {tempInfo?.icon} {mealData.tempTip}
                                            </p>
                                        )}
                                    </div>
                                )}
                                
                                {period.oils && (
                                    <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)', marginBottom: '0.5rem' }}>
                                        üåø –ú–∞—Å–ª–∞: {period.oils.join(', ')}
                                    </p>
                                )}
                                {period.active && period.practices && (
                                    <div style={{ display: 'flex', gap: '0.4rem', flexWrap: 'wrap', marginTop: '0.5rem' }}>
                                        {period.practices.map(pId => {
                                            const p = PRACTICES.find(pr => pr.id === pId);
                                            if (!p) return null;
                                            return (
                                                <button key={pId} className="btn btn-primary btn-small" onClick={() => { setPractice(p); setPage('practice'); }}>
                                                    {p.title}
                                                </button>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        );
                    })}
                    
                    {/* –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –ø–∏—Ç–∞–Ω–∏—é */}
                    <div 
                        className="card card-clickable" 
                        style={{ marginTop: '1rem', textAlign: 'center' }}
                        onClick={() => setPage('nutrition')}
                    >
                        <span style={{ fontSize: '1.5rem' }}>ü•ó</span>
                        <p style={{ fontWeight: 'bold', marginTop: '0.25rem' }}>–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø–∏—Ç–∞–Ω–∏–∏</p>
                        <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>7-–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</p>
                    </div>
                </div>
            );
        }

        function PracticesPage({ setPage, setPractice }) {
            const [cat, setCat] = useState(null);
            const filtered = cat ? PRACTICES.filter(p => p.category === cat) : PRACTICES;
            
            return (
                <div className="fade-in">
                    <h1>–ü—Ä–∞–∫—Ç–∏–∫–∏</h1>
                    <div className="category-pills">
                        <span className={`category-pill ${!cat ? 'active' : ''}`} onClick={() => setCat(null)}>–í—Å–µ</span>
                        {CATEGORIES.map(c => (
                            <span key={c.id} className={`category-pill ${cat === c.id ? 'active' : ''}`} onClick={() => setCat(c.id)}>
                                {c.icon} {c.name}
                            </span>
                        ))}
                    </div>
                    
                    {filtered.map(p => (
                        <div key={p.id} className="card card-clickable" style={{ background: p.bg }} onClick={() => { setPractice(p); setPage('practice'); }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '0.5rem' }}>
                                <span>{CATEGORIES.find(c => c.id === p.category)?.icon}</span>
                                <strong>{p.title}</strong>
                            </div>
                            <p style={{ fontSize: '0.85rem' }}>{p.short}</p>
                            <div className="practice-meta">
                                <span>‚è±Ô∏è {p.duration} –º–∏–Ω</span>
                            </div>
                        </div>
                    ))}
                </div>
            );
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // –¢–†–ï–ö–ï–† –ü–†–û–ì–£–õ–û–ö
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function WalkTrackerPage({ setPage, setPractice }) {
            const [stats, setStats] = useState(DB.getWalkStats());
            const [showAddWalk, setShowAddWalk] = useState(false);
            const [showHistory, setShowHistory] = useState(false);
            const [showAnalytics, setShowAnalytics] = useState(false);
            const [showHealthInfo, setShowHealthInfo] = useState(false);
            const [walkDuration, setWalkDuration] = useState(30);
            const [walkType, setWalkType] = useState('city');
            const [walkMood, setWalkMood] = useState('neutral');
            const [walkNotes, setWalkNotes] = useState('');
            const [motivation, setMotivation] = useState('');
            const [activeWalk, setActiveWalk] = useState(null);
            const [walkTimer, setWalkTimer] = useState(0);
            const [healthInsight, setHealthInsight] = useState(HEALTH_INSIGHTS[Math.floor(Math.random() * HEALTH_INSIGHTS.length)]);
            const [autoDetectEnabled, setAutoDetectEnabled] = useState(DB.get('walk_auto_detect', true));
            const [showTypeSelector, setShowTypeSelector] = useState(false);
            const [stepCount, setStepCount] = useState(0);
            const [isMoving, setIsMoving] = useState(false);
            const [noMovementTime, setNoMovementTime] = useState(0);
            const [showStopWarning, setShowStopWarning] = useState(false);
            const lastMovementRef = useRef(Date.now());
            
            const goal = DB.getWalkGoal();
            const stateHistory = DB.getStateHistory();
            const walks = DB.getWalks();
            const currentState = stateHistory.length > 0 ? stateHistory[stateHistory.length - 1].state : 'neutral';
            const recommendation = WALK_RECOMMENDATIONS[currentState] || WALK_RECOMMENDATIONS.neutral;
            const correlation = analyzeWalkMoodCorrelation(walks, stateHistory);
            
            // –¢–∏–ø—ã –ø—Ä–æ–≥—É–ª–æ–∫ —Å –∏–∫–æ–Ω–∫–∞–º–∏
            const WALK_TYPES = [
                { id: 'city', icon: 'üèôÔ∏è', label: '–ì–æ—Ä–æ–¥', desc: '–î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –≥–æ—Ä–æ–¥—É' },
                { id: 'observe', icon: 'üëÅÔ∏è', label: '–ù–∞–±–ª—é–¥–µ–Ω–∏–µ', desc: '–û—Å–æ–∑–Ω–∞–Ω–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞' },
                { id: 'forest', icon: 'üå≥', label: '–õ–µ—Å/–ü–∞—Ä–∫', desc: '–ù–∞ –ø—Ä–∏—Ä–æ–¥–µ' },
                { id: 'active', icon: 'üèÉ', label: '–ê–∫—Ç–∏–≤–Ω–∞—è', desc: '–ë—ã—Å—Ç—Ä–∞—è —Ö–æ–¥—å–±–∞' },
                { id: 'beauty', icon: '‚ú®', label: '–ö—Ä–∞—Å–æ—Ç–∞', desc: '–ü–æ–∏—Å–∫ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ' }
            ];
            
            // –í–∏–±—Ä–∞—Ü–∏—è
            const vibrate = (pattern) => {
                if ('vibrate' in navigator) {
                    navigator.vibrate(pattern);
                }
            };
            
            // –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä
            useEffect(() => {
                if (!autoDetectEnabled || activeWalk) return;
                
                let lastAccel = { x: 0, y: 0, z: 0 };
                let movementCount = 0;
                let checkInterval;
                let motionHandler;
                
                const startAutoDetection = () => {
                    if ('DeviceMotionEvent' in window) {
                        // –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è iOS 13+
                        if (typeof DeviceMotionEvent.requestPermission === 'function') {
                            DeviceMotionEvent.requestPermission()
                                .then(response => {
                                    if (response === 'granted') {
                                        setupMotionListener();
                                    }
                                })
                                .catch(console.error);
                        } else {
                            setupMotionListener();
                        }
                    }
                };
                
                const setupMotionListener = () => {
                    motionHandler = (event) => {
                        const accel = event.accelerationIncludingGravity;
                        if (!accel) return;
                        
                        const deltaX = Math.abs(accel.x - lastAccel.x);
                        const deltaY = Math.abs(accel.y - lastAccel.y);
                        const deltaZ = Math.abs(accel.z - lastAccel.z);
                        const totalDelta = deltaX + deltaY + deltaZ;
                        
                        lastAccel = { x: accel.x, y: accel.y, z: accel.z };
                        
                        // –ü–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —à–∞–≥–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)
                        if (totalDelta > 3 && totalDelta < 20) {
                            movementCount++;
                        }
                    };
                    
                    window.addEventListener('devicemotion', motionHandler);
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
                    checkInterval = setInterval(() => {
                        if (movementCount >= 8 && !activeWalk && !showTypeSelector) {
                            // –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –¥–≤–∏–∂–µ–Ω–∏–µ!
                            console.log('–î–≤–∏–∂–µ–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ! –í–∏–±—Ä–∞—Ü–∏—è...');
                            setIsMoving(true);
                            vibrate([300, 150, 300]); // –£—Å–∏–ª–µ–Ω–Ω–∞—è –¥–≤–æ–π–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏
                            setShowTypeSelector(true);
                            
                            // –ê–≤—Ç–æ—Å—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ –µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω —Ç–∏–ø
                            setTimeout(() => {
                                setShowTypeSelector(prev => {
                                    if (prev && !activeWalk) {
                                        // –ó–∞–ø—É—Å–∫–∞–µ–º —Å —Ç–∏–ø–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "–≥–æ—Ä–æ–¥"
                                        console.log('–ê–≤—Ç–æ—Å—Ç–∞—Ä—Ç –ø—Ä–æ–≥—É–ª–∫–∏! –í–∏–±—Ä–∞—Ü–∏—è...');
                                        setWalkType('city');
                                        startWalkAuto('city');
                                    }
                                    return false;
                                });
                            }, 10000);
                        }
                        movementCount = 0;
                    }, 5000);
                };
                
                startAutoDetection();
                
                return () => {
                    if (motionHandler) {
                        window.removeEventListener('devicemotion', motionHandler);
                    }
                    if (checkInterval) {
                        clearInterval(checkInterval);
                    }
                };
            }, [autoDetectEnabled, activeWalk, showTypeSelector]);
            
            // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–π –ø—Ä–æ–≥—É–ª–∫–∏
            useEffect(() => {
                if (!activeWalk || !autoDetectEnabled) return;
                
                lastMovementRef.current = Date.now();
                let movementCount = 0;
                let checkInterval;
                let motionHandler;
                
                const setupActiveWalkMotionListener = () => {
                    if ('DeviceMotionEvent' in window) {
                        motionHandler = (event) => {
                            const accel = event.accelerationIncludingGravity;
                            if (!accel) return;
                            
                            const totalDelta = Math.abs(accel.x) + Math.abs(accel.y) + Math.abs(accel.z);
                            
                            // –ü–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
                            if (totalDelta > 12) {
                                movementCount++;
                                if (movementCount >= 3) {
                                    lastMovementRef.current = Date.now();
                                    movementCount = 0;
                                    setNoMovementTime(0);
                                    setShowStopWarning(false);
                                }
                            }
                        };
                        
                        window.addEventListener('devicemotion', motionHandler);
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
                        checkInterval = setInterval(() => {
                            const timeSinceMovement = Math.floor((Date.now() - lastMovementRef.current) / 1000);
                            setNoMovementTime(timeSinceMovement);
                            
                            // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ 7 —Å–µ–∫—É–Ω–¥
                            if (timeSinceMovement >= 7 && timeSinceMovement < 10) {
                                setShowStopWarning(true);
                                if (timeSinceMovement === 7) {
                                    vibrate([100, 50, 100]); // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∞—è –≤–∏–±—Ä–∞—Ü–∏—è
                                }
                            }
                            
                            // –ê–≤—Ç–æ—Å—Ç–æ–ø –ø–æ—Å–ª–µ 10 —Å–µ–∫—É–Ω–¥ –±–µ–∑ –¥–≤–∏–∂–µ–Ω–∏—è
                            if (timeSinceMovement >= 10) {
                                vibrate([200, 100, 200, 100, 300]); // –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è
                                finishWalkAuto();
                            }
                        }, 1000);
                    }
                };
                
                setupActiveWalkMotionListener();
                
                return () => {
                    if (motionHandler) {
                        window.removeEventListener('devicemotion', motionHandler);
                    }
                    if (checkInterval) {
                        clearInterval(checkInterval);
                    }
                };
            }, [activeWalk, autoDetectEnabled]);
            
            // –ê–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏
            const finishWalkAuto = () => {
                const duration = Math.round(walkTimer / 60);
                if (duration > 0) {
                    const hour = new Date().getHours();
                    let timeOfDay = 'day';
                    if (hour >= 5 && hour < 8) timeOfDay = 'sunrise';
                    else if (hour >= 17 && hour < 20) timeOfDay = 'sunset';
                    else if (hour >= 20 || hour < 5) timeOfDay = 'night';
                    
                    DB.addWalk({
                        duration,
                        type: walkType,
                        mood: walkMood,
                        notes: walkNotes + (walkNotes ? '\n' : '') + '(–∞–≤—Ç–æ-—Å—Ç–æ–ø)',
                        timeOfDay
                    });
                    setStats(DB.getWalkStats());
                    setMotivation('‚èπÔ∏è –ü—Ä–æ–≥—É–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏');
                }
                setActiveWalk(null);
                setWalkTimer(0);
                setWalkNotes('');
                setIsMoving(false);
                setNoMovementTime(0);
                setShowStopWarning(false);
            };
            
            // –ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é –º–æ—Ç–∏–≤–∞—Ü–∏—é
            const getMotivation = (type) => {
                const messages = WALK_MOTIVATIONS[type];
                return messages[Math.floor(Math.random() * messages.length)];
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
            const checkAchievements = () => {
                const earnedAchievements = WALK_ACHIEVEMENTS.filter(a => a.condition(stats));
                return earnedAchievements;
            };
            
            // –¢–∞–π–º–µ—Ä –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –ø—Ä–æ–≥—É–ª–∫–∏
            useEffect(() => {
                let interval;
                if (activeWalk) {
                    interval = setInterval(() => {
                        setWalkTimer(Math.floor((Date.now() - activeWalk) / 1000));
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [activeWalk]);
            
            // –ù–∞—á–∞—Ç—å –ø—Ä–æ–≥—É–ª–∫—É (—Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫)
            const startWalk = () => {
                setActiveWalk(Date.now());
                setMotivation(getMotivation('start'));
                vibrate(100);
            };
            
            // –ù–∞—á–∞—Ç—å –ø—Ä–æ–≥—É–ª–∫—É (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫)
            const startWalkAuto = (type) => {
                setWalkType(type || 'city');
                setActiveWalk(Date.now());
                setMotivation('üö∂ –ü—Ä–æ–≥—É–ª–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!');
                setShowTypeSelector(false);
                vibrate([200, 100, 200, 100, 300]); // –î–ª–∏–Ω–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—Ç–∞—Ä—Ç–∞
            };
            
            // –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø—Ä–∏ –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏
            const selectTypeAndStart = (type) => {
                setWalkType(type);
                setShowTypeSelector(false);
                startWalkAuto(type);
            };
            
            // –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≥—É–ª–∫—É
            const finishWalk = () => {
                const duration = Math.round(walkTimer / 60);
                if (duration > 0) {
                    const hour = new Date().getHours();
                    let timeOfDay = 'day';
                    if (hour >= 5 && hour < 8) timeOfDay = 'sunrise';
                    else if (hour >= 17 && hour < 20) timeOfDay = 'sunset';
                    else if (hour >= 20 || hour < 5) timeOfDay = 'night';
                    
                    DB.addWalk({
                        duration,
                        type: walkType,
                        mood: walkMood,
                        notes: walkNotes,
                        timeOfDay
                    });
                    setStats(DB.getWalkStats());
                    setMotivation(getMotivation('complete'));
                    vibrate([100, 100, 300]); // –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è
                }
                setActiveWalk(null);
                setWalkTimer(0);
                setWalkNotes('');
                setIsMoving(false);
            };
            
            // –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—É–ª–∫—É –≤—Ä—É—á–Ω—É—é
            const addManualWalk = () => {
                const hour = new Date().getHours();
                let timeOfDay = 'day';
                if (hour >= 5 && hour < 8) timeOfDay = 'sunrise';
                else if (hour >= 17 && hour < 20) timeOfDay = 'sunset';
                
                DB.addWalk({
                    duration: walkDuration,
                    type: walkType,
                    mood: walkMood,
                    notes: walkNotes,
                    timeOfDay
                });
                setStats(DB.getWalkStats());
                setShowAddWalk(false);
                setWalkNotes('');
                setMotivation(getMotivation('complete'));
            };
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
            const toggleAutoDetect = () => {
                const newValue = !autoDetectEnabled;
                setAutoDetectEnabled(newValue);
                DB.set('walk_auto_detect', newValue);
                if (newValue) {
                    vibrate(50);
                }
            };
            
            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };
            
            const achievements = checkAchievements();
            const weekProgress = Math.min(100, (stats.weekMinutes / goal.weeklyMinutes) * 100);
            
            // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –ø—Ä–æ–≥—É–ª–∫–∏
            if (showTypeSelector) {
                return (
                    <div className="fade-in" style={{ padding: '1rem' }}>
                        <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>
                            <div style={{ fontSize: '3rem', marginBottom: '0.5rem' }}>üö∂</div>
                            <h2>–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –¥–≤–∏–∂–µ–Ω–∏–µ!</h2>
                            <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem' }}>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–≥—É–ª–∫–∏</p>
                        </div>
                        
                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
                            {WALK_TYPES.map(t => (
                                <div 
                                    key={t.id}
                                    className="card card-clickable"
                                    style={{ 
                                        display: 'flex', 
                                        alignItems: 'center', 
                                        gap: '1rem',
                                        background: t.id === 'city' ? '#FEF3C7' : 'white'
                                    }}
                                    onClick={() => selectTypeAndStart(t.id)}
                                >
                                    <span style={{ fontSize: '2rem' }}>{t.icon}</span>
                                    <div>
                                        <strong>{t.label}</strong>
                                        <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)' }}>{t.desc}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                        
                        <div style={{ textAlign: 'center', marginTop: '1rem' }}>
                            <p style={{ fontSize: '0.75rem', color: 'var(--text-tertiary)' }}>
                                –ê–≤—Ç–æ—Å—Ç–∞—Ä—Ç ¬´–ì–æ—Ä–æ–¥¬ª —á–µ—Ä–µ–∑ 10 —Å–µ–∫...
                            </p>
                            <button 
                                className="btn btn-secondary btn-small" 
                                style={{ marginTop: '0.5rem' }}
                                onClick={() => { setShowTypeSelector(false); setIsMoving(false); }}
                            >
                                –û—Ç–º–µ–Ω–∞
                            </button>
                        </div>
                    </div>
                );
            }
            
            // –≠–∫—Ä–∞–Ω –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
            if (showAnalytics) {
                const dayNames = ['–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±'];
                const maxMinutes = correlation?.last14Days ? Math.max(...correlation.last14Days.map(d => d.walkMinutes), 60) : 60;
                
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => setShowAnalytics(false)}>‚Üê –ù–∞–∑–∞–¥</button>
                            <h2 style={{ marginLeft: '0.75rem' }}>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                        </div>
                        
                        {/* –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ-–ø—Ä–æ–≥—É–ª–∫–∏ */}
                        {correlation?.moodImprovement && (
                            <div className="card" style={{ background: '#F0FDF4', marginBottom: '0.75rem' }}>
                                <h3 style={{ marginBottom: '0.5rem' }}>üß† –í–ª–∏—è–Ω–∏–µ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</h3>
                                <div style={{ fontSize: '2rem', fontWeight: 'bold', color: 'var(--harmony-green)', textAlign: 'center' }}>
                                    +{correlation.moodImprovement}%
                                </div>
                                <p style={{ fontSize: '0.85rem', textAlign: 'center', color: 'var(--text-secondary)' }}>
                                    —É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –≤ –¥–Ω–∏ —Å –ø—Ä–æ–≥—É–ª–∫–∞–º–∏
                                </p>
                            </div>
                        )}
                        
                        {/* –ì—Ä–∞—Ñ–∏–∫ –∑–∞ 14 –¥–Ω–µ–π */}
                        {correlation?.last14Days && (
                            <div className="card" style={{ marginBottom: '0.75rem' }}>
                                <h3 style={{ marginBottom: '0.75rem' }}>üìà –ü–æ—Å–ª–µ–¥–Ω–∏–µ 14 –¥–Ω–µ–π</h3>
                                <div style={{ display: 'flex', alignItems: 'flex-end', gap: '4px', height: '100px' }}>
                                    {correlation.last14Days.map((d, idx) => {
                                        const height = d.walkMinutes > 0 ? Math.max(10, (d.walkMinutes / maxMinutes) * 100) : 5;
                                        const date = new Date(d.date);
                                        const isToday = date.toDateString() === new Date().toDateString();
                                        return (
                                            <div key={idx} style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
                                                <div style={{ 
                                                    width: '100%', 
                                                    height: `${height}%`,
                                                    background: d.walkMinutes > 0 
                                                        ? `linear-gradient(to top, var(--amber), var(--golden-light))` 
                                                        : 'var(--earth-light)',
                                                    borderRadius: '4px 4px 0 0',
                                                    border: isToday ? '2px solid var(--amber)' : 'none'
                                                }} />
                                                <span style={{ fontSize: '0.55rem', color: 'var(--text-tertiary)', marginTop: '2px' }}>
                                                    {date.getDate()}
                                                </span>
                                            </div>
                                        );
                                    })}
                                </div>
                                <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '0.5rem', fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>
                                    <span>14 –¥–Ω–µ–π –Ω–∞–∑–∞–¥</span>
                                    <span>–°–µ–≥–æ–¥–Ω—è</span>
                                </div>
                            </div>
                        )}
                        
                        {/* –õ—É—á—à–∏–π –¥–µ–Ω—å */}
                        {correlation?.bestDay && (
                            <div className="card" style={{ marginBottom: '0.75rem' }}>
                                <h3 style={{ marginBottom: '0.5rem' }}>üèÜ –õ—É—á—à–∏–π –¥–µ–Ω—å –¥–ª—è –ø—Ä–æ–≥—É–ª–æ–∫</h3>
                                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '1rem' }}>
                                    <span style={{ fontSize: '2rem', fontWeight: 'bold', color: 'var(--amber)' }}>{correlation.bestDay}</span>
                                    <div style={{ fontSize: '0.85rem', color: 'var(--text-secondary)' }}>
                                        –≤ —Å—Ä–µ–¥–Ω–µ–º {correlation.bestDayMinutes} –º–∏–Ω
                                    </div>
                                </div>
                            </div>
                        )}
                        
                        {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º */}
                        <div className="card" style={{ marginBottom: '0.75rem' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>üåø –¢–∏–ø—ã –ø—Ä–æ–≥—É–ª–æ–∫</h3>
                            <div style={{ display: 'flex', justifyContent: 'space-around', fontSize: '0.85rem' }}>
                                <div style={{ textAlign: 'center' }}>
                                    <div style={{ fontSize: '1.5rem' }}>üèôÔ∏è</div>
                                    <div style={{ fontWeight: 'bold' }}>{stats.cityWalks || 0}</div>
                                    <div style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>–≤ –≥–æ—Ä–æ–¥–µ</div>
                                </div>
                                <div style={{ textAlign: 'center' }}>
                                    <div style={{ fontSize: '1.5rem' }}>üå≥</div>
                                    <div style={{ fontWeight: 'bold' }}>{stats.natureWalks}</div>
                                    <div style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>–≤ –ø—Ä–∏—Ä–æ–¥–µ</div>
                                </div>
                                <div style={{ textAlign: 'center' }}>
                                    <div style={{ fontSize: '1.5rem' }}>üåÖ</div>
                                    <div style={{ fontWeight: 'bold' }}>{stats.sunriseWalks}</div>
                                    <div style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>–Ω–∞ —Ä–∞—Å—Å–≤–µ—Ç–µ</div>
                                </div>
                                <div style={{ textAlign: 'center' }}>
                                    <div style={{ fontSize: '1.5rem' }}>üåá</div>
                                    <div style={{ fontWeight: 'bold' }}>{stats.sunsetWalks}</div>
                                    <div style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>–Ω–∞ –∑–∞–∫–∞—Ç–µ</div>
                                </div>
                            </div>
                        </div>
                        
                        {/* –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –Ω–æ—Ä–º–æ–π –í–û–ó */}
                        <div className="card" style={{ background: '#EFF6FF' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>üìã –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –Ω–æ—Ä–º–æ–π –í–û–ó</h3>
                            <p style={{ fontSize: '0.85rem', marginBottom: '0.5rem' }}>
                                –í–û–ó —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç 150 –º–∏–Ω—É—Ç —É–º–µ—Ä–µ–Ω–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –Ω–µ–¥–µ–ª—é.
                            </p>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                <div style={{ flex: 1 }}>
                                    <div className="progress-bar" style={{ height: '10px' }}>
                                        <div className="progress-fill" style={{ width: `${Math.min(100, stats.weekMinutes / 150 * 100)}%` }}></div>
                                    </div>
                                </div>
                                <span style={{ fontSize: '0.85rem', fontWeight: 'bold' }}>{Math.round(stats.weekMinutes / 150 * 100)}%</span>
                            </div>
                            <p style={{ fontSize: '0.75rem', color: 'var(--text-tertiary)', marginTop: '0.5rem' }}>
                                {stats.weekMinutes >= 150 
                                    ? '‚úÖ –í—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ –Ω–æ—Ä–º—É!' 
                                    : `–û—Å—Ç–∞–ª–æ—Å—å ${150 - stats.weekMinutes} –º–∏–Ω—É—Ç –¥–æ –Ω–æ—Ä–º—ã`}
                            </p>
                        </div>
                    </div>
                );
            }
            
            // –≠–∫—Ä–∞–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–¥–æ—Ä–æ–≤—å–µ
            if (showHealthInfo) {
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => setShowHealthInfo(false)}>‚Üê –ù–∞–∑–∞–¥</button>
                            <h2 style={{ marginLeft: '0.75rem' }}>‚ù§Ô∏è –ü–æ–ª—å–∑–∞ –ø—Ä–æ–≥—É–ª–æ–∫</h2>
                        </div>
                        
                        {HEALTH_INSIGHTS.map((insight, idx) => (
                            <div key={idx} className="card" style={{ marginBottom: '0.5rem' }}>
                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>
                                    <span style={{ fontSize: '2rem' }}>{insight.icon}</span>
                                    <div>
                                        <strong>{insight.title}</strong>
                                        <p style={{ fontSize: '0.85rem', color: 'var(--text-secondary)', margin: '0.25rem 0' }}>{insight.fact}</p>
                                        <p style={{ fontSize: '0.8rem', color: 'var(--harmony-green)' }}>‚Üí {insight.benefit}</p>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                );
            }
            
            // –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≥—É–ª–æ–∫
            if (showHistory) {
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => setShowHistory(false)}>‚Üê –ù–∞–∑–∞–¥</button>
                            <h2 style={{ marginLeft: '0.75rem' }}>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≥—É–ª–æ–∫</h2>
                        </div>
                        
                        {walks.length === 0 ? (
                            <div style={{ textAlign: 'center', padding: '2rem' }}>
                                <div style={{ fontSize: '2.5rem', marginBottom: '0.5rem' }}>üö∂</div>
                                <p style={{ color: 'var(--text-secondary)' }}>–ü—Ä–æ–≥—É–ª–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                            </div>
                        ) : (
                            walks.slice().reverse().slice(0, 20).map((w, idx) => {
                                const date = new Date(w.date);
                                const typeIcons = { sunrise: 'üåÖ', sunset: 'üåá', forest: 'üå≥', observe: 'üëÅÔ∏è', beauty: '‚ú®', active: 'üèÉ', night: 'üåô', day: '‚òÄÔ∏è', city: 'üèôÔ∏è' };
                                return (
                                    <div key={idx} className="card" style={{ marginBottom: '0.5rem' }}>
                                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                                            <div>
                                                <span style={{ fontSize: '1.25rem', marginRight: '0.5rem' }}>{typeIcons[w.timeOfDay] || 'üö∂'}</span>
                                                <strong>{w.duration} –º–∏–Ω</strong>
                                            </div>
                                            <span style={{ fontSize: '0.75rem', color: 'var(--text-tertiary)' }}>
                                                {date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' })}
                                            </span>
                                        </div>
                                        {w.notes && <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)', marginTop: '0.25rem' }}>{w.notes}</p>}
                                    </div>
                                );
                            })
                        )}
                    </div>
                );
            }
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏ –≤—Ä—É—á–Ω—É—é
            if (showAddWalk) {
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => setShowAddWalk(false)}>–û—Ç–º–µ–Ω–∞</button>
                            <button className="btn btn-primary btn-small" onClick={addManualWalk}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                        
                        <h2>–ó–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—É–ª–∫—É</h2>
                        
                        <div className="card" style={{ marginTop: '1rem' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {walkDuration} –º–∏–Ω</h3>
                            <input 
                                type="range" 
                                min="5" 
                                max="120" 
                                step="5" 
                                value={walkDuration} 
                                onChange={e => setWalkDuration(parseInt(e.target.value))}
                                style={{ width: '100%' }}
                            />
                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>
                                <span>5 –º–∏–Ω</span>
                                <span>1 —á–∞—Å</span>
                                <span>2 —á–∞—Å–∞</span>
                            </div>
                        </div>
                        
                        <div className="card" style={{ marginTop: '0.75rem' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>–¢–∏–ø –ø—Ä–æ–≥—É–ª–∫–∏</h3>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.4rem' }}>
                                {[
                                    { id: 'city', icon: 'üèôÔ∏è', label: '–ì–æ—Ä–æ–¥' },
                                    { id: 'observe', icon: 'üëÅÔ∏è', label: '–ù–∞–±–ª—é–¥–µ–Ω–∏–µ' },
                                    { id: 'forest', icon: 'üå≥', label: '–õ–µ—Å/–ü–∞—Ä–∫' },
                                    { id: 'active', icon: 'üèÉ', label: '–ê–∫—Ç–∏–≤–Ω–∞—è' },
                                    { id: 'beauty', icon: '‚ú®', label: '–ö—Ä–∞—Å–æ—Ç–∞' }
                                ].map(t => (
                                    <button 
                                        key={t.id}
                                        className={`btn btn-small ${walkType === t.id ? 'btn-primary' : 'btn-secondary'}`}
                                        onClick={() => setWalkType(t.id)}
                                    >
                                        {t.icon} {t.label}
                                    </button>
                                ))}
                            </div>
                        </div>
                        
                        <div className="card" style={{ marginTop: '0.75rem' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>–ó–∞–º–µ—Ç–∫–∏</h3>
                            <textarea 
                                className="journal-textarea" 
                                style={{ minHeight: '80px' }}
                                placeholder="–ß—Ç–æ –∑–∞–º–µ—Ç–∏–ª–∏? –ö–∞–∫ —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—Ç–µ?"
                                value={walkNotes}
                                onChange={e => setWalkNotes(e.target.value)}
                            />
                        </div>
                    </div>
                );
            }
            
            // –ê–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞
            if (activeWalk) {
                const currentType = WALK_TYPES.find(t => t.id === walkType) || WALK_TYPES[0];
                return (
                    <div className="fade-in" style={{ textAlign: 'center', padding: '1rem' }}>
                        <h1>üö∂ –ü—Ä–æ–≥—É–ª–∫–∞</h1>
                        
                        {/* –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± –æ—Å—Ç–∞–Ω–æ–≤–∫–µ */}
                        {showStopWarning && (
                            <div className="alert" style={{ 
                                background: '#FEF2F2', 
                                border: '2px solid #EF4444',
                                marginBottom: '1rem',
                                animation: 'pulse 1s infinite'
                            }}>
                                <span style={{ fontSize: '1.5rem' }}>‚ö†Ô∏è</span>
                                <div style={{ flex: 1 }}>
                                    <strong>–ù–µ—Ç –¥–≤–∏–∂–µ–Ω–∏—è!</strong>
                                    <p style={{ fontSize: '0.8rem' }}>–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ {10 - noMovementTime} —Å–µ–∫...</p>
                                </div>
                                <button 
                                    className="btn btn-small btn-primary"
                                    onClick={() => { lastMovementRef.current = Date.now(); setNoMovementTime(0); setShowStopWarning(false); vibrate(50); }}
                                >
                                    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                                </button>
                            </div>
                        )}
                        
                        {/* –¢–µ–∫—É—â–∏–π —Ç–∏–ø */}
                        <div style={{ 
                            display: 'inline-flex', 
                            alignItems: 'center', 
                            gap: '0.5rem', 
                            padding: '0.5rem 1rem',
                            background: 'var(--cream-warm)',
                            borderRadius: '20px',
                            marginBottom: '1rem'
                        }}>
                            <span style={{ fontSize: '1.25rem' }}>{currentType.icon}</span>
                            <span style={{ fontWeight: '600' }}>{currentType.label}</span>
                        </div>
                        
                        <div style={{ 
                            fontSize: '3.5rem', 
                            fontWeight: 'bold', 
                            color: 'var(--amber)', 
                            margin: '1.5rem 0',
                            fontFamily: 'monospace'
                        }}>
                            {formatTime(walkTimer)}
                        </div>
                        
                        <div className="card" style={{ background: '#F0FDF4', textAlign: 'left', marginBottom: '1rem' }}>
                            <p style={{ fontSize: '1rem' }}>{motivation || getMotivation('during')}</p>
                        </div>
                        
                        {/* Health insight –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ–≥—É–ª–∫–∏ */}
                        <div className="card" style={{ background: '#EFF6FF', textAlign: 'left', marginBottom: '1rem' }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.25rem' }}>
                                <span style={{ fontSize: '1.25rem' }}>{healthInsight.icon}</span>
                                <strong style={{ fontSize: '0.9rem' }}>{healthInsight.title}</strong>
                            </div>
                            <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)' }}>{healthInsight.fact}</p>
                        </div>
                        
                        {/* –°–º–µ–Ω–∞ —Ç–∏–ø–∞ –ø—Ä–æ–≥—É–ª–∫–∏ */}
                        <div className="card" style={{ marginBottom: '1rem' }}>
                            <h4 style={{ marginBottom: '0.5rem', fontSize: '0.85rem' }}>–ò–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø</h4>
                            <div style={{ display: 'flex', gap: '0.3rem', flexWrap: 'wrap', justifyContent: 'center' }}>
                                {WALK_TYPES.map(t => (
                                    <button 
                                        key={t.id}
                                        className={`btn btn-small ${walkType === t.id ? 'btn-primary' : 'btn-secondary'}`}
                                        onClick={() => setWalkType(t.id)}
                                        style={{ padding: '0.4rem 0.6rem' }}
                                    >
                                        {t.icon}
                                    </button>
                                ))}
                            </div>
                        </div>
                        
                        {walkTimer > 60 && walkTimer % 300 < 5 && (
                            <div className="alert alert-info" style={{ textAlign: 'left' }}>
                                <span>üí°</span>
                                <div>{getMotivation('during')}</div>
                            </div>
                        )}
                        
                        <div className="card" style={{ marginTop: '1rem' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>–ó–∞–º–µ—Ç–∫–∏</h3>
                            <textarea 
                                className="journal-textarea" 
                                style={{ minHeight: '60px' }}
                                placeholder="–ß—Ç–æ –∑–∞–º–µ—á–∞–µ—Ç–µ –≤–æ–∫—Ä—É–≥?"
                                value={walkNotes}
                                onChange={e => setWalkNotes(e.target.value)}
                            />
                        </div>
                        
                        <button 
                            className="btn btn-primary btn-full" 
                            style={{ marginTop: '1rem' }}
                            onClick={finishWalk}
                        >
                            ‚úì –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≥—É–ª–∫—É
                        </button>
                    </div>
                );
            }
            
            // –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Ç—Ä–µ–∫–µ—Ä–∞
            return (
                <div className="fade-in">
                    <h1>üö∂ –¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–≥—É–ª–æ–∫</h1>
                    
                    {/* –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è */}
                    <div 
                        className="card" 
                        style={{ 
                            marginTop: '0.75rem', 
                            display: 'flex', 
                            justifyContent: 'space-between', 
                            alignItems: 'center',
                            background: autoDetectEnabled ? '#F0FDF4' : 'var(--cream-light)'
                        }}
                    >
                        <div>
                            <strong style={{ fontSize: '0.9rem' }}>üì± –ê–≤—Ç–æ—Ç—Ä–µ–∫–∏–Ω–≥</strong>
                            <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                {autoDetectEnabled ? '–í–∫–ª ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è—é –¥–≤–∏–∂–µ–Ω–∏–µ' : '–í—ã–∫–ª'}
                            </p>
                        </div>
                        <div 
                            onClick={toggleAutoDetect}
                            style={{ 
                                width: '50px', 
                                height: '28px', 
                                borderRadius: '14px', 
                                background: autoDetectEnabled ? 'var(--harmony-green)' : '#ccc',
                                position: 'relative',
                                cursor: 'pointer',
                                transition: 'background 0.3s'
                            }}
                        >
                            <div style={{
                                width: '24px',
                                height: '24px',
                                borderRadius: '12px',
                                background: 'white',
                                position: 'absolute',
                                top: '2px',
                                left: autoDetectEnabled ? '24px' : '2px',
                                transition: 'left 0.3s',
                                boxShadow: '0 1px 3px rgba(0,0,0,0.2)'
                            }} />
                        </div>
                    </div>
                    
                    {isMoving && !activeWalk && (
                        <div className="alert alert-info" style={{ marginTop: '0.5rem' }}>
                            <span>üö∂</span>
                            <div>–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –¥–≤–∏–∂–µ–Ω–∏–µ...</div>
                        </div>
                    )}
                    
                    {/* –ú–æ—Ç–∏–≤–∞—Ü–∏—è */}
                    {motivation && (
                        <div className="card" style={{ background: '#F0FDF4', marginTop: '0.75rem' }}>
                            <p style={{ fontSize: '1rem', textAlign: 'center' }}>{motivation}</p>
                        </div>
                    )}
                    
                    {/* –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –µ—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –≥—É–ª—è–ª–∏ */}
                    {!stats.todayWalked && !motivation && (
                        <div className="card" style={{ background: '#FEF3C7', marginTop: '0.75rem' }}>
                            <p style={{ fontSize: '0.9rem' }}>{getMotivation('reminder')}</p>
                        </div>
                    )}
                    
                    {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
                    <div className="grid-2" style={{ marginTop: '1rem' }}>
                        <div className="stat-card">
                            <div className="stat-value">{stats.currentStreak}</div>
                            <div className="stat-label">–¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ üî•</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-value">{stats.weekMinutes}</div>
                            <div className="stat-label">–º–∏–Ω—É—Ç –∑–∞ –Ω–µ–¥–µ–ª—é</div>
                        </div>
                    </div>
                    
                    {/* –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–µ–¥–µ–ª–∏ */}
                    <div className="card" style={{ marginTop: '0.75rem' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '0.85rem', marginBottom: '0.5rem' }}>
                            <span>–¶–µ–ª—å –Ω–µ–¥–µ–ª–∏</span>
                            <span>{stats.weekMinutes} / {goal.weeklyMinutes} –º–∏–Ω</span>
                        </div>
                        <div className="progress-bar" style={{ height: '8px' }}>
                            <div className="progress-fill" style={{ width: `${weekProgress}%` }}></div>
                        </div>
                        {weekProgress >= 100 && (
                            <p style={{ fontSize: '0.8rem', color: 'var(--harmony-green)', marginTop: '0.5rem', textAlign: 'center' }}>
                                üéâ –¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞!
                            </p>
                        )}
                    </div>
                    
                    {/* Health Insight */}
                    <div className="card card-clickable" style={{ background: '#EFF6FF', marginTop: '0.75rem' }} onClick={() => setShowHealthInfo(true)}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                            <span style={{ fontSize: '1.5rem' }}>{healthInsight.icon}</span>
                            <div style={{ flex: 1 }}>
                                <strong style={{ fontSize: '0.9rem' }}>{healthInsight.title}</strong>
                                <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)' }}>{healthInsight.benefit}</p>
                            </div>
                            <span style={{ color: 'var(--text-tertiary)' }}>‚Üí</span>
                        </div>
                    </div>
                    
                    {/* –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º */}
                    {correlation?.moodImprovement && parseInt(correlation.moodImprovement) > 0 && (
                        <div className="card card-clickable" style={{ background: '#F0FDF4', marginTop: '0.75rem' }} onClick={() => setShowAnalytics(true)}>
                            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
                                <div>
                                    <strong>üß† –ü—Ä–æ–≥—É–ª–∫–∏ —É–ª—É—á—à–∞—é—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</strong>
                                    <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)' }}>
                                        –Ω–∞ +{correlation.moodImprovement}% –≤ –¥–Ω–∏ —Å –ø—Ä–æ–≥—É–ª–∫–∞–º–∏
                                    </p>
                                </div>
                                <span style={{ color: 'var(--text-tertiary)' }}>‚Üí</span>
                            </div>
                        </div>
                    )}
                    
                    {/* –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è */}
                    <div className="recommendation-card" style={{ marginTop: '0.75rem' }}>
                        <div className="recommendation-title">üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</div>
                        <p style={{ fontSize: '0.85rem', marginBottom: '0.5rem' }}>{recommendation.tip}</p>
                        <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)' }}>
                            –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {recommendation.duration} –º–∏–Ω
                        </p>
                    </div>
                    
                    {/* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */}
                    <div style={{ display: 'flex', gap: '0.5rem', marginTop: '1rem' }}>
                        <button className="btn btn-primary" style={{ flex: 1 }} onClick={startWalk}>
                            ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –ø—Ä–æ–≥—É–ª–∫—É
                        </button>
                        <button className="btn btn-secondary" onClick={() => setShowAddWalk(true)}>
                            ‚úèÔ∏è
                        </button>
                    </div>
                    
                    {/* –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è */}
                    <div style={{ display: 'flex', gap: '0.5rem', marginTop: '0.75rem' }}>
                        <button className="btn btn-secondary btn-small" style={{ flex: 1 }} onClick={() => setShowAnalytics(true)}>
                            üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
                        </button>
                        <button className="btn btn-secondary btn-small" style={{ flex: 1 }} onClick={() => setShowHistory(true)}>
                            üìã –ò—Å—Ç–æ—Ä–∏—è
                        </button>
                    </div>
                    
                    {/* –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è */}
                    {achievements.length > 0 && (
                        <>
                            <h3 style={{ marginTop: '1.5rem', marginBottom: '0.5rem' }}>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è ({achievements.length}/{WALK_ACHIEVEMENTS.length})</h3>
                            <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>
                                {achievements.map(a => (
                                    <div 
                                        key={a.id} 
                                        style={{ 
                                            padding: '0.5rem', 
                                            borderRadius: '12px', 
                                            background: 'var(--cream-warm)',
                                            textAlign: 'center',
                                            minWidth: '70px'
                                        }}
                                    >
                                        <div style={{ fontSize: '1.5rem' }}>{a.icon}</div>
                                        <div style={{ fontSize: '0.65rem' }}>{a.name}</div>
                                    </div>
                                ))}
                            </div>
                        </>
                    )}
                    
                    {/* –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
                    <div className="card" style={{ marginTop: '1rem' }}>
                        <h3 style={{ marginBottom: '0.5rem' }}>üìà –í—Å–µ–≥–æ</h3>
                        <div style={{ display: 'flex', justifyContent: 'space-around', fontSize: '0.85rem' }}>
                            <div style={{ textAlign: 'center' }}>
                                <div style={{ fontWeight: 'bold', color: 'var(--amber)' }}>{stats.totalWalks}</div>
                                <div style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>–ø—Ä–æ–≥—É–ª–æ–∫</div>
                            </div>
                            <div style={{ textAlign: 'center' }}>
                                <div style={{ fontWeight: 'bold', color: 'var(--amber)' }}>{Math.round(stats.totalMinutes / 60)}—á</div>
                                <div style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>–Ω–∞ –≤–æ–∑–¥—É—Ö–µ</div>
                            </div>
                            <div style={{ textAlign: 'center' }}>
                                <div style={{ fontWeight: 'bold', color: 'var(--amber)' }}>{stats.averageDuration}</div>
                                <div style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>–º–∏–Ω —Å—Ä–µ–¥–Ω—è—è</div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function PracticePage({ practice, setPage }) {
            const [step, setStep] = useState(-1);
            if (!practice) return null;
            
            const completePractice = () => {
                DB.addPractice(practice.id, practice.duration);
                setStep(-2);
            };
            
            if (step === -1) {
                return (
                    <div className="fade-in">
                        <button className="btn btn-secondary btn-small" onClick={() => setPage('practices')} style={{ marginBottom: '1rem' }}>‚Üê –ù–∞–∑–∞–¥</button>
                        <div style={{ textAlign: 'center', padding: '1.5rem', borderRadius: '16px', background: practice.bg, marginBottom: '1rem' }}>
                            <div style={{ fontSize: '2.5rem', marginBottom: '0.5rem' }}>{CATEGORIES.find(c => c.id === practice.category)?.icon}</div>
                            <h1>{practice.title}</h1>
                            <p style={{ marginTop: '0.25rem', opacity: 0.8 }}>‚è±Ô∏è {practice.duration} –º–∏–Ω</p>
                        </div>
                        <div className="card">
                            <p>{practice.short}</p>
                        </div>
                        <button className="btn btn-primary btn-full" style={{ marginTop: '1rem' }} onClick={() => setStep(0)}>
                            ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å
                        </button>
                    </div>
                );
            }
            
            if (step === -2) {
                return (
                    <div style={{ textAlign: 'center', padding: '3rem 1rem' }} className="fade-in">
                        <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>‚ú®</div>
                        <h1>–ó–∞–≤–µ—Ä—à–µ–Ω–æ</h1>
                        <p style={{ marginTop: '0.5rem', marginBottom: '1.5rem' }}>–ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –≤—Ä–µ–º—è —Å —Å–æ–±–æ–π</p>
                        <button className="btn btn-primary" onClick={() => setPage('home')}>–ì–æ—Ç–æ–≤–æ</button>
                    </div>
                );
            }
            
            return (
                <div className="fade-in">
                    <div style={{ display: 'flex', alignItems: 'center', marginBottom: '0.75rem' }}>
                        <button className="btn btn-secondary btn-small" onClick={() => setPage('practices')}>‚Üê</button>
                        <span style={{ marginLeft: 'auto', color: 'var(--text-tertiary)', fontSize: '0.85rem' }}>
                            {step + 1} / {practice.steps.length}
                        </span>
                    </div>
                    <div className="progress-bar" style={{ marginBottom: '1rem' }}>
                        <div className="progress-fill" style={{ width: `${((step + 1) / practice.steps.length) * 100}%` }}></div>
                    </div>
                    <div className="card" style={{ background: practice.bg }}>
                        <div className="step-card">
                            <div className="step-num">{step + 1}</div>
                            <p className="step-text">{practice.steps[step]}</p>
                        </div>
                    </div>
                    <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '1rem' }}>
                        {step > 0 && <button className="btn btn-secondary" onClick={() => setStep(step - 1)}>‚Üê –ù–∞–∑–∞–¥</button>}
                        <div style={{ flex: 1 }} />
                        <button className="btn btn-primary" onClick={() => step < practice.steps.length - 1 ? setStep(step + 1) : completePractice()}>
                            {step < practice.steps.length - 1 ? '–î–∞–ª–µ–µ ‚Üí' : '–ó–∞–≤–µ—Ä—à–∏—Ç—å ‚úì'}
                        </button>
                    </div>
                </div>
            );
        }

        function ChatPage() {
            const [messages, setMessages] = useState([]);
            const [input, setInput] = useState('');
            
            const send = () => {
                if (!input.trim()) return;
                setMessages([...messages, { role: 'user', text: input }]);
                setInput('');
                setTimeout(() => {
                    setMessages(m => [...m, { role: 'ai', text: LOCAL_RESPONSES[Math.floor(Math.random() * LOCAL_RESPONSES.length)] }]);
                }, 800);
            };
            
            return (
                <div className="chat-container fade-in">
                    <div className="chat-messages">
                        {messages.length === 0 && (
                            <div style={{ textAlign: 'center', padding: '2rem 1rem' }}>
                                <div style={{ fontSize: '2.5rem', marginBottom: '0.5rem' }}>üå§Ô∏è</div>
                                <h2>–ü—Ä–∏–≤–µ—Ç!</h2>
                                <p style={{ color: 'var(--text-secondary)', marginTop: '0.25rem' }}>–ö–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å?</p>
                                <div style={{ marginTop: '1rem', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
                                    {['–ú–Ω–µ —Å–µ–≥–æ–¥–Ω—è –Ω–µ–ø—Ä–æ—Å—Ç–æ...', '–•–æ—á—É –ø–æ–¥–µ–ª–∏—Ç—å—Å—è', '–†–∞—Å—Å–∫–∞–∂–∏ –æ –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö'].map(t => (
                                        <button key={t} className="btn btn-secondary btn-small" onClick={() => setInput(t)}>{t}</button>
                                    ))}
                                </div>
                            </div>
                        )}
                        {messages.map((m, i) => (
                            <div key={i} className={`chat-msg ${m.role}`}>
                                <div className={`chat-avatar ${m.role}`}>{m.role === 'user' ? 'üë§' : '‚òÄÔ∏è'}</div>
                                <div className="chat-bubble">{m.text}</div>
                            </div>
                        ))}
                    </div>
                    <div className="chat-input-container">
                        <input className="chat-input" placeholder="–ù–∞–ø–∏—à–∏..." value={input} onChange={e => setInput(e.target.value)} onKeyPress={e => e.key === 'Enter' && send()} />
                        <button className="btn btn-primary btn-small" onClick={send}>üì§</button>
                    </div>
                </div>
            );
        }

        function JournalPage() {
            const [entries, setEntries] = useState(DB.getJournal());
            const [writing, setWriting] = useState(false);
            const [text, setText] = useState('');
            const [state, setState] = useState('neutral');
            
            const save = () => {
                if (!text.trim()) return;
                DB.addJournalEntry({ content: text, state });
                setEntries(DB.getJournal());
                setText('');
                setWriting(false);
            };
            
            if (writing) {
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => setWriting(false)}>–û—Ç–º–µ–Ω–∞</button>
                            <button className="btn btn-primary btn-small" onClick={save} disabled={!text.trim()}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                        <h3>–ö–∞–∫ –Ω–∞ –¥—É—à–µ?</h3>
                        <div className="soul-states">
                            {SOUL_STATES.map(s => (
                                <div key={s.id} className={`soul-chip ${state === s.id ? 'active' : ''}`} onClick={() => setState(s.id)}>
                                    <span className="soul-emoji">{s.emoji}</span>
                                    <span className="soul-label">{s.label}</span>
                                </div>
                            ))}
                        </div>
                        <textarea className="journal-textarea" placeholder="–ù–∞–ø–∏—à–∏ —Å–≤–æ–∏ –º—ã—Å–ª–∏..." value={text} onChange={e => setText(e.target.value)} autoFocus style={{ marginTop: '1rem' }} />
                    </div>
                );
            }
            
            return (
                <div className="fade-in">
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>
                        <h1>–î–Ω–µ–≤–Ω–∏–∫</h1>
                        <button className="btn btn-primary btn-small" onClick={() => setWriting(true)}>‚úèÔ∏è –ù–æ–≤–∞—è</button>
                    </div>
                    {entries.length === 0 ? (
                        <div style={{ textAlign: 'center', padding: '2rem' }}>
                            <div style={{ fontSize: '2.5rem', marginBottom: '0.5rem' }}>üìù</div>
                            <p style={{ color: 'var(--text-secondary)' }}>–ó–∞–ø–∏—Å–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
                        </div>
                    ) : entries.slice(0, 10).map(e => {
                        const s = SOUL_STATES.find(st => st.id === e.state);
                        const date = new Date(e.date);
                        return (
                            <div key={e.id} className="journal-entry">
                                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '0.25rem' }}>
                                    <span>{s?.emoji}</span>
                                    <span style={{ fontSize: '0.75rem', color: 'var(--text-tertiary)' }}>
                                        {date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' })}
                                    </span>
                                </div>
                                <p style={{ fontSize: '0.85rem', color: 'var(--text-secondary)' }}>{e.content.slice(0, 100)}{e.content.length > 100 ? '...' : ''}</p>
                            </div>
                        );
                    })}
                </div>
            );
        }

        function ProfilePage() {
            const [profile, setProfile] = useState(DB.getProfile());
            const [name, setName] = useState(profile.name || '');
            const [showPHQ, setShowPHQ] = useState(false);
            const [showTemperamentTest, setShowTemperamentTest] = useState(false);
            const [testAnswers, setTestAnswers] = useState(Array(12).fill(null));
            const [testResult, setTestResult] = useState(null);
            const [phqAnswers, setPhqAnswers] = useState(Array(9).fill(null));
            const [phqResult, setPhqResult] = useState(null);
            const [saunaDay, setSaunaDayState] = useState(DB.getSaunaDay());
            const [darkTheme, setDarkTheme] = useState(DB.get('dark_theme', false));
            const practiceHistory = DB.getPracticeHistory();
            const journalEntries = DB.getJournal();
            const saunaHistory = DB.getSaunaHistory();
            const analysis = NATURAL_WISDOM.analyzeStateHistory(DB.getStateHistory());
            
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
            useEffect(() => {
                if (darkTheme) {
                    document.documentElement.classList.add('dark-theme');
                } else {
                    document.documentElement.classList.remove('dark-theme');
                }
            }, [darkTheme]);
            
            const toggleDarkTheme = () => {
                const newValue = !darkTheme;
                setDarkTheme(newValue);
                DB.set('dark_theme', newValue);
            };
            
            const DAY_NAMES = [
                { id: 0, short: '–í—Å', full: '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', icon: '‚òÄÔ∏è', theme: '–°–≤–µ—Ç', oils: '–∞–ø–µ–ª—å—Å–∏–Ω, –ª–∞–¥–∞–Ω' },
                { id: 1, short: '–ü–Ω', full: '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', icon: 'üíß', theme: '–í–æ–¥–∞', oils: '–ª–∞–≤–∞–Ω–¥–∞, —Ä–æ–º–∞—à–∫–∞' },
                { id: 2, short: '–í—Ç', full: '–í—Ç–æ—Ä–Ω–∏–∫', icon: 'üî•', theme: '–û–≥–æ–Ω—å', oils: '—Ä–æ–∑–º–∞—Ä–∏–Ω, –∏–º–±–∏—Ä—å' },
                { id: 3, short: '–°—Ä', full: '–°—Ä–µ–¥–∞', icon: 'üå¨Ô∏è', theme: '–í–æ–∑–¥—É—Ö', oils: '–º—è—Ç–∞, —ç–≤–∫–∞–ª–∏–ø—Ç' },
                { id: 4, short: '–ß—Ç', full: '–ß–µ—Ç–≤–µ—Ä–≥', icon: 'üå≥', theme: '–î–µ—Ä–µ–≤–æ', oils: '–ø–∏—Ö—Ç–∞, –∫–µ–¥—Ä' },
                { id: 5, short: '–ü—Ç', full: '–ü—è—Ç–Ω–∏—Ü–∞', icon: 'üå∏', theme: '–¶–≤–µ—Ç–µ–Ω–∏–µ', oils: '—Ä–æ–∑–∞, –≥–µ—Ä–∞–Ω—å' },
                { id: 6, short: '–°–±', full: '–°—É–±–±–æ—Ç–∞', icon: 'ü™®', theme: '–ó–µ–º–ª—è', oils: '–∫–∏–ø–∞—Ä–∏—Å, –º–æ–∂–∂–µ–≤–µ–ª—å–Ω–∏–∫' }
            ];
            
            const saveProfile = (updates) => {
                const newProfile = { ...profile, ...updates };
                DB.setProfile(newProfile);
                setProfile(newProfile);
            };
            
            const saveSaunaDay = (day) => {
                DB.setSaunaDay(day);
                setSaunaDayState(day);
            };
            
            // –†–∞—Å—á—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç–∞
            const calculateTemperamentResult = () => {
                if (testAnswers.some(a => a === null)) return;
                
                const scores = { sanguine: 0, choleric: 0, melancholic: 0, phlegmatic: 0 };
                testAnswers.forEach(type => { if (type) scores[type]++; });
                
                const total = Object.values(scores).reduce((a, b) => a + b, 0);
                const percentages = {};
                Object.keys(scores).forEach(key => {
                    percentages[key] = total > 0 ? Math.round((scores[key] / total) * 100) : 0;
                });
                
                const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
                const primary = sorted[0][0];
                const secondary = sorted[1][1] > 1 ? sorted[1][0] : null;
                
                setTestResult({ scores, percentages, primary, secondary });
                window.scrollTo(0, 0);
                
                // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø—Ä–æ—Ñ–∏–ª—å
                saveProfile({ temperament: primary, temperamentSecondary: secondary, temperamentScores: percentages });
            };
            
            const temperaments = Object.values(NATURAL_WISDOM.temperaments);
            
            // –≠–∫—Ä–∞–Ω —Ç–µ—Å—Ç–∞ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç–∞
            if (showTemperamentTest) {
                const currentQ = testAnswers.findIndex(a => a === null);
                const progress = testAnswers.filter(a => a !== null).length;
                
                if (testResult) {
                    const desc = TEMPERAMENT_TEST.getDescription(testResult.primary);
                    const secondaryDesc = testResult.secondary ? TEMPERAMENT_TEST.getDescription(testResult.secondary) : null;
                    
                    return (
                        <div className="fade-in">
                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>
                                <button className="btn btn-secondary btn-small" onClick={() => { setShowTemperamentTest(false); setTestResult(null); setTestAnswers(Array(12).fill(null)); }}>‚Üê –ó–∞–∫—Ä—ã—Ç—å</button>
                            </div>
                            
                            <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>
                                <div style={{ fontSize: '4rem', marginBottom: '0.5rem' }}>{desc.icon}</div>
                                <h1 style={{ color: desc.color }}>{desc.title}</h1>
                                <p style={{ color: 'var(--text-secondary)' }}>–°—Ç–∏—Ö–∏—è: {desc.element}</p>
                            </div>
                            
                            {/* –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ */}
                            <div className="card" style={{ marginBottom: '1rem' }}>
                                <h3 style={{ marginBottom: '0.75rem' }}>–í–∞—à —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç</h3>
                                {Object.entries(testResult.percentages).sort((a, b) => b[1] - a[1]).map(([type, pct]) => {
                                    const info = TEMPERAMENT_TEST.getDescription(type);
                                    return (
                                        <div key={type} style={{ marginBottom: '0.5rem' }}>
                                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '0.85rem', marginBottom: '0.25rem' }}>
                                                <span>{info.icon} {info.title}</span>
                                                <span style={{ fontWeight: 'bold' }}>{pct}%</span>
                                            </div>
                                            <div className="progress-bar" style={{ height: '8px' }}>
                                                <div className="progress-fill" style={{ width: `${pct}%`, background: info.color }}></div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                            
                            {/* –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã */}
                            <div className="card" style={{ marginBottom: '0.75rem', background: desc.color + '15' }}>
                                <h3 style={{ marginBottom: '0.5rem' }}>üí™ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã</h3>
                                {desc.strengths.map((s, i) => (
                                    <p key={i} style={{ fontSize: '0.85rem', marginBottom: '0.25rem' }}>‚Ä¢ {s}</p>
                                ))}
                            </div>
                            
                            {/* –ó–æ–Ω—ã —Ä–æ—Å—Ç–∞ */}
                            <div className="card" style={{ marginBottom: '0.75rem' }}>
                                <h3 style={{ marginBottom: '0.5rem' }}>üå± –ü—É—Ç–∏ —Ä–∞–∑–≤–∏—Ç–∏—è</h3>
                                {desc.challenges.map((c, i) => (
                                    <p key={i} style={{ fontSize: '0.85rem', marginBottom: '0.25rem' }}>‚Ä¢ {c}</p>
                                ))}
                            </div>
                            
                            {/* –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ */}
                            <div className="recommendation-card" style={{ marginBottom: '0.75rem' }}>
                                <div className="recommendation-title">üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</div>
                                <p style={{ fontSize: '0.9rem' }}>{desc.tip}</p>
                            </div>
                            
                            {/* –ü—Ä–∞–∫—Ç–∏–∫–∏ */}
                            <div className="card" style={{ marginBottom: '1rem' }}>
                                <h3 style={{ marginBottom: '0.5rem' }}>‚ú® –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</h3>
                                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.4rem' }}>
                                    {desc.practices.map((p, i) => (
                                        <span key={i} className="btn btn-secondary btn-small">{p}</span>
                                    ))}
                                </div>
                            </div>
                            
                            {secondaryDesc && (
                                <div className="alert alert-info">
                                    <span>{secondaryDesc.icon}</span>
                                    <div>
                                        <strong>–í—Ç–æ—Ä–∏—á–Ω—ã–π —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç: {secondaryDesc.title}</strong>
                                        <p style={{ fontSize: '0.8rem' }}>–ï–≥–æ —á–µ—Ä—Ç—ã —Ç–∞–∫–∂–µ –ø—Ä–æ—è–≤–ª—è—é—Ç—Å—è –≤ –≤–∞—à–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ</p>
                                    </div>
                                </div>
                            )}
                            
                            <button className="btn btn-primary btn-full" style={{ marginTop: '1rem' }} onClick={() => { setShowTemperamentTest(false); setTestResult(null); setTestAnswers(Array(12).fill(null)); }}>
                                –ì–æ—Ç–æ–≤–æ
                            </button>
                        </div>
                    );
                }
                
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => { setShowTemperamentTest(false); setTestAnswers(Array(12).fill(null)); }}>‚Üê –û—Ç–º–µ–Ω–∞</button>
                            <span style={{ fontSize: '0.85rem', color: 'var(--text-secondary)' }}>{progress}/12</span>
                        </div>
                        
                        <div className="progress-bar" style={{ height: '6px', marginBottom: '1.5rem' }}>
                            <div className="progress-fill" style={{ width: `${(progress / 12) * 100}%` }}></div>
                        </div>
                        
                        <h2 style={{ marginBottom: '1.5rem' }}>–¢–µ—Å—Ç –Ω–∞ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç</h2>
                        
                        {TEMPERAMENT_TEST.questions.map((q, qIdx) => (
                            <div key={qIdx} className="card" style={{ marginBottom: '0.75rem', background: testAnswers[qIdx] ? '#F0FDF4' : 'white' }}>
                                <p style={{ fontWeight: '600', marginBottom: '0.75rem', fontSize: '0.9rem' }}>
                                    {qIdx + 1}. {q.text}
                                </p>
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '0.4rem' }}>
                                    {q.answers.map((a, aIdx) => (
                                        <button 
                                            key={aIdx}
                                            className={`btn btn-small ${testAnswers[qIdx] === a.type ? 'btn-primary' : 'btn-secondary'}`}
                                            style={{ textAlign: 'left', whiteSpace: 'normal', height: 'auto', padding: '0.6rem 0.75rem' }}
                                            onClick={() => { 
                                                const newAnswers = [...testAnswers]; 
                                                newAnswers[qIdx] = a.type; 
                                                setTestAnswers(newAnswers); 
                                            }}
                                        >
                                            {a.text}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        ))}
                        
                        <button 
                            className="btn btn-primary btn-full" 
                            style={{ marginTop: '1rem' }}
                            onClick={calculateTemperamentResult}
                            disabled={testAnswers.some(a => a === null)}
                        >
                            –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                        </button>
                    </div>
                );
            }
            
            const calculatePHQ = () => {
                if (phqAnswers.some(a => a === null)) return;
                const score = phqAnswers.reduce((sum, a) => sum + a, 0);
                let severity, color, recommendation;
                if (score <= 4) { severity = '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è'; color = '#10B981'; recommendation = '–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è'; }
                else if (score <= 9) { severity = '–õ—ë–≥–∫–∞—è'; color = '#F59E0B'; recommendation = '–†–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å–≤–µ—Ç–∞ –∏ —Ç–µ–ø–ª–∞'; }
                else if (score <= 14) { severity = '–£–º–µ—Ä–µ–Ω–Ω–∞—è'; color = '#F97316'; recommendation = '–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ + –ø—Ä–∞–∫—Ç–∏–∫–∏'; }
                else if (score <= 19) { severity = '–£–º–µ—Ä–µ–Ω–Ω–æ-—Ç—è–∂—ë–ª–∞—è'; color = '#EF4444'; recommendation = '–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É'; }
                else { severity = '–¢—è–∂—ë–ª–∞—è'; color = '#DC2626'; recommendation = '–ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å'; }
                setPhqResult({ score, severity, color, recommendation });
                window.scrollTo(0, 0);
                DB.addPhqResult(score);
            };
            
            const phqHistory = DB.getPhqHistory();
            const shouldShowPhqReminder = DB.shouldShowPhqReminder();
            
            if (showPHQ) {
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => { setShowPHQ(false); setPhqResult(null); setPhqAnswers(Array(9).fill(null)); }}>‚Üê –ù–∞–∑–∞–¥</button>
                        </div>
                        
                        {!phqResult ? (
                            <>
                                <h1>–û—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è</h1>
                                <p style={{ fontSize: '0.85rem', color: 'var(--text-secondary)', marginBottom: '1rem' }}>
                                    –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –Ω–µ–¥–µ–ª–∏ –∫–∞–∫ —á–∞—Å—Ç–æ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏–ª–æ:
                                </p>
                                
                                {PHQ9_QUESTIONS.map((q, idx) => (
                                    <div key={idx} className="card" style={{ marginBottom: '0.5rem' }}>
                                        <p style={{ fontSize: '0.9rem', marginBottom: '0.5rem' }}>{idx + 1}. {q}</p>
                                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.4rem' }}>
                                            {PHQ9_OPTIONS.map(opt => (
                                                <button 
                                                    key={opt.value}
                                                    className={`btn btn-small ${phqAnswers[idx] === opt.value ? 'btn-primary' : 'btn-secondary'}`}
                                                    onClick={() => { const n = [...phqAnswers]; n[idx] = opt.value; setPhqAnswers(n); }}
                                                    style={{ fontSize: '0.7rem', padding: '6px 10px' }}
                                                >
                                                    {opt.label}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                                
                                <button 
                                    className="btn btn-primary btn-full" 
                                    style={{ marginTop: '1rem' }}
                                    onClick={calculatePHQ}
                                    disabled={phqAnswers.some(a => a === null)}
                                >
                                    –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                                </button>
                            </>
                        ) : (
                            <div style={{ textAlign: 'center' }}>
                                <h1>–†–µ–∑—É–ª—å—Ç–∞—Ç PHQ-9</h1>
                                <div style={{ fontSize: '3rem', fontWeight: 'bold', color: phqResult.color, margin: '1rem 0' }}>
                                    {phqResult.score} / 27
                                </div>
                                <div style={{ fontSize: '1.2rem', fontWeight: '600', color: phqResult.color, marginBottom: '1rem' }}>
                                    {phqResult.severity} –¥–µ–ø—Ä–µ—Å—Å–∏—è
                                </div>
                                <div className="card" style={{ textAlign: 'left' }}>
                                    <p>{phqResult.recommendation}</p>
                                </div>
                                
                                {/* –ì—Ä–∞—Ñ–∏–∫ –∏—Å—Ç–æ—Ä–∏–∏ PHQ */}
                                {phqHistory.length > 1 && (
                                    <div className="card" style={{ marginTop: '1rem', textAlign: 'left' }}>
                                        <h3 style={{ marginBottom: '0.75rem' }}>üìä –ò—Å—Ç–æ—Ä–∏—è –æ—Ü–µ–Ω–æ–∫</h3>
                                        <div style={{ display: 'flex', alignItems: 'flex-end', gap: '4px', height: '100px', padding: '0.5rem 0' }}>
                                            {phqHistory.slice(-10).map((item, idx) => {
                                                const height = Math.max(10, (item.score / 27) * 100);
                                                const barColor = item.score <= 4 ? '#10B981' : item.score <= 9 ? '#F59E0B' : item.score <= 14 ? '#F97316' : '#EF4444';
                                                const date = new Date(item.date);
                                                return (
                                                    <div key={idx} style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
                                                        <span style={{ fontSize: '0.65rem', marginBottom: '2px' }}>{item.score}</span>
                                                        <div style={{ 
                                                            width: '100%', 
                                                            height: height + '%', 
                                                            background: barColor,
                                                            borderRadius: '4px 4px 0 0',
                                                            minHeight: '10px'
                                                        }} />
                                                        <span style={{ fontSize: '0.55rem', color: 'var(--text-tertiary)', marginTop: '2px' }}>
                                                            {date.getDate()}/{date.getMonth() + 1}
                                                        </span>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '0.65rem', color: 'var(--text-tertiary)', marginTop: '0.5rem' }}>
                                            <span>üü¢ 0-4 –º–∏–Ω.</span>
                                            <span>üü° 5-9 –ª—ë–≥–∫.</span>
                                            <span>üü† 10-14 —É–º–µ—Ä.</span>
                                            <span>üî¥ 15+ —Ç—è–∂.</span>
                                        </div>
                                    </div>
                                )}
                                
                                {phqResult.score >= 10 && (
                                    <div className="alert alert-warning" style={{ marginTop: '1rem', textAlign: 'left' }}>
                                        <span>üìû</span>
                                        <div>
                                            <strong>–ì–æ—Ä—è—á–∏–µ –ª–∏–Ω–∏–∏ –ø–æ–º–æ—â–∏:</strong><br/>
                                            8-800-2000-122 (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, 24/7)
                                        </div>
                                    </div>
                                )}
                                <button className="btn btn-primary btn-full" style={{ marginTop: '1rem' }} onClick={() => { setShowPHQ(false); setPhqResult(null); setPhqAnswers(Array(9).fill(null)); }}>
                                    –ì–æ—Ç–æ–≤–æ
                                </button>
                            </div>
                        )}
                    </div>
                );
            }
            
            return (
                <div className="fade-in">
                    <h1>–ü—Ä–æ—Ñ–∏–ª—å</h1>
                    
                    {/* –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è */}
                    <div 
                        className="card" 
                        style={{ 
                            marginTop: '0.75rem', 
                            display: 'flex', 
                            justifyContent: 'space-between', 
                            alignItems: 'center'
                        }}
                    >
                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                            <span style={{ fontSize: '1.25rem' }}>{darkTheme ? 'üåô' : '‚òÄÔ∏è'}</span>
                            <div>
                                <strong style={{ fontSize: '0.9rem' }}>–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</strong>
                                <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                    {darkTheme ? '–¢—ë–º–Ω–∞—è —Ç–µ–º–∞' : '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞'}
                                </p>
                            </div>
                        </div>
                        <div 
                            onClick={toggleDarkTheme}
                            style={{ 
                                width: '50px', 
                                height: '28px', 
                                borderRadius: '14px', 
                                background: darkTheme ? 'var(--twilight-deep)' : '#ccc',
                                position: 'relative',
                                cursor: 'pointer',
                                transition: 'background 0.3s'
                            }}
                        >
                            <div style={{
                                width: '24px',
                                height: '24px',
                                borderRadius: '12px',
                                background: darkTheme ? '#FCD34D' : 'white',
                                position: 'absolute',
                                top: '2px',
                                left: darkTheme ? '24px' : '2px',
                                transition: 'left 0.3s, background 0.3s',
                                boxShadow: '0 1px 3px rgba(0,0,0,0.2)'
                            }} />
                        </div>
                    </div>
                    
                    <div className="grid-2" style={{ marginTop: '1rem', marginBottom: '1rem' }}>
                        <div className="stat-card">
                            <div className="stat-value">{practiceHistory.length}</div>
                            <div className="stat-label">–ø—Ä–∞–∫—Ç–∏–∫</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-value">{journalEntries.length}</div>
                            <div className="stat-label">–∑–∞–ø–∏—Å–µ–π</div>
                        </div>
                    </div>
                    
                    {analysis?.trend && (
                        <div className="card" style={{ marginBottom: '0.75rem' }}>
                            <strong>–¢—Ä–µ–Ω–¥ –∑–∞ 7 –¥–Ω–µ–π:</strong>{' '}
                            {analysis.trend === 'improving' ? 'üìà –£–ª—É—á—à–µ–Ω–∏–µ' : analysis.trend === 'declining' ? 'üìâ –°–Ω–∏–∂–µ–Ω–∏–µ' : '‚û°Ô∏è –°—Ç–∞–±–∏–ª—å–Ω–æ'}
                        </div>
                    )}
                    
                    {/* PHQ-9 - removed from here, now below name */}
                    
                    <div className="card">
                        <h3 style={{ marginBottom: '0.5rem' }}>–ò–º—è</h3>
                        <div style={{ display: 'flex', gap: '0.5rem' }}>
                            <input type="text" value={name} onChange={e => setName(e.target.value)} placeholder="–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?" style={{ flex: 1, padding: '10px', borderRadius: '10px', border: '1px solid var(--earth-light)', fontSize: '0.9rem', fontFamily: 'inherit' }} />
                            <button className="btn btn-primary btn-small" onClick={() => saveProfile({ name })}>‚úì</button>
                        </div>
                    </div>
                    
                    {/* PHQ-9 - —Ç–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ –∏–º–µ–Ω–∏ */}
                    <div 
                        className="card card-clickable" 
                        style={{ 
                            marginTop: '0.75rem',
                            background: shouldShowPhqReminder ? '#FEF3C7' : '#F0F9FF',
                            border: shouldShowPhqReminder ? '2px solid var(--amber)' : 'none'
                        }} 
                        onClick={() => setShowPHQ(true)}
                    >
                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                            <span style={{ fontSize: '1.25rem' }}>üìã</span>
                            <div style={{ flex: 1 }}>
                                <strong>–û—Ü–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (PHQ-9)</strong>
                                <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                    {shouldShowPhqReminder 
                                        ? '‚è∞ –ü–æ—Ä–∞ –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —Å–Ω–æ–≤–∞' 
                                        : '–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç –¥–µ–ø—Ä–µ—Å—Å–∏–∏'
                                    }
                                </p>
                            </div>
                            {shouldShowPhqReminder && <span style={{ fontSize: '1.25rem' }}>‚Üí</span>}
                        </div>
                        {phqHistory.length > 0 && (
                            <div style={{ marginTop: '0.5rem', paddingTop: '0.5rem', borderTop: '1px solid var(--earth-light)' }}>
                                <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                    <span>–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <strong style={{ color: phqHistory[phqHistory.length-1].score <= 4 ? '#10B981' : phqHistory[phqHistory.length-1].score <= 9 ? '#F59E0B' : '#EF4444' }}>{phqHistory[phqHistory.length-1].score}/27</strong></span>
                                    <span>{new Date(phqHistory[phqHistory.length-1].date).toLocaleDateString('ru-RU')}</span>
                                </div>
                            </div>
                        )}
                    </div>
                    
                    <div className="card" style={{ marginTop: '0.75rem' }}>
                        <h3 style={{ marginBottom: '0.5rem' }}>–¢–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç</h3>
                        
                        {/* –ö–Ω–æ–ø–∫–∞ —Ç–µ—Å—Ç–∞ */}
                        <div 
                            className="card card-clickable" 
                            style={{ background: '#EFF6FF', marginBottom: '0.75rem', padding: '0.75rem' }}
                            onClick={() => setShowTemperamentTest(true)}
                        >
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                <span style={{ fontSize: '1.5rem' }}>üß™</span>
                                <div>
                                    <strong>–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –Ω–∞ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç</strong>
                                    <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>12 –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Ä¢ 3 –º–∏–Ω—É—Ç—ã</p>
                                </div>
                            </div>
                        </div>
                        
                        {/* –ò–ª–∏ –≤—ã–±—Ä–∞—Ç—å –≤—Ä—É—á–Ω—É—é */}
                        <p style={{ fontSize: '0.8rem', color: 'var(--text-tertiary)', marginBottom: '0.5rem', textAlign: 'center' }}>–∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:</p>
                        
                        <div className="grid-2">
                            {temperaments.map(t => (
                                <div key={t.id} className={`temperament-card ${profile.temperament === t.id ? 'active' : ''}`} style={{ background: t.color + '15' }} onClick={() => saveProfile({ temperament: t.id })}>
                                    <div className="temperament-icon">{t.icon}</div>
                                    <div className="temperament-name">{t.name}</div>
                                    <div className="temperament-element">{t.element}</div>
                                </div>
                            ))}
                        </div>
                    </div>
                    
                    {/* –ì–æ—Ä—è—á–∏–µ –ª–∏–Ω–∏–∏ */}
                    <div className="card" style={{ marginTop: '0.75rem', background: '#FEF2F2' }}>
                        <h3 style={{ marginBottom: '0.5rem' }}>üìû –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å</h3>
                        {CRISIS_LINES.map((line, idx) => (
                            <div key={idx} style={{ marginBottom: '0.5rem', paddingBottom: '0.5rem', borderBottom: idx < CRISIS_LINES.length - 1 ? '1px solid var(--earth-light)' : 'none' }}>
                                <strong style={{ fontSize: '0.85rem' }}>{line.name}</strong>
                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                                    <a href={`tel:${line.phone}`} style={{ color: '#DC2626', fontWeight: '600', fontSize: '0.9rem' }}>{line.phone}</a>
                                    <span style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)' }}>{line.note}</span>
                                </div>
                            </div>
                        ))}
                    </div>
                    
                    {/* –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –±–∞–Ω–∏ */}
                    <div className="card" style={{ marginTop: '0.75rem', background: '#FEF3C7' }}>
                        <h3 style={{ marginBottom: '0.5rem' }}>üßñ –î–µ–Ω—å –±–∞–Ω–∏</h3>
                        <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)', marginBottom: '0.75rem' }}>
                            –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–Ω—å –¥–ª—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ—Å–µ—â–µ–Ω–∏—è –±–∞–Ω–∏. –ú—ã –Ω–∞–ø–æ–º–Ω–∏–º –∏ –ø–æ–¥–±–µ—Ä—ë–º –º–∞—Å–ª–∞.
                        </p>
                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.4rem' }}>
                            {DAY_NAMES.map(day => (
                                <div 
                                    key={day.id}
                                    onClick={() => saveSaunaDay(saunaDay === day.id ? null : day.id)}
                                    style={{ 
                                        padding: '0.5rem 0.75rem',
                                        borderRadius: '10px',
                                        background: saunaDay === day.id ? 'var(--amber)' : 'var(--cream-light)',
                                        color: saunaDay === day.id ? 'var(--text-on-dark)' : 'var(--text-primary)',
                                        cursor: 'pointer',
                                        textAlign: 'center',
                                        border: saunaDay === day.id ? 'none' : '1px solid var(--earth-light)',
                                        minWidth: '42px'
                                    }}
                                >
                                    <div style={{ fontSize: '1rem' }}>{day.icon}</div>
                                    <div style={{ fontSize: '0.7rem', fontWeight: '600' }}>{day.short}</div>
                                </div>
                            ))}
                        </div>
                        {saunaDay !== null && (
                            <div style={{ marginTop: '0.75rem', padding: '0.5rem', background: 'rgba(255,255,255,0.7)', borderRadius: '8px' }}>
                                <p style={{ fontSize: '0.85rem' }}>
                                    <strong>{DAY_NAMES[saunaDay].full}</strong>: {DAY_NAMES[saunaDay].oils}
                                </p>
                            </div>
                        )}
                    </div>
                    
                    <div className="alert alert-warning" style={{ marginTop: '0.75rem' }}>
                        <span>‚ö†Ô∏è</span>
                        <div style={{ fontSize: '0.8rem' }}>–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–º–æ—â—å.</div>
                    </div>
                </div>
            );
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // –°–¢–†–ê–ù–ò–¶–ê –ü–ò–¢–ê–ù–ò–Ø
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function NutritionPage({ setPage }) {
            const [progress, setProgress] = useState(DB.getNutritionProgress());
            const [showMealPlan, setShowMealPlan] = useState(false);
            const [showTemperament, setShowTemperament] = useState(false);
            const [showRecipes, setShowRecipes] = useState(false);
            const [selectedMeal, setSelectedMeal] = useState(null);
            const [currentDayView, setCurrentDayView] = useState(null);
            const [recipes, setRecipes] = useState(() => {
                const saved = DB.getRecipes();
                // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ—Ü–µ–ø—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
                const defaultIds = DEFAULT_RECIPES.map(r => r.id);
                const hasDefaults = saved.some(r => defaultIds.includes(r.id));
                if (!hasDefaults && saved.length === 0) {
                    return [...DEFAULT_RECIPES];
                }
                return saved.length > 0 ? saved : [...DEFAULT_RECIPES];
            });
            const [selectedRecipe, setSelectedRecipe] = useState(null);
            const [showAddRecipe, setShowAddRecipe] = useState(false);
            const [newRecipe, setNewRecipe] = useState({ title: '', ingredients: '', steps: '', tips: '' });
            
            const profile = DB.getProfile();
            const temperament = profile.temperament || 'melancholic';
            const tempInfo = TEMPERAMENT_NUTRITION[temperament];
            const hour = new Date().getHours();
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –ø—Ä–∏—ë–º –ø–∏—â–∏
            const getCurrentMealType = () => {
                if (hour >= 6 && hour < 11) return 'morning';
                if (hour >= 11 && hour < 15) return 'lunch';
                if (hour >= 17 && hour < 21) return 'dinner';
                return null;
            };
            
            const currentMealType = getCurrentMealType();
            const currentMeal = currentMealType ? NUTRITION_PLAN[currentMealType] : null;
            
            // –ù–∞—á–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
            const startProgram = () => {
                DB.startNutritionProgram();
                setProgress(DB.getNutritionProgress());
            };
            
            // –û—Ç–º–µ—Ç–∏—Ç—å –¥–µ–Ω—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º
            const completeDay = (day) => {
                DB.completeNutritionDay(day);
                setProgress(DB.getNutritionProgress());
            };
            
            // –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            const achievements = NUTRITION_ACHIEVEMENTS.filter(a => a.condition(progress.completedDays?.length || 0));
            
            // –°–ª—É—á–∞–π–Ω—ã–π –ø—Ä–∏–º–µ—Ä —É—Å–ø–µ—Ö–∞
            const randomSuccess = NUTRITION_EXAMPLES.success[Math.floor(Math.random() * NUTRITION_EXAMPLES.success.length)];
            const randomMotivation = NUTRITION_EXAMPLES.motivation[Math.floor(Math.random() * NUTRITION_EXAMPLES.motivation.length)];
            
            // –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–Ω—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
            if (currentDayView !== null) {
                const dayData = WEEK_TRANSITION[currentDayView];
                const isCompleted = progress.completedDays?.includes(currentDayView + 1);
                
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => setCurrentDayView(null)}>‚Üê –ù–∞–∑–∞–¥</button>
                            <span style={{ fontWeight: 'bold' }}>–î–µ–Ω—å {dayData.day} –∏–∑ 7</span>
                        </div>
                        
                        <div className="progress-bar" style={{ height: '8px', marginBottom: '1rem' }}>
                            <div className="progress-fill" style={{ width: `${(dayData.day / 7) * 100}%` }}></div>
                        </div>
                        
                        <h1>{dayData.title}</h1>
                        
                        <div className="card" style={{ background: '#FEF3C7', marginTop: '1rem' }}>
                            <strong>üéØ –§–æ–∫—É—Å –¥–Ω—è:</strong>
                            <p style={{ fontSize: '1.1rem', marginTop: '0.5rem' }}>{dayData.focus}</p>
                        </div>
                        
                        <div className="card" style={{ marginTop: '0.75rem' }}>
                            <h3 style={{ marginBottom: '0.75rem' }}>üìã –ó–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                            {dayData.tasks.map((task, idx) => (
                                <div key={idx} style={{ 
                                    display: 'flex', 
                                    alignItems: 'center', 
                                    gap: '0.5rem', 
                                    padding: '0.5rem',
                                    background: isCompleted ? '#F0FDF4' : 'transparent',
                                    borderRadius: '8px',
                                    marginBottom: '0.5rem'
                                }}>
                                    <span style={{ fontSize: '1.25rem' }}>{isCompleted ? '‚úÖ' : '‚¨ú'}</span>
                                    <span>{task}</span>
                                </div>
                            ))}
                        </div>
                        
                        <div className="recommendation-card" style={{ marginTop: '0.75rem' }}>
                            <div className="recommendation-title">üí° –°–æ–≤–µ—Ç</div>
                            <p>{dayData.tip}</p>
                        </div>
                        
                        <div className="card" style={{ background: '#F0FDF4', marginTop: '0.75rem' }}>
                            <strong>üåü –ú–æ—Ç–∏–≤–∞—Ü–∏—è:</strong>
                            <p style={{ marginTop: '0.5rem', fontStyle: 'italic' }}>{dayData.motivation}</p>
                        </div>
                        
                        {!isCompleted && (
                            <button 
                                className="btn btn-primary btn-full" 
                                style={{ marginTop: '1rem' }}
                                onClick={() => completeDay(dayData.day)}
                            >
                                ‚úì –î–µ–Ω—å –≤—ã–ø–æ–ª–Ω–µ–Ω!
                            </button>
                        )}
                        
                        {isCompleted && (
                            <div className="alert alert-info" style={{ marginTop: '1rem' }}>
                                <span>üéâ</span>
                                <div>–û—Ç–ª–∏—á–Ω–æ! –≠—Ç–æ—Ç –¥–µ–Ω—å —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω.</div>
                            </div>
                        )}
                    </div>
                );
            }
            
            // –≠–∫—Ä–∞–Ω –ø–ª–∞–Ω–∞ –ø–∏—Ç–∞–Ω–∏—è
            if (showMealPlan) {
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => setShowMealPlan(false)}>‚Üê –ù–∞–∑–∞–¥</button>
                        </div>
                        
                        <h1>üçΩÔ∏è –ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è</h1>
                        <p style={{ color: 'var(--text-secondary)', marginBottom: '1rem' }}>–ü–∞–ª–µ–æ-–ø–æ–¥—Ö–æ–¥ —Å —É—á—ë—Ç–æ–º –±–∏–æ—Ä–∏—Ç–º–æ–≤</p>
                        
                        {['morning', 'lunch', 'dinner'].map(mealType => {
                            const meal = NUTRITION_PLAN[mealType];
                            return (
                                <div key={mealType} className="card" style={{ marginBottom: '0.75rem' }}>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>
                                        <span style={{ fontSize: '1.5rem' }}>{meal.icon}</span>
                                        <div>
                                            <h3 style={{ margin: 0 }}>{meal.title}</h3>
                                            <p style={{ fontSize: '0.8rem', color: 'var(--text-secondary)', margin: 0 }}>{meal.principle}</p>
                                        </div>
                                    </div>
                                    
                                    <p style={{ fontSize: '0.85rem', marginBottom: '0.75rem' }}>{meal.description}</p>
                                    
                                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.4rem', marginBottom: '0.5rem' }}>
                                        {meal.foods.map((food, idx) => (
                                            <span key={idx} style={{ 
                                                background: '#F0FDF4', 
                                                padding: '0.3rem 0.6rem', 
                                                borderRadius: '15px',
                                                fontSize: '0.8rem'
                                            }}>
                                                {food.icon} {food.name}
                                            </span>
                                        ))}
                                    </div>
                                    
                                    <div style={{ fontSize: '0.75rem', color: '#DC2626' }}>
                                        ‚õî –ò–∑–±–µ–≥–∞—Ç—å: {meal.avoid.join(', ')}
                                    </div>
                                </div>
                            );
                        })}
                        
                        {/* –ò—Å–∫–ª—é—á–∏—Ç—å */}
                        <div className="card" style={{ background: '#FEF2F2', marginTop: '0.75rem' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>{NUTRITION_PLAN.excluded.title}</h3>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.4rem' }}>
                                {NUTRITION_PLAN.excluded.items.map((item, idx) => (
                                    <span key={idx} style={{ 
                                        background: 'white', 
                                        padding: '0.3rem 0.6rem', 
                                        borderRadius: '15px',
                                        fontSize: '0.8rem',
                                        border: '1px solid #FECACA'
                                    }}>
                                        {item.icon} {item.name}
                                    </span>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }
            
            // –≠–∫—Ä–∞–Ω –ø–∏—Ç–∞–Ω–∏—è –ø–æ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç—É
            if (showTemperament) {
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => setShowTemperament(false)}>‚Üê –ù–∞–∑–∞–¥</button>
                        </div>
                        
                        <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>
                            <span style={{ fontSize: '3rem' }}>{tempInfo.icon}</span>
                            <h1>{tempInfo.title}</h1>
                            <p style={{ color: 'var(--text-secondary)' }}>–°—Ç–∏—Ö–∏—è: {tempInfo.element}</p>
                        </div>
                        
                        <div className="card" style={{ background: '#FEF3C7', marginBottom: '0.75rem' }}>
                            <strong>‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</strong>
                            <p style={{ marginTop: '0.5rem' }}>{tempInfo.tendency}</p>
                        </div>
                        
                        <div className="card" style={{ marginBottom: '0.75rem' }}>
                            <h3 style={{ marginBottom: '0.75rem' }}>‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
                            {tempInfo.recommendations.map((rec, idx) => (
                                <p key={idx} style={{ fontSize: '0.85rem', marginBottom: '0.5rem' }}>‚Ä¢ {rec}</p>
                            ))}
                        </div>
                        
                        <div className="card" style={{ background: '#F0FDF4', marginBottom: '0.75rem' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>üåü –°—É–ø–µ—Ä–ø—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è –≤–∞—Å</h3>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.4rem' }}>
                                {tempInfo.superfoods.map((food, idx) => (
                                    <span key={idx} className="btn btn-small btn-secondary">{food}</span>
                                ))}
                            </div>
                        </div>
                        
                        <div className="card" style={{ background: '#FEF2F2' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>‚õî –õ—É—á—à–µ –∏–∑–±–µ–≥–∞—Ç—å</h3>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.4rem' }}>
                                {tempInfo.avoid.map((item, idx) => (
                                    <span key={idx} style={{ 
                                        background: 'white', 
                                        padding: '0.3rem 0.6rem', 
                                        borderRadius: '15px',
                                        fontSize: '0.8rem'
                                    }}>{item}</span>
                                ))}
                            </div>
                        </div>
                        
                        {/* –î—Ä—É–≥–∏–µ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç—ã */}
                        <h3 style={{ marginTop: '1.5rem', marginBottom: '0.75rem' }}>–î—Ä—É–≥–∏–µ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç—ã</h3>
                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>
                            {Object.entries(TEMPERAMENT_NUTRITION).map(([key, info]) => (
                                key !== temperament && (
                                    <div 
                                        key={key}
                                        className="card card-clickable"
                                        style={{ flex: '1 1 45%', minWidth: '120px', textAlign: 'center' }}
                                        onClick={() => {
                                            // –í—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç
                                        }}
                                    >
                                        <span style={{ fontSize: '2rem' }}>{info.icon}</span>
                                        <p style={{ fontWeight: 'bold', fontSize: '0.85rem' }}>{info.title}</p>
                                    </div>
                                )
                            ))}
                        </div>
                    </div>
                );
            }
            
            // –≠–∫—Ä–∞–Ω —Ä–µ—Ü–µ–ø—Ç–æ–≤
            if (showRecipes) {
                // –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞
                if (selectedRecipe) {
                    const recipe = [...DEFAULT_RECIPES, ...recipes].find(r => r.id === selectedRecipe) || recipes.find(r => r.id === selectedRecipe);
                    if (!recipe) {
                        setSelectedRecipe(null);
                        return null;
                    }
                    
                    return (
                        <div className="fade-in">
                            <button className="btn btn-secondary btn-small" onClick={() => setSelectedRecipe(null)} style={{ marginBottom: '1rem' }}>
                                ‚Üê –ö —Ä–µ—Ü–µ–ø—Ç–∞–º
                            </button>
                            
                            <h1 style={{ marginBottom: '0.5rem' }}>{recipe.title}</h1>
                            
                            <div style={{ display: 'flex', gap: '0.75rem', marginBottom: '1rem', flexWrap: 'wrap' }}>
                                {recipe.cookTime && (
                                    <span className="btn btn-small btn-secondary">‚è±Ô∏è {recipe.cookTime}</span>
                                )}
                                {recipe.servings && (
                                    <span className="btn btn-small btn-secondary">üçΩÔ∏è {recipe.servings}</span>
                                )}
                            </div>
                            
                            {recipe.description && (
                                <p style={{ color: 'var(--text-secondary)', marginBottom: '1rem' }}>{recipe.description}</p>
                            )}
                            
                            {/* –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã */}
                            <div className="card" style={{ marginBottom: '0.75rem' }}>
                                <h3 style={{ marginBottom: '0.75rem' }}>üìù –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</h3>
                                {Array.isArray(recipe.ingredients) ? (
                                    recipe.ingredients.map((ing, idx) => (
                                        <p key={idx} style={{ fontSize: '0.9rem', marginBottom: '0.4rem' }}>{ing}</p>
                                    ))
                                ) : (
                                    <p style={{ whiteSpace: 'pre-wrap' }}>{recipe.ingredients}</p>
                                )}
                            </div>
                            
                            {/* –®–∞–≥–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è */}
                            <div className="card" style={{ marginBottom: '0.75rem' }}>
                                <h3 style={{ marginBottom: '0.75rem' }}>üë®‚Äçüç≥ –ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ</h3>
                                {Array.isArray(recipe.steps) ? (
                                    recipe.steps.map((step, idx) => (
                                        <div key={idx} style={{ 
                                            marginBottom: '1rem', 
                                            paddingLeft: '1rem',
                                            borderLeft: '3px solid var(--amber)'
                                        }}>
                                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                                                <strong style={{ color: 'var(--amber)' }}>
                                                    {idx + 1}. {step.title || '–®–∞–≥ ' + (idx + 1)}
                                                </strong>
                                                {step.time && (
                                                    <span style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                                        ‚è±Ô∏è {step.time}
                                                    </span>
                                                )}
                                            </div>
                                            <p style={{ fontSize: '0.9rem', marginTop: '0.25rem' }}>{step.text || step}</p>
                                        </div>
                                    ))
                                ) : (
                                    <p style={{ whiteSpace: 'pre-wrap' }}>{recipe.steps}</p>
                                )}
                            </div>
                            
                            {/* –°–æ–≤–µ—Ç—ã */}
                            {recipe.tips && recipe.tips.length > 0 && (
                                <div className="card" style={{ background: '#FEF3C7' }}>
                                    <h3 style={{ marginBottom: '0.5rem' }}>üí° –°–æ–≤–µ—Ç—ã</h3>
                                    {Array.isArray(recipe.tips) ? (
                                        recipe.tips.map((tip, idx) => (
                                            <p key={idx} style={{ fontSize: '0.85rem', marginBottom: '0.3rem' }}>{tip}</p>
                                        ))
                                    ) : (
                                        <p style={{ whiteSpace: 'pre-wrap' }}>{recipe.tips}</p>
                                    )}
                                </div>
                            )}
                            
                            {/* –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è —Å–≤–æ–∏—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ */}
                            {!recipe.isDefault && (
                                <button 
                                    className="btn" 
                                    style={{ 
                                        marginTop: '1rem', 
                                        width: '100%', 
                                        background: '#FEE2E2', 
                                        color: '#DC2626' 
                                    }}
                                    onClick={() => {
                                        if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–µ—Ü–µ–ø—Ç?')) {
                                            const updated = DB.deleteRecipe(recipe.id);
                                            setRecipes(updated);
                                            setSelectedRecipe(null);
                                        }
                                    }}
                                >
                                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç
                                </button>
                            )}
                        </div>
                    );
                }
                
                // –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞
                if (showAddRecipe) {
                    return (
                        <div className="fade-in">
                            <button className="btn btn-secondary btn-small" onClick={() => setShowAddRecipe(false)} style={{ marginBottom: '1rem' }}>
                                ‚Üê –û—Ç–º–µ–Ω–∞
                            </button>
                            
                            <h1>üìù –ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç</h1>
                            
                            <div className="card" style={{ marginTop: '1rem' }}>
                                <div style={{ marginBottom: '1rem' }}>
                                    <label style={{ display: 'block', marginBottom: '0.3rem', fontWeight: 'bold' }}>
                                        –ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞ *
                                    </label>
                                    <input 
                                        type="text"
                                        value={newRecipe.title}
                                        onChange={(e) => setNewRecipe({...newRecipe, title: e.target.value})}
                                        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°—É–ø-–ø—é—Ä–µ –∏–∑ —Ç—ã–∫–≤—ã"
                                        style={{ width: '100%', padding: '0.75rem', borderRadius: '8px', border: '1px solid #ddd', fontSize: '1rem' }}
                                    />
                                </div>
                                
                                <div style={{ marginBottom: '1rem' }}>
                                    <label style={{ display: 'block', marginBottom: '0.3rem', fontWeight: 'bold' }}>
                                        –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã *
                                    </label>
                                    <textarea 
                                        value={newRecipe.ingredients}
                                        onChange={(e) => setNewRecipe({...newRecipe, ingredients: e.target.value})}
                                        placeholder="–ö–∞–∂–¥—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏:&#10;–¢—ã–∫–≤–∞ ‚Äî 500–≥&#10;–õ—É–∫ ‚Äî 1 —à—Ç.&#10;–°–ª–∏–≤–∫–∏ ‚Äî 100 –º–ª"
                                        rows={5}
                                        style={{ width: '100%', padding: '0.75rem', borderRadius: '8px', border: '1px solid #ddd', fontSize: '1rem', resize: 'vertical' }}
                                    />
                                </div>
                                
                                <div style={{ marginBottom: '1rem' }}>
                                    <label style={{ display: 'block', marginBottom: '0.3rem', fontWeight: 'bold' }}>
                                        –ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ *
                                    </label>
                                    <textarea 
                                        value={newRecipe.steps}
                                        onChange={(e) => setNewRecipe({...newRecipe, steps: e.target.value})}
                                        placeholder="–û–ø–∏—à–∏—Ç–µ —à–∞–≥–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è..."
                                        rows={6}
                                        style={{ width: '100%', padding: '0.75rem', borderRadius: '8px', border: '1px solid #ddd', fontSize: '1rem', resize: 'vertical' }}
                                    />
                                </div>
                                
                                <div style={{ marginBottom: '1rem' }}>
                                    <label style={{ display: 'block', marginBottom: '0.3rem', fontWeight: 'bold' }}>
                                        –°–æ–≤–µ—Ç—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
                                    </label>
                                    <textarea 
                                        value={newRecipe.tips}
                                        onChange={(e) => setNewRecipe({...newRecipe, tips: e.target.value})}
                                        placeholder="–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã..."
                                        rows={3}
                                        style={{ width: '100%', padding: '0.75rem', borderRadius: '8px', border: '1px solid #ddd', fontSize: '1rem', resize: 'vertical' }}
                                    />
                                </div>
                                
                                <button 
                                    className="btn btn-primary"
                                    style={{ width: '100%' }}
                                    disabled={!newRecipe.title || !newRecipe.ingredients || !newRecipe.steps}
                                    onClick={() => {
                                        const recipe = {
                                            title: newRecipe.title,
                                            ingredients: newRecipe.ingredients,
                                            steps: newRecipe.steps,
                                            tips: newRecipe.tips,
                                            isDefault: false
                                        };
                                        const updated = DB.addRecipe(recipe);
                                        setRecipes(updated);
                                        setNewRecipe({ title: '', ingredients: '', steps: '', tips: '' });
                                        setShowAddRecipe(false);
                                    }}
                                >
                                    ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç
                                </button>
                            </div>
                        </div>
                    );
                }
                
                // –°–ø–∏—Å–æ–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤
                const allRecipes = [...DEFAULT_RECIPES, ...recipes.filter(r => !r.isDefault)];
                
                return (
                    <div className="fade-in">
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>
                            <button className="btn btn-secondary btn-small" onClick={() => setShowRecipes(false)}>
                                ‚Üê –ù–∞–∑–∞–¥
                            </button>
                            <button className="btn btn-primary btn-small" onClick={() => setShowAddRecipe(true)}>
                                + –î–æ–±–∞–≤–∏—Ç—å
                            </button>
                        </div>
                        
                        <h1>üìñ –†–µ—Ü–µ–ø—Ç—ã</h1>
                        <p style={{ color: 'var(--text-secondary)', marginBottom: '1rem' }}>
                            –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –¥–ª—è –∑–¥–æ—Ä–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è
                        </p>
                        
                        {allRecipes.length === 0 ? (
                            <div className="card" style={{ textAlign: 'center' }}>
                                <span style={{ fontSize: '3rem' }}>üç≥</span>
                                <h3>–†–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                                <p style={{ color: 'var(--text-secondary)' }}>–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Ä–µ—Ü–µ–ø—Ç!</p>
                            </div>
                        ) : (
                            allRecipes.map(recipe => (
                                <div 
                                    key={recipe.id}
                                    className="card card-clickable"
                                    style={{ marginBottom: '0.75rem' }}
                                    onClick={() => setSelectedRecipe(recipe.id)}
                                >
                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                                        <div>
                                            <h3 style={{ marginBottom: '0.25rem' }}>{recipe.title}</h3>
                                            {recipe.description && (
                                                <p style={{ fontSize: '0.85rem', color: 'var(--text-secondary)', marginBottom: '0.5rem' }}>
                                                    {recipe.description.substring(0, 60)}...
                                                </p>
                                            )}
                                            <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>
                                                {recipe.cookTime && (
                                                    <span style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                                        ‚è±Ô∏è {recipe.cookTime}
                                                    </span>
                                                )}
                                                {recipe.isDefault && (
                                                    <span style={{ 
                                                        fontSize: '0.7rem', 
                                                        background: '#FEF3C7', 
                                                        padding: '0.15rem 0.4rem', 
                                                        borderRadius: '10px' 
                                                    }}>
                                                        ‚≠ê –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ
                                                    </span>
                                                )}
                                            </div>
                                        </div>
                                        <span style={{ fontSize: '1.5rem' }}>‚Üí</span>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                );
            }
            
            // –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –ø–∏—Ç–∞–Ω–∏—è
            return (
                <div className="fade-in">
                    <h1>ü•ó –ü–∏—Ç–∞–Ω–∏–µ</h1>
                    <p style={{ color: 'var(--text-secondary)', marginBottom: '1rem' }}>–ü–∞–ª–µ–æ-–ø–æ–¥—Ö–æ–¥ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è –∏ —ç–Ω–µ—Ä–≥–∏–∏</p>
                    
                    {/* –¢–µ–∫—É—â–∏–π –ø—Ä–∏—ë–º –ø–∏—â–∏ */}
                    {currentMeal && (
                        <div className="card" style={{ background: '#FEF3C7', marginBottom: '0.75rem' }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>
                                <span style={{ fontSize: '1.5rem' }}>{currentMeal.icon}</span>
                                <div>
                                    <strong>–°–µ–π—á–∞—Å –≤—Ä–µ–º—è:</strong>
                                    <p style={{ fontSize: '0.9rem', margin: 0 }}>{currentMeal.title}</p>
                                </div>
                            </div>
                            <p style={{ fontSize: '0.85rem', color: 'var(--text-secondary)' }}>{currentMeal.principle}</p>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.3rem', marginTop: '0.5rem' }}>
                                {currentMeal.foods.slice(0, 4).map((food, idx) => (
                                    <span key={idx} style={{ 
                                        background: 'white', 
                                        padding: '0.2rem 0.5rem', 
                                        borderRadius: '10px',
                                        fontSize: '0.75rem'
                                    }}>
                                        {food.icon} {food.name}
                                    </span>
                                ))}
                            </div>
                        </div>
                    )}
                    
                    {/* –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ –Ω–µ–¥–µ–ª—é */}
                    <div className="card" style={{ marginBottom: '0.75rem' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.75rem' }}>
                            <h3>üìÖ 7-–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</h3>
                            {progress.startDate && (
                                <span style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                    –î–µ–Ω—å {Math.min(progress.currentDay || 1, 7)}
                                </span>
                            )}
                        </div>
                        
                        {!progress.startDate ? (
                            <div>
                                <p style={{ fontSize: '0.85rem', marginBottom: '0.75rem' }}>
                                    –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∑–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –∑–∞ 7 –¥–Ω–µ–π —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π.
                                </p>
                                <button className="btn btn-primary btn-full" onClick={startProgram}>
                                    üöÄ –ù–∞—á–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
                                </button>
                            </div>
                        ) : (
                            <div>
                                {/* –ü—Ä–æ–≥—Ä–µ—Å—Å */}
                                <div style={{ display: 'flex', gap: '0.3rem', marginBottom: '0.75rem' }}>
                                    {WEEK_TRANSITION.map((day, idx) => {
                                        const isCompleted = progress.completedDays?.includes(day.day);
                                        const isCurrent = day.day === progress.currentDay;
                                        return (
                                            <div 
                                                key={idx}
                                                onClick={() => setCurrentDayView(idx)}
                                                style={{ 
                                                    flex: 1,
                                                    height: '40px',
                                                    borderRadius: '8px',
                                                    background: isCompleted ? 'var(--harmony-green)' : isCurrent ? '#FEF3C7' : '#f0f0f0',
                                                    display: 'flex',
                                                    alignItems: 'center',
                                                    justifyContent: 'center',
                                                    cursor: 'pointer',
                                                    border: isCurrent ? '2px solid var(--amber)' : 'none',
                                                    color: isCompleted ? 'white' : 'var(--text-primary)',
                                                    fontWeight: 'bold',
                                                    fontSize: '0.8rem'
                                                }}
                                            >
                                                {isCompleted ? '‚úì' : day.day}
                                            </div>
                                        );
                                    })}
                                </div>
                                
                                {/* –¢–µ–∫—É—â–∏–π –¥–µ–Ω—å */}
                                {progress.currentDay <= 7 && (
                                    <button 
                                        className="btn btn-primary btn-full"
                                        onClick={() => setCurrentDayView(progress.currentDay - 1)}
                                    >
                                        üìñ –û—Ç–∫—Ä—ã—Ç—å –¥–µ–Ω—å {progress.currentDay}
                                    </button>
                                )}
                                
                                {progress.completedDays?.length >= 7 && (
                                    <div className="alert alert-info" style={{ marginTop: '0.5rem' }}>
                                        <span>üéâ</span>
                                        <div>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –≤—Å—é –ø—Ä–æ–≥—Ä–∞–º–º—É!</div>
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                    
                    {/* –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è */}
                    {achievements.length > 0 && (
                        <div className="card" style={{ marginBottom: '0.75rem' }}>
                            <h3 style={{ marginBottom: '0.5rem' }}>üèÜ –í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>
                                {achievements.map(a => (
                                    <div key={a.id} style={{ 
                                        background: '#FEF3C7',
                                        padding: '0.5rem 0.75rem',
                                        borderRadius: '10px',
                                        fontSize: '0.8rem'
                                    }}>
                                        {a.icon} {a.name}
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                    
                    {/* –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è */}
                    <div style={{ display: 'flex', gap: '0.5rem', marginBottom: '0.75rem' }}>
                        <div 
                            className="card card-clickable"
                            style={{ flex: 1, textAlign: 'center' }}
                            onClick={() => setShowMealPlan(true)}
                        >
                            <span style={{ fontSize: '2rem' }}>üçΩÔ∏è</span>
                            <p style={{ fontWeight: 'bold', fontSize: '0.85rem' }}>–ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è</p>
                        </div>
                        <div 
                            className="card card-clickable"
                            style={{ flex: 1, textAlign: 'center' }}
                            onClick={() => setShowTemperament(true)}
                        >
                            <span style={{ fontSize: '2rem' }}>{tempInfo.icon}</span>
                            <p style={{ fontWeight: 'bold', fontSize: '0.85rem' }}>–¢–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç</p>
                        </div>
                        <div 
                            className="card card-clickable"
                            style={{ flex: 1, textAlign: 'center' }}
                            onClick={() => setShowRecipes(true)}
                        >
                            <span style={{ fontSize: '2rem' }}>üìñ</span>
                            <p style={{ fontWeight: 'bold', fontSize: '0.85rem' }}>–†–µ—Ü–µ–ø—Ç—ã</p>
                        </div>
                    </div>
                    
                    {/* –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—Ö–∞ */}
                    <div className="card" style={{ background: '#F0FDF4', marginBottom: '0.75rem' }}>
                        <strong>üí¨ –ò—Å—Ç–æ—Ä–∏—è —É—Å–ø–µ—Ö–∞:</strong>
                        <p style={{ fontSize: '0.85rem', marginTop: '0.5rem', fontStyle: 'italic' }}>{randomSuccess}</p>
                    </div>
                    
                    {/* –ú–æ—Ç–∏–≤–∞—Ü–∏—è */}
                    <div className="recommendation-card">
                        <div className="recommendation-title">üí° –ú—É–¥—Ä–æ—Å—Ç—å</div>
                        <p style={{ fontStyle: 'italic' }}>{randomMotivation}</p>
                    </div>
                </div>
            );
        }
        
        function App() {
            const [page, setPage] = useState('home');
            const [practice, setPractice] = useState(null);
            
            let content;
            if (page === 'home') content = <HomePage setPage={setPage} setPractice={setPractice} />;
            else if (page === 'day') content = <DayPage setPage={setPage} setPractice={setPractice} />;
            else if (page === 'walks') content = <WalkTrackerPage setPage={setPage} setPractice={setPractice} />;
            else if (page === 'nutrition') content = <NutritionPage setPage={setPage} />;
            else if (page === 'practices') content = <PracticesPage setPage={setPage} setPractice={setPractice} />;
            else if (page === 'practice') content = <PracticePage practice={practice} setPage={setPage} />;
            else if (page === 'chat') content = <ChatPage />;
            else if (page === 'journal') content = <JournalPage />;
            else if (page === 'profile') content = <ProfilePage />;
            
            return (
                <div className="app">
                    <main className="main">{content}</main>
                    <BottomNav page={page} setPage={setPage} />
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
